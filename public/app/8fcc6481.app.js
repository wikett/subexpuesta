"use strict";angular.module("subexpuestaV2App",["ngCookies","ngResource","ngSanitize","ngAnimate","ui.router","ui.bootstrap","ngImgCrop","cloudinary","angularFileUpload","uiGmapgoogle-maps","ngTagsInput"]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","uiGmapGoogleMapApiProvider",function(a,b,c,d,e){b.otherwise("/"),c.html5Mode(!0),d.interceptors.push("authInterceptor"),$.cloudinary.config().cloud_name="djhqderty",$.cloudinary.config().upload_preset="jtzexgjp",e.configure({v:"3.17",libraries:"weather,places,geometry,visualization"})}]).factory("authInterceptor",["$rootScope","$q","$cookieStore","$location",function(a,b,c,d){return{request:function(a){return a.headers=a.headers||{},c.get("token")&&-1===a.url.indexOf("api.cloudinary.com")&&(a.headers.Authorization="Bearer "+c.get("token")),a},responseError:function(a){return 401===a.status?(d.path("/login"),c.remove("token"),b.reject(a)):b.reject(a)}}}]).run(["$rootScope","$location","Auth","$window",function(a,b,c,d){a.$on("$stateChangeStart",function(a,e){d.scrollTo(0,0),c.isLoggedInAsync(function(a){e.authenticate&&!a&&b.path("/login")})})}]),angular.module("subexpuestaV2App").config(["$stateProvider",function(a){a.state("login",{url:"/login",templateUrl:"app/account/login/login.html",controller:"LoginCtrl"}).state("signup",{url:"/signup",templateUrl:"app/account/signup/signup.html",controller:"SignupCtrl"}).state("olvide",{url:"/olvide-password",templateUrl:"app/account/reset/forgotten.html",controller:"ForgottenCtrl"}).state("reset",{url:"/reset/:token",templateUrl:"app/account/reset/reset.html",controller:"ResetCtrl"}).state("settings",{url:"/settings",templateUrl:"app/account/settings/settings.html",controller:"SettingsCtrl",authenticate:!0})}]),angular.module("subexpuestaV2App").controller("LoginCtrl",["$scope","Auth","$location","$window",function(a,b,c,d){a.user={},a.errors={},a.login=function(d){a.submitted=!0,d.$valid&&b.login({email:a.user.email,password:a.user.password}).then(function(){console.log("Logeado correctamente"),c.path("/")})["catch"](function(b){a.errors.other=b.message})},a.loginOauth=function(a){d.location.href="/auth/"+a}}]),angular.module("subexpuestaV2App").controller("ForgottenCtrl",["$scope","$log","$http",function(a,b,c){a.error=!1,a.enviando=!1,a.enviado=!1,a.correo="",a.caca="",a.olivdePassword=function(){a.submitted=!0,_.isUndefined(a.correo)||(a.enviando=!0,c({url:"http://localhost:9000/api/users/forgotten",method:"POST",data:{email:a.correo},headers:"application/json"}).then(function(b){a.enviado=!0,a.enviando=!1},function(b){a.error=!0}))},a.volver=function(){a.enviando=!1,a.error=!1,a.enviado=!1,a.correo=""}}]),angular.module("subexpuestaV2App").controller("ResetCtrl",["$scope","$log","$http","$stateParams",function(a,b,c,d){a.error=!1,a.errorPassword=!1,a.enviado=!1,a.password="",a.passwordAgain="",a.resetear=function(){b.debug("Token: "+d.token),a.password!==a.passwordAgain?a.errorPassword=!0:(a.errorPassword=!1,c({url:"http://localhost:9000/api/users/reset/"+d.token,method:"POST",data:{password:a.password},headers:"application/json"}).then(function(b){a.enviado=!0,a.enviando=!1},function(b){a.error=!0}))},a.volver=function(){a.enviando=!1,a.error=!1,a.enviado=!1,a.correo=""}}]),angular.module("subexpuestaV2App").controller("SettingsCtrl",["$scope","Auth",function(a,b){a.errors={},a.passwordActual="",a.renewPassword="",a.user=b.getCurrentUser(),a.myImage="",a.myCroppedImage="",a.isCollapsed=!0;var c=function(b){var c=b.currentTarget.files[0],d=new FileReader;d.onload=function(b){a.$apply(function(a){a.myImage=b.target.result})},d.readAsDataURL(c)};angular.element(document.querySelector("#fileInput")).on("change",c),a.closeAlert=function(){a.message="",a.errors.other="",a.errors.passwordIguales=""},a.changePassword=function(c){a.submitted=!0,""===a.user.newPassword&&a.user.newPassword!==a.renewPassword?a.errors.passwordIguales="Repita la nueva contraseña correctamente":c.$valid&&b.changePassword(a.passwordActual,a.user.newPassword,a.user.name,a.user.location,a.user.web,a.myCroppedImage,a.user.participarConcursos,a.user.newsletter).then(function(){a.message="Usuario actualizado correctamente!"})["catch"](function(){a.errors.other="Contraseña incorrecta",a.message=""})}}]),angular.module("subexpuestaV2App").controller("SignupCtrl",["$scope","Auth","$location","$window","Email",function(a,b,c,d,e){a.user={},a.errors={},a.register=function(d){a.submitted=!0,d.$valid&&b.createUser({name:a.user.name,username:a.user.username,email:a.user.email,password:a.user.password}).then(function(){e.EmailEnviar.enviarMail({direccion:a.user.email},function(a){}),c.path("/")})["catch"](function(b){b=b.data,a.errors={},angular.forEach(b.errors,function(b,c){console.log("error: "+b.message+" field: "+c),d[c].$setValidity("mongoose",!1),a.errors[c]=b.message})})},a.loginOauth=function(a){d.location.href="/auth/"+a}}]),angular.module("subexpuestaV2App").controller("AdminCtrl",["$scope","$http","Auth","User","Modal",function(a,b,c,d,e){a.users=d.query(),a["delete"]=function(b){d.remove({id:b._id}),angular.forEach(a.users,function(c,d){c===b&&a.users.splice(d,1)})}}]),angular.module("subexpuestaV2App").config(["$stateProvider",function(a){a.state("admin",{url:"/admin",templateUrl:"app/admin/admin.html",controller:"AdminCtrl"})}]),angular.module("subexpuestaV2App").controller("SingleArticuloCtrl",["$scope","$log","Articulo","ArticuloComentario","$stateParams",function(a,b,c,d,e){function f(){c.get({id:e.id},function(b){a.singleArticulo=b})}a.singleArticulo={},a.listaColores=["#AAAA39","#9D344B","#313975","#E4E47A","#42000E","#959ABC","#474700","#D37186","#050A31"],a.comentarioArticulo={nombre:"",direccion:"",comentario:""},f(),a.enviarComentario=function(){a.singleArticulo=d.update({id:e.id},a.comentarioArticulo),a.comentarioArticulo={nombre:"",direccion:"",comentario:""}}}]),angular.module("subexpuestaV2App").config(["$stateProvider",function(a){a.state("articulo",{url:"/articulo",templateUrl:"app/articulo/articulo.html",controller:"ArticuloCtrl"}).state("blog",{url:"/blog",templateUrl:"app/articulo/lista-articulos.html",controller:"ListaArticulosCtrl"}).state("singlearticulo",{url:"/articulo/:id/:titulo",templateUrl:"app/articulo/single-articulo.html",controller:"SingleArticuloCtrl"})}]),angular.module("subexpuestaV2App").factory("Articulo",["$resource",function(a){return a("/api/articulos/:id",{id:"@_id"},{update:{method:"PUT"}})}]),angular.module("subexpuestaV2App").factory("ArticuloComentario",["$resource",function(a){return a("/api/articulos/addcomentario/:id",{id:"@_id"},{update:{method:"PUT"}})}]),angular.module("subexpuestaV2App").controller("ListaArticulosCtrl",["$scope","$log","Articulo",function(a,b,c){function d(){c.query({},function(c){a.listaArticulos=c,b.debug("listaArticulos[0]: "+JSON.stringify(a.listaArticulos[0]))})}a.listaArticulos=[],d()}]),angular.module("subexpuestaV2App").controller("ContactoCtrl",["$scope","Email","$log",function(a,b,c){a.enviado=!1,a.mostrarError=!1,a.enviando=!1,a.direccion="",a.nombre="",a.asunto="",a.mensaje="",a.enviarCorreo=function(){c.debug("Enviando correo..."),a.enviando=!0,b.EmailEnviarContacto.enviarMailContacto({direccion:a.direccion,nombre:a.nombre,asunto:a.asunto,mensaje:a.mensaje},function(b){c.debug("mensaje: "+JSON.stringify(b)),"success"===b.message?a.enviado=!0:a.mostrarError=!0,a.enviando=!1})}}]),angular.module("subexpuestaV2App").config(["$stateProvider",function(a){a.state("contacto",{url:"/contacto",templateUrl:"app/contacto/contacto.html",controller:"ContactoCtrl"})}]),angular.module("subexpuestaV2App").factory("Email",["$resource",function(a){return{EmailAPI:a("/api/emails/:id",{id:"@_id"},{update:{method:"PUT"}}),EmailEnviar:a("/api/emails/enviarmail",{autor:"@_id"},{enviarMail:{method:"POST"}}),EmailEnviarContacto:a("/api/emails/enviarmailcontacto",{autor:"@_id"},{enviarMailContacto:{method:"POST"}})}}]),angular.module("subexpuestaV2App").controller("LocalizacionCreadaCtrl",["$scope","$log","Localizacion","$stateParams","Auth",function(a,b,c,d,e){function f(){c.LocalizacionAutor.getByAutor({autor:a.getCurrentUser.username},function(b){a.listaLocalizaciones=b})}a.getCurrentUser=e.getCurrentUser(),a.listaLocalizaciones={},a.parametro=d.id,a.titulo=d.titulo,f()}]),angular.module("subexpuestaV2App").controller("LocalizacionesCtrl",["$scope","$rootScope","$http","$upload","$log","$location","Localizacion","uiGmapGoogleMapApi","Auth","Modal","$filter",function(a,b,c,d,e,f,g,h,i,j,k){a.getCurrentUser=i.getCurrentUser(),a.localizacion={},a.localizacionCreada=!1,a.files={},a.finalizado=!1,a.mensajeError="",a.rate=0,a.rateCL=0,a.max=10,a.isReadonly=!1,a.hoveringOver=function(b){a.overStar=b,a.percent=100*(b/a.max)},a.hoveringOverCL=function(b){a.overStarCL=b,a.percentCL=100*(b/a.max)},a.ratingStates=[{stateOn:"glyphicon-ok-sign",stateOff:"glyphicon-ok-circle"},{stateOn:"glyphicon-star",stateOff:"glyphicon-star-empty"},{stateOn:"glyphicon-heart",stateOff:"glyphicon-ban-circle"},{stateOn:"glyphicon-heart"},{stateOff:"glyphicon-off"}],a.today=function(){a.dt=new Date},a.clear=function(){a.dt=null},a.tags=[],a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.closeAlert=function(){a.mensajeError=""},a.formats=["dd-MM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],a.format=a.formats[3],a.map={center:{latitude:40.399995,longitude:-4.087896},zoom:6,events:{click:function(b,c,d){a.$apply(function(){a.marker.coords.latitude=d[0].latLng.lat(),a.marker.coords.longitude=d[0].latLng.lng(),a.marker.icon="http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png"})}}},a.marker={id:0,icon:"http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png",coords:{latitude:0,longitude:0},options:{draggable:!0},events:{dragend:function(a,b,c){a.getPosition().lat(),a.getPosition().lng()}}},h.then(function(a){}),a.crearLocalizacion=function(){return 0===a.marker.coords.latitude?void(a.mensajeError="Por favor, indique la localización de la fotografía en el mapa."):_.isUndefined(a.localizacion.titulo)?void(a.mensajeError="Por favor, indique el titulo de la fotografia."):_.isUndefined(a.dt)?void(a.mensajeError="Por favor, indique la fecha de cuando fue tomada la fotografia."):_.isUndefined(a.localizacion.cloudinaryId)?void(a.mensajeError="Por favor, seleccione la imagene que quiere subir."):_.isUndefined(a.localizacion.acceso)?void(a.mensajeError="Por favor, indique el acceso a la localizacion para realizar la fotografia."):0===a.rate?void(a.mensajeError="Por favor, valore peligrosidad de la zona de acceso al lugar de la fotografia."):0===a.rateCL?void(a.mensajeError="Por favor, valore la contaminacion luminica del lugar de la fotografia."):(a.nuevaLocalizacion=new g.LocalizacionAPI,a.nuevaLocalizacion.titulo=a.localizacion.titulo,a.listaEtiquetas=[],a.tags.length>0&&_.each(a.tags,function(b){a.listaEtiquetas.push(b.text)}),a.nuevaLocalizacion.tags=a.listaEtiquetas,a.nuevaLocalizacion.autor=a.getCurrentUser.username,a.nuevaLocalizacion.cloudinaryId=a.localizacion.cloudinaryId,a.nuevaLocalizacion.fechaToma=a.dt,a.nuevaLocalizacion.acceso=a.localizacion.acceso,a.nuevaLocalizacion.peligrosidad=a.rate,a.nuevaLocalizacion.contaminacionLuminica=a.rateCL,a.nuevaLocalizacion.notasAdicionales=a.localizacion.notasAdicionales,a.nuevaLocalizacion.latitud=a.marker.coords.latitude,a.nuevaLocalizacion.longitud=a.marker.coords.longitude,a.nuevaLocalizacion.$save().then(function(b){a.localizacionCreada=!0,f.path("/localizacion-creada/"+b._id+"/"+k("seo")(b.titulo))}),void 0)},a.modalCreada=j.confirm.localizacionCreada(function(a){e.debug("Dentro modal: "),f.path("/localizacion-creada")}),a.updateTitle=function(){var b=a.widget.fileupload("option","formData");b.context="photo="+a.title,a.widget.fileupload("option","formData",b)},a.widget=$(".cloudinary_fileupload").unsigned_cloudinary_upload($.cloudinary.config().upload_preset,{tags:"subexpuesta",context:"photo="},{acceptFileTypes:/(\.|\/)(gif|jpe?g|png|bmp|ico)$/i,maxFileSize:5e6,dropZone:"#direct_upload_jquery",start:function(b){a.status="Comienza la carga...",a.files={},a.$apply()},fail:function(b,c){a.status="Error en la carga",a.$apply()}}).on("cloudinaryprogress",function(b,c){var d=c.files[0].name,e=a.files[d]||{};e.progress=Math.round(100*c.loaded/c.total),e.status="Subiendo... "+e.progress+"%",a.files[d]=e,a.$apply()}).on("cloudinaryprogressall",function(b,c){a.progress=Math.round(100*c.loaded/c.total),a.status="Subiendo... "+a.progress+"%",a.$apply()}).on("cloudinarydone",function(b,c){c.result.context={custom:{photo:a.title}},a.status="Finalizado correctamente",a.result=c.result,a.localizacion.cloudinaryId=a.result.public_id;var d=c.files[0].name,e=a.files[d]||{};e.name=d,e.result=c.result,a.files[d]=e,a.finalizado=!0,a.$apply()})}]),angular.module("subexpuestaV2App").controller("ModalInstanceCtrl",["$scope","$modalInstance","items",function(a,b,c){a.items=c,a.selected={item:a.items[0]},a.ok=function(){b.close(a.selected.item)},a.cancel=function(){b.dismiss("cancel")}}]),angular.module("subexpuestaV2App").config(["$stateProvider",function(a){a.state("localizaciones",{url:"/localizaciones",templateUrl:"app/localizaciones/localizaciones.html",controller:"LocalizacionesMapaCtrl"}).state("tuslocalizaciones",{url:"/tus-localizaciones/:autor",templateUrl:"app/localizaciones/tus-localizaciones.html",controller:"LocalizacionesPortfolioCtrl"}).state("vistalocalizaciones",{url:"/localizaciones/:id/:titulo",templateUrl:"app/localizaciones/vista-localizaciones.html",controller:"LocalizacionesVistaCtrl"}).state("editarlocalizaciones",{url:"/editar-localizaciones/:id/",templateUrl:"app/localizaciones/editar-localizaciones.html",controller:"LocalizacionesEditarCtrl",authenticate:!0}).state("localizacioncreada",{url:"/localizacion-creada/:id/:titulo",templateUrl:"app/localizaciones/localizacion-creada.html",controller:"LocalizacionCreadaCtrl",authenticate:!0}).state("crearlocalizaciones",{url:"/crear-localizaciones",templateUrl:"app/localizaciones/crear-localizaciones.html",controller:"LocalizacionesCtrl",authenticate:!0})}]),angular.module("subexpuestaV2App").factory("Localizacion",["$resource",function(a){return{LocalizacionAPI:a("/api/localizaciones/:id",{id:"@_id"},{update:{method:"PUT"}}),LocalizacionAutor:a("/api/localizaciones/autor/:autor",{autor:"@_id"},{getByAutor:{method:"GET",isArray:!0,params:{autor:"@autor"}}})}}]),angular.module("subexpuestaV2App").controller("LocalizacionesEditarCtrl",["$scope","$stateParams","$log","$location","Localizacion","uiGmapGoogleMapApi","Auth","Modal",function(a,b,c,d,e,f,g,h){function i(){e.LocalizacionAPI.get({id:b.id},function(b){a.localizacion=b,a.marker.coords.latitude=b.latitud,a.marker.coords.longitude=b.longitud,a.map.center.latitude=b.latitud,a.map.center.longitude=b.longitud,a.dt=b.fechaToma;var c=[];b.tags.length>0&&_.each(b.tags,function(a){var b=new function(){this.text=a};c.push(b)}),a.tags=c})}a.getCurrentUser=g.getCurrentUser(),a.localizacion={},a.localizacionEditada=!1,a.mensajeError="",a.localizacionBorrada=!1,a.rate=5,a.rateCL=5,a.max=10,a.isReadonly=!1,a.hoveringOver=function(b){a.overStar=b,a.percent=100*(b/a.max)},a.hoveringOverCL=function(b){a.overStarCL=b,a.percentCL=100*(b/a.max)},a.tags=[],a.ratingStates=[{stateOn:"glyphicon-ok-sign",stateOff:"glyphicon-ok-circle"},{stateOn:"glyphicon-star",stateOff:"glyphicon-star-empty"},{stateOn:"glyphicon-heart",stateOff:"glyphicon-ban-circle"},{stateOn:"glyphicon-heart"},{stateOff:"glyphicon-off"}],a.today=function(){a.dt=new Date},a.clear=function(){a.dt=null},a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.closeAlert=function(){a.mensajeError=""},a.formats=["dd-MM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],a.format=a.formats[3],a.map={center:{latitude:40.399995,longitude:-4.087896},zoom:6,events:{click:function(b,d,e){a.$apply(function(){c.log("click event"),c.log("latitud: "+e[0].latLng.lat()),c.log("$scope.marker.coords.latitude: "+a.marker.coords.latitude),a.marker.coords.latitude=e[0].latLng.lat(),a.marker.coords.longitude=e[0].latLng.lng()})}}},a.marker={id:0,coords:{latitude:0,longitude:0},icon:"http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png",options:{draggable:!0},events:{dragend:function(a,b,d){c.log("marker dragend");a.getPosition().lat(),a.getPosition().lng()}}},f.then(function(a){}),a.editarLocalizacion=function(){return 0===a.marker.coords.latitude?void(a.mensajeError="Por favor, indique la localización de la fotografía en el mapa."):_.isUndefined(a.localizacion.titulo)?void(a.mensajeError="Por favor, indique el titulo de la fotografia."):_.isUndefined(a.dt)?void(a.mensajeError="Por favor, indique la fecha de cuando fue tomada la fotografia."):_.isUndefined(a.localizacion.acceso)?void(a.mensajeError="Por favor, indique el acceso a la localizacion para realizar la fotografia."):0===a.rate?void(a.mensajeError="Por favor, valore la facilidad de acceso al lugar de la fotografia."):0===a.rateCL?void(a.mensajeError="Por favor, valore la contaminacion luminica del lugar de la fotografia."):void(a.editarLocalizacion=e.LocalizacionAPI.get({id:b.id},function(){a.editarLocalizacion.titulo=a.localizacion.titulo,a.editarLocalizacion.autor=a.getCurrentUser.username,a.editarLocalizacion.cloudinaryId=a.localizacion.cloudinaryId,a.editarLocalizacion.fechaToma=a.dt,a.editarLocalizacion.acceso=a.localizacion.acceso,a.editarLocalizacion.peligrosidad=a.rate,a.editarLocalizacion.contaminacionLuminica=a.rateCL,a.editarLocalizacion.notasAdicionales=a.localizacion.notasAdicionales,a.editarLocalizacion.latitud=a.marker.coords.latitude,a.editarLocalizacion.longitud=a.marker.coords.longitude,a.editarLocalizacion.$update().then(function(b){a.localizacionEditada=!0})}))},i()}]),angular.module("subexpuestaV2App").controller("LocalizacionesMapaCtrl",["$scope","$log","Localizacion","uiGmapGoogleMapApi",function(a,b,c,d){function e(){a.listaLocalizaciones=c.LocalizacionAPI.query(function(){_.each(a.listaLocalizaciones,function(b){var c={id:b.cloudinaryId,_id:b._id,autor:b.autor,tags:b.tags,latitude:b.latitud,longitude:b.longitud,titulo:b.titulo,idFoto:b.cloudinaryId,fechaToma:b.fechaToma,acceso:b.acceso,peligrosidad:b.peligrosidad,contaminacion:b.contaminacionLuminica,notas:b.notasAdicionales,icon:"http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png",events:{click:function(b,c,d){a.$apply(function(){a.fotoActual._id=d._id,a.fotoActual.idClodinary=d.id,a.fotoActual.tags=d.tags,a.fotoActual.autor=d.autor,a.fotoActual.titulo=d.titulo,a.fotoActual.fechaToma=d.fechaToma,a.fotoActual.acceso=d.acceso,a.fotoActual.peligrosidad=d.peligrosidad,a.fotoActual.contaminacion=d.contaminacion,a.fotoActual.notas=d.notas})}}};a.misLocalizaciones.push(c)})})}a.listaLocalizaciones={},a.misLocalizaciones=[],a.fotoActual={},a.map={center:{latitude:40.399995,longitude:-4.087896},zoom:2,bounds:{},clusterOptions:{title:"Hi I am a Cluster!",gridSize:60,ignoreHidden:!0,minimumClusterSize:2}},a.options={scrollwheel:!0},d.then(function(a){}),e()}]),angular.module("subexpuestaV2App").controller("LocalizacionesPortfolioCtrl",["$scope","$log","Localizacion","$stateParams","$filter",function(a,b,c,d,e){function f(){c.LocalizacionAutor.getByAutor({autor:d.autor},function(b){a.listaLocalizaciones=b})}a.listaLocalizaciones={},b.debug("seo: "+e("seo")("mi titulo españa´s people ahí es na!")),f()}]),angular.module("subexpuestaV2App").controller("LocalizacionesVistaCtrl",["$scope","$log","Localizacion","$stateParams","uiGmapGoogleMapApi","Auth","Modal","$location",function(a,b,c,d,e,f,g,h){function i(){c.LocalizacionAPI.get({id:d.id},function(b){a.localizacion=b,a.marker.coords.latitude=b.latitud,a.marker.coords.longitude=b.longitud,a.map.center.latitude=b.latitud,a.map.center.longitude=b.longitud,a.getCurrentUser.username===b.autor&&(a.mostrarEditar=!0)})}a.localizacion={},a.getCurrentUser=f.getCurrentUser(),a.mostrarEditar=!1,a.map={center:{latitude:0,longitude:0},zoom:5},a.marker={id:0,icon:"http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png",coords:{latitude:0,longitude:0}},e.then(function(a){}),a["delete"]=g.confirm.borrarLocalizacion(function(e){b.debug("Dentro modal: "+d.id),a.editarLocalizacion=c.LocalizacionAPI.get({id:d.id},function(){a.editarLocalizacion.estado=5,a.editarLocalizacion.$update().then(function(c){b.debug("Localizacion borrada"),h.path("/tus-localizaciones/"+a.getCurrentUser.username)})})}),i()}]),angular.module("subexpuestaV2App").controller("MainCtrl",["$scope","Auth","Email","$log",function(a,b,c,d){a.isLoggedIn=b.isLoggedIn,a.enviarCorreo=function(){d.debug("Enviando correo..."),c.EmailEnviar.enviarMail({direccion:"pepito@asdf.com"},function(a){d.debug("mensaje: "+a)})}}]),angular.module("subexpuestaV2App").config(["$stateProvider",function(a){a.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"})}]),angular.module("subexpuestaV2App").controller("MejoraCtrl",["$scope","Mejora","Auth",function(a,b,c){function d(){a.listaMejoras=b.query(function(){})}a.isAdmin=c.isAdmin,a.listaMejoras=[],a.descripcionMejora="",a.isCollapsed=!0,a.mejoraCreada=!1,a.estadosMejoras=["Pendiente de hacer","En proceso...","Realizado","Rechazado","Borrado"],a.crearMejora=function(){a.nuevaMejora=new b,a.nuevaMejora.descripcion=a.descripcionMejora,a.nuevaMejora.$save().then(function(b){a.isCollapsed=!0,a.descripcionMejora="",a.mejoraCreada=!0,a.listaMejoras.push(b)})},a.actualizarVoto=function(c,e){a.actualizarMejora=b.get({id:c},function(){e?a.actualizarMejora.votos++:a.actualizarMejora.votos--,a.actualizarMejora.$update().then(function(a){d()})})},a.borrarMejora=function(c){console.log("MejoraCtrl borrarMejora: "+c),a.borrarMejora=b.get({id:c},function(){a.borrarMejora.$delete().then(function(a){d()})})},d()}]),angular.module("subexpuestaV2App").config(["$stateProvider",function(a){a.state("mejora",{url:"/mejora",templateUrl:"app/mejora/mejora.html",controller:"MejoraCtrl"})}]),angular.module("subexpuestaV2App").factory("Mejora",["$resource",function(a){return a("/api/mejoras/:id",{id:"@_id"},{update:{method:"PUT"}})}]),angular.module("subexpuestaV2App").filter("seo",function(){return function(a){function b(a){switch(a){case"á":return"a";case"é":return"e";case"í":return"i";case"ó":return"o";case"ú":return"u";case"ñ":return"n";default:return a}}function c(a){var c="";for(var d in a)c+=b(a[d]);return c}return _.isUndefined(a)?void 0:c(a.toLowerCase()).replace(/[-\s]+/g,"-").replace(/[^-\w\s]/g,"").replace(/^\s+|\s+$/g,"")+""}}),angular.module("subexpuestaV2App").factory("Auth",["$location","$rootScope","$http","User","$cookieStore","$q",function(a,b,c,d,e,f){var g={};return e.get("token")&&(g=d.get()),{login:function(a,b){var h=b||angular.noop,i=f.defer();return c.post("/auth/local",{email:a.email,password:a.password}).success(function(a){return e.put("token",a.token),g=d.get(),i.resolve(a),h()}).error(function(a){return this.logout(),i.reject(a),h(a)}.bind(this)),i.promise},logout:function(){e.remove("token"),g={}},createUser:function(a,b){var c=b||angular.noop;return d.save(a,function(b){return e.put("token",b.token),g=d.get(),c(a)},function(a){return this.logout(),c(a)}.bind(this)).$promise},changePassword:function(a,b,c,e,f,h,i,j,k){var l=k||angular.noop;return d.changePassword({id:g._id},{passwordActual:a,newPassword:b,newName:c,newLocation:e,newWeb:f,newAvatar:h,newSorteo:i,newNewsletter:j},function(a){return l(a)},function(a){return l(a)}).$promise},getCurrentUser:function(){return g},isLoggedIn:function(){return g.hasOwnProperty("role")},isLoggedInAsync:function(a){g.hasOwnProperty("$promise")?g.$promise.then(function(){a(!0)})["catch"](function(){a(!1)}):a(g.hasOwnProperty("role")?!0:!1)},isAdmin:function(){return"admin"===g.role},getToken:function(){return e.get("token")}}}]),angular.module("subexpuestaV2App").factory("Forgotten",["$resource",function(a){return a("/api/users/forgotten/:id",{id:"@_id"},{update:{method:"PUT"}})}]),angular.module("subexpuestaV2App").factory("User",["$resource",function(a){return a("/api/users/:id/:controller",{id:"@_id"},{changePassword:{method:"PUT",params:{controller:"password"}},get:{method:"GET",params:{id:"me"}}})}]),angular.module("subexpuestaV2App").factory("Modal",["$rootScope","$modal",function(a,b){function c(c,d){var e=a.$new();return c=c||{},d=d||"modal-default",angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})}return{confirm:{"delete":function(a){return a=a||angular.noop,function(){console.log("arguments: "+JSON.stringify(arguments));var b,d=Array.prototype.slice.call(arguments),e=d.shift();b=c({modal:{dismissable:!0,title:"Confirmacion de borrado",html:"<p>¿Estás seguro de borrar la localización: <strong>"+e+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Borrar",click:function(a){b.close(a)}},{classes:"btn-default",text:"Cancelar",click:function(a){b.dismiss(a)}}]}},"modal-danger"),b.result.then(function(b){a.apply(b,d)})}},localizacionCreada:function(a){return a=a||angular.noop,function(){console.log("arguments: "+JSON.stringify(arguments));{var b,d=Array.prototype.slice.call(arguments);d.shift()}b=c({modal:{dismissable:!0,title:"Localización creada!!",html:"<p>¿Quieres subir una localizacion nueva?</p>",buttons:[{classes:"btn-success",text:"Crear Nueva Localización",click:function(a){b.close(a)}},{classes:"btn-primary",text:"Continuar",click:function(a){b.dismiss(a)}}]}},"modal-success"),b.result.then(function(b){a.apply(b,d)})}},borrarLocalizacion:function(a){return a=a||angular.noop,function(){console.log("arguments: "+JSON.stringify(arguments));var b,d=Array.prototype.slice.call(arguments),e=d.shift();b=c({modal:{dismissable:!0,title:"Confirmacion de borrado",html:"<p>¿Estás seguro de borrar la localización: <strong>"+e.titulo+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Borrar",click:function(a){b.close(a)}},{classes:"btn-default",text:"Cancelar",click:function(a){b.dismiss(a)}}]}},"modal-danger"),b.result.then(function(b){a.apply(b,d)})}}}}}]),angular.module("subexpuestaV2App").directive("mongooseError",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){b.on("keydown",function(){return d.$setValidity("mongoose",!0)})}}}),angular.module("subexpuestaV2App").controller("NavbarCtrl",["$scope","$location","Auth",function(a,b,c){a.menu=[{title:"Home",link:"/"}],a.isCollapsed=!0,a.isLoggedIn=c.isLoggedIn,a.isAdmin=c.isAdmin,a.getCurrentUser=c.getCurrentUser,console.log("getCurrentUser: "+JSON.stringify(a.getCurrentUser)),a.logout=function(){c.logout(),b.path("/login")},a.isActive=function(a){return a===b.path()}}]),angular.module("subexpuestaV2App").run(["$templateCache",function(a){a.put("app/account/login/login.html",'<div role=main class=main><section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Iniciar Sesión</li></ul></div></div><div class=row><div class=col-md-12><h1>Iniciar Sesión</h1></div></div></div></section><div class=container><div class=row><div class=col-md-12><div class="row featured-boxes login"><div class="col-md-6 col-md-offset-3"><div class="featured-box featured-box-secundary default info-content"><div class=box-content><h4>Inicia Sesión</h4><form class=form name=form ng-submit=login(form) novalidate><div class=row><div class=form-group><div class=col-md-12><label>E-mail</label><input type=email name=email class="form-control input-lg" ng-model=user.email required></div></div></div><div class=row><div class=form-group><div class=col-md-12><a class=pull-right href=/olvide-password>(Olvidaste tu password?)</a><label>Password</label><input type=password name=password class="form-control input-lg" ng-model=user.password required></div></div></div><div class=row><div class=col-md-6><div class="form-group has-error"><p class=help-block ng-show="form.email.$error.required && form.password.$error.required && submitted">Por favor, introduzca su email y contraseña</p><p class=help-block ng-show="form.email.$error.email && submitted">Dirección de email incorrecta</p><p class=help-block>{{ errors.other }}</p></div></div></div><div class=row><div class=col-md-6><a href=/signup>¿No tienes cuenta? Regístrate</a></div><div class=col-md-6><input type=submit value=Login class="btn btn-primary pull-right push-bottom" data-loading-text=Loading...></div></div></form></div></div></div></div></div></div></div></div>'),a.put("app/account/reset/forgotten.html",'<div role=main class=main><section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Olvidé mi contraseña</li></ul></div></div><div class=row><div class=col-md-12><h1>Olvidé mi contraseña</h1></div></div></div></section><div class=container><div class=row><div class=col-md-12><div class="row featured-boxes login"><div class="col-md-6 col-md-offset-3"><div class="featured-box featured-box-secundary default info-content"><div class=box-content ng-hide="enviado || error"><h4>Solicitar nueva contraseña</h4><div class=row><div class=form-group><div class=col-md-12><label>E-mail</label><input type=email class="form-control input-lg" ng-model=correo required></div></div></div><div class=row><div class=col-md-6><small>Se te enviará a tu email las instrucciones para resetear tu contraseña.</small></div><div class=col-md-6><i class="fa fa-spinner fa-pulse" style=font-size:24px ng-show=enviando></i><button class="btn btn-success pull-right" type=button ng-click=olivdePassword() ng-disabled="!correo.length>0 || enviando">Enviar</button></div></div></div><div class=box-content ng-show=enviado><h4>Solicitud enviada correctamente</h4><div class=row><div class=form-group><div class=col-md-12><p>Se te acaba de enviar un correo a la dirección falicitada para poder resetear tu contraseña. Abra el correo y siga las instrucciones para completar el proceso. Gracias</p></div></div></div></div><div class=box-content ng-show=error><h4>Se produjo un error</h4><div class=row><div class=form-group><div class=col-md-12><p>Por favor, revise que ha puesto su email correctamente o espere unos minutos para volver a intentarlo. Gracias</p><a href=# ng-click=volver()>Volver</a></div></div></div></div></div></div></div></div></div></div></div>'),a.put("app/account/reset/reset.html",'<div role=main class=main><section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Crear nueva contraseña</li></ul></div></div><div class=row><div class=col-md-12><h1>Crear nueva contraseña</h1></div></div></div></section><div class=container><div class=row><div class=col-md-12><div class="row featured-boxes login"><div class="col-md-6 col-md-offset-3"><div class="featured-box featured-box-secundary default info-content"><div class=box-content ng-hide="enviado || error"><h4>Crear Nueva contraseña</h4><div class=row><div class=form-group><div class=col-md-12><label>Contraseña</label><input type=password name=password class="form-control input-lg" ng-model=password required></div></div><div class=form-group><div class=col-md-12><label>Repetir Contraseña</label><input type=password name=passwordAgain class="form-control input-lg" ng-model=passwordAgain required></div></div></div><div class=row ng-show=errorPassword><div class=col-md-12><div class="form-group has-error"><p class=help-block>Las contraseñas no coinciden</p></div></div></div><div class=row><div class=col-md-12><i class="fa fa-spinner fa-pulse" style=font-size:24px ng-show=enviando></i><button class="btn btn-success pull-right" type=button ng-click=resetear() ng-disabled="!password.length>0 || !passwordAgain.length>0">Enviar</button></div></div></div><div class=box-content ng-show=enviado><h4>Contraseña actualizada correctamente</h4><div class=row><div class=form-group><div class=col-md-12><p>Vuelve a la página de login y ya puedes utilizar tu nueva contraseña. Gracias.</p><a href=/login>Iniciar Sesión</a></div></div></div></div><div class=box-content ng-show=error><h4>Se produjo un error</h4><div class=row><div class=form-group><div class=col-md-12><p>Token invalido o ha expirado su tiempo para renovar su contraseña (tienes una hora máximo para abrir el enlace que se envió a tu correo). Vuelva a solicitar cambio de contraseña. Gracias</p><a href=/olvide-password>Solicitar nueva contraseña</a></div></div></div></div></div></div></div></div></div></div></div>'),
a.put("app/account/settings/settings.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Home</a></li><li class=active>Mi Cuenta</li></ul></div></div><div class=row><div class=col-md-12><h1>Mi Cuenta</h1></div></div></div></section><div class=container><div class=row><div class=col-lg-12><form class="form-horizontal form-bordered" name=form ng-submit=changePassword(form) novalidate><section class=panel><header class=panel-heading><h2 class=panel-title>Tus datos</h2></header><div class=panel-body><div class=form-group><label class="col-md-3 control-label" for=inputDefault>Nombre</label><div class=col-md-6><input class=form-control name=name ng-model=user.name></div></div><div class=form-group><label class="col-md-3 control-label" for=inputDefault>¿De dónde eres?</label><div class=col-md-6><input class=form-control name=location ng-model=user.location></div></div><div class=form-group><label class="col-md-3 control-label" for=inputDefault>Web Personal</label><div class=col-md-6><input class=form-control name=web ng-model=user.web></div></div><div class=form-group><label class="col-md-3 control-label" for=inputDefault>Descríbete</label><div class=col-md-6><textarea type=text rows=4 class=form-control name=web ng-model=user.descripcion></textarea></div></div><div class=form-group><label class="col-md-3 control-label" for=inputSuccess>Alertas</label><div class=col-md-6><div class=checkbox><label><input type=checkbox id=participarConcursos ng-model=user.participarConcursos> Me gustaría participar en sorteos de material fotográfico, linciencias o similar.</label></div><div class=checkbox><label><input type=checkbox id=newsletter ng-model=user.newsletter> Me gustaría recibir el boletín de noticias</label></div></div></div><div class=form-group><a href="" class="col-md-3 control-label" for=inputDefault ng-click="isCollapsed = !isCollapsed">Editar Avatar <i ng-class="isCollapsed ? \'fa fa-chevron-right\' : \'fa fa-chevron-down\'"></i></a><div class=col-md-6><div collapse=isCollapsed><input type=file id=fileInput class="form-control"><div style="background: #E4E4E4;overflow: hidden;width:538px;height:350px; margin-top:15px"><img-crop image=myImage area-type=square result-image=myCroppedImage result-image-size=120></img-crop></div><div>Imagen final:</div><div><img ng-src="{{myCroppedImage}}"></div></div></div></div></div></section><section class=panel><header class=panel-heading><div class=panel-actions></div><h2 class=panel-title>Cambiar contraseña</h2></header><div class=panel-body><div class=form-group><label class="col-md-3 control-label" for=inputDefault>Nueva contraseña</label><div class=col-md-6><input type=password name=newPassword class=form-control ng-model=user.newPassword ng-minlength="6"><p class=help-block ng-show="form.newPassword.$error.minlength && (form.newPassword.$dirty || submitted)">La contraseña debe tener al menos 6 caracteres.</p></div></div><div class=form-group><label class="col-md-3 control-label" for=inputDefault>Repetir nueva contraseña</label><div class=col-md-6><input type=password name=renewPassword class=form-control ng-model=renewPassword></div></div><div class=col-md-9><alert type=danger close=closeAlert() ng-show="errors.passwordIguales.length>0">{{ errors.passwordIguales }}</alert></div></div></section><section class=panel><header class=panel-heading><div class=panel-actions></div><h2 class=panel-title>Vuelve a introducir tu contraseña</h2></header><div class=panel-body><div class=form-group><label class="col-md-3 control-label" for=inputDefault>Tu actual contraseña<span style=color:red>*</span></label><div class=col-md-6><input type=password name=passwordActual class=form-control ng-model=passwordActual mongoose-error required><alert type=danger ng-show="form.passwordActual.$error.required && submitted" style=margin-top:10px>Debes indicar tu contraseña actual</alert></div></div><div class=col-md-9><alert type=success close=closeAlert($index) ng-show="message.length>0">{{message}}</alert><alert type=danger close=closeAlert($index) ng-show="errors.other.length>0">{{ errors.other }}</alert><button class="btn btn-lg btn-success pull-right" type=submit>Guardar</button></div></div></section></form></div></div></div>'),a.put("app/account/signup/signup.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Crear Cuenta</li></ul></div></div><div class=row><div class=col-md-12><h1>Crear Cuenta</h1></div></div></div></section><div class=container><div class=row><div class=col-md-12><div class="row featured-boxes login"><div class="col-md-6 col-md-offset-3"><div class="featured-box featured-box-secundary default info-content"><div class=box-content><h4>Crear Cuenta</h4><form class=form name=form ng-submit=register(form) novalidate><div class=row><div class=form-group ng-class="{ \'has-success\': form.username.$valid && submitted,\n                    \'has-error\': form.username.$invalid && submitted }"><label>Usuario</label><input name=username class=form-control ng-model=user.username required mongoose-error><p class=help-block ng-show="form.username.$error.required && submitted">Olvidaste poner tu nombre de usuario</p><p class=help-block ng-show=form.username.$error.mongoose>{{ errors.username }}</p></div></div><div class=row><div class=form-group ng-class="{ \'has-success\': form.email.$valid && submitted,\n                    \'has-error\': form.email.$invalid && submitted }"><label>Email</label><input type=email name=email class=form-control ng-model=user.email required mongoose-error><p class=help-block ng-show="form.email.$error.email && submitted">No parece un email correcto</p><p class=help-block ng-show="form.email.$error.required && submitted">Olvidaste poner tu correo</p><p class=help-block ng-show=form.email.$error.mongoose>{{ errors.email }}</p></div></div><div class=row><div class=form-group ng-class="{ \'has-success\': form.password.$valid && submitted,\n                    \'has-error\': form.password.$invalid && submitted }"><label>Contraseña</label><input type=password name=password class=form-control ng-model=user.password ng-minlength=6 required mongoose-error><p class=help-block ng-show="(form.password.$error.minlength || form.password.$error.required) && submitted">La contraseña debe tener al menos 6 caracteres.</p><p class=help-block ng-show=form.password.$error.mongoose>{{ errors.password }}</p></div></div><div class=row><div class=form-group ng-class="{ \'has-success\': form.password.$valid && submitted,\n                    \'has-error\': form.password.$invalid && submitted }"><label>Repetir Contraseña</label><input type=password name=passwordagain class=form-control ng-model=user.passwordagain required><p class=help-block ng-show="(user.password != user.passwordagain) && submitted">No coinciden las contraseñas</p></div></div><div class=row><div class=col-md-6><a href=/login>¿Tienes ya cuenta? Inicia Sesión</a></div><div class=col-md-6><input type=submit value=Crear class="btn btn-success btn-lg pull-right"></div></div></form></div></div></div></div></div></div></div>'),a.put("app/admin/admin.html",'<div class=container><p>The delete user and user index api routes are restricted to users with the \'admin\' role.</p><ul class=list-group><li class=list-group-item ng-repeat="user in users"><strong>{{user.name}}</strong><br><span class=text-muted>{{user.email}}</span> <a ng-click=delete(user) class=trash><span class="glyphicon glyphicon-trash pull-right"></span></a></li></ul></div>'),a.put("app/articulo/articulo.html","<div class=col-md-12>This is the articulo view.</div>"),a.put("app/articulo/lista-articulos.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Home</a></li><li class=active>Blog</li></ul></div></div><div class=row><div class=col-md-12><h1>Blog</h1></div></div></div></section><div class=container><div class=row><div class=col-md-9><div class=blog-posts><article ng-repeat="articulo in listaArticulos" class="post post-large"><div class="post-image single"><img class=img-thumbnail src=assets/images/blog/blog-image-2.jpg alt=""></div><div class=post-date><span class=day>{{articulo.fechaCreacion | date:\'d\'}}</span> <span class=month>{{articulo.fechaCreacion | date:\'MMM\'}}</span></div><div class=post-content><h2><a href="/articulo/{{articulo._id}}/{{articulo.titulo | seo}}">{{articulo.titulo}}</a></h2><p>{{articulo.contenido | limitTo: 300}} [...]</p><div class=post-meta><span><i class="fa fa-user"></i> Por <a href=#>{{articulo.autor}}</a></span><!--<span><i class="fa fa-tag"></i> <a href="#">Duis</a>, <a href="#">News</a> </span>--><!--<span><i class="fa fa-comments"></i> <a href="#">12 Comments</a></span>--> <a href=blog-post.html class="btn btn-xs btn-primary pull-right">Leer más...</a></div></div></article><!--<ul class="pagination pagination-lg pull-right">\r\n									<li><a href="#">«</a></li>\r\n									<li class="active"><a href="#">1</a></li>\r\n									<li><a href="#">2</a></li>\r\n									<li><a href="#">3</a></li>\r\n									<li><a href="#">»</a></li>\r\n								</ul>--></div></div><div class=col-md-3><aside class=sidebar><!--<form>\r\n									<div class="input-group input-group-lg">\r\n										<input class="form-control" placeholder="Search..." name="s" id="s" type="text">\r\n										<span class="input-group-btn">\r\n											<button type="submit" class="btn btn-primary btn-lg"><i class="fa fa-search"></i></button>\r\n										</span>\r\n									</div>\r\n								</form>\r\n\r\n								<hr />--><h4>Categorías</h4><ul class="nav nav-list primary push-bottom"><li><a href=#>General</a></li><li><a href=#>LightPainting</a></li><li><a href=#>Técnica</a></li><li><a href=#>Comunidad</a></li></ul><div class=tabs><ul class="nav nav-tabs"><li class=active><a href=#popularPosts data-toggle=tab><i class="fa fa-star"></i> Popular</a></li></ul><div class=tab-content><div class="tab-pane active" id=popularPosts><ul class=simple-post-list><li ng-repeat="articulo in listaArticulos"><div class=post-image><div class=img-thumbnail><a href=blog-post.html><img src=assets/images/blog/blog-thumb-1.jpg alt=""></a></div></div><div class=post-info><a href=blog-post.html>{{articulo.titulo}}</a><div class=post-meta>{{articulo.fechaCreacion | date:\'d MMM yyyy\'}}</div></div></li></ul></div><!--<div class="tab-pane" id="recentPosts">\r\n											<ul class="simple-post-list">\r\n												<li>\r\n													<div class="post-image">\r\n														<div class="img-thumbnail">\r\n															<a href="blog-post.html">\r\n																<img src="img/blog/blog-thumb-2.jpg" alt="">\r\n															</a>\r\n														</div>\r\n													</div>\r\n													<div class="post-info">\r\n														<a href="blog-post.html">Vitae Nibh Un Odiosters</a>\r\n														<div class="post-meta">\r\n															 Jan 10, 2013\r\n														</div>\r\n													</div>\r\n												</li>\r\n												<li>\r\n													<div class="post-image">\r\n														<div class="img-thumbnail">\r\n															<a href="blog-post.html">\r\n																<img src="img/blog/blog-thumb-3.jpg" alt="">\r\n															</a>\r\n														</div>\r\n													</div>\r\n													<div class="post-info">\r\n														<a href="blog-post.html">Odiosters Nullam Vitae</a>\r\n														<div class="post-meta">\r\n															 Jan 10, 2013\r\n														</div>\r\n													</div>\r\n												</li>\r\n												<li>\r\n													<div class="post-image">\r\n														<div class="img-thumbnail">\r\n															<a href="blog-post.html">\r\n																<img src="img/blog/blog-thumb-1.jpg" alt="">\r\n															</a>\r\n														</div>\r\n													</div>\r\n													<div class="post-info">\r\n														<a href="blog-post.html">Nullam Vitae Nibh Un Odiosters</a>\r\n														<div class="post-meta">\r\n															 Jan 10, 2013\r\n														</div>\r\n													</div>\r\n												</li>\r\n											</ul>\r\n										</div>--></div></div><hr><h4>Colabora</h4><p>¿Te apetece contar tú historia, compartir cómo has encontrado una localización o quieres dar detalle de cómo has realizado una fotografía? Ponte en <a href=/contacto>contacto</a> con nosotros y cuéntanos.</p></aside></div></div></div>'),a.put("app/articulo/single-articulo.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Home</a></li><li class=active>Blog</li></ul></div></div><div class=row><div class=col-md-12><h1>{{singleArticulo.titulo}}</h1></div></div></div></section><div class=container><div class=row><div class=col-md-9><div class="blog-posts single-post"><article class="post post-large blog-single-post"><div class=post-image><div class=owl-carousel data-plugin-options={&quot;items&quot;:1}><div><div class=img-thumbnail><img class=img-responsive src=assets/images/blog/blog-image-1.jpg alt=""></div></div></div></div><div class=post-date><span class=day>{{singleArticulo.fechaCreacion | date: \'d\'}}</span> <span class=month>{{singleArticulo.fechaCreacion | date: \'MMM\'}}</span></div><div class=post-content><h2><a href=blog-post.html>{{singleArticulo.titulo}}</a></h2><div class=post-meta><span><i class="fa fa-user"></i> Por <a href=#>{{singleArticulo.autor}}</a></span><!--<span><i class="fa fa-tag"></i> <a href="#">Duis</a>, <a href="#">News</a> </span>--> <span><i class="fa fa-comments"></i> <a href=#>{{singleArticulo.comentarios.length}} Comentarios</a></span></div><div ng-bind-html=singleArticulo.contenidoHTML></div><div class="post-block post-share"><h3><i class="fa fa-share"></i>Compartir artículo</h3><!-- AddThis Button BEGIN --><div class="addthis_toolbox addthis_default_style"><a class=addthis_button_facebook_like fb:like:layout=button_count></a> <a class=addthis_button_tweet></a> <a class=addthis_button_pinterest_pinit></a> <a class="addthis_counter addthis_pill_style"></a></div><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=xa-50faf75173aadc53"></script><!-- AddThis Button END --></div><div class="post-block post-author clearfix"><h3><i class="fa fa-user"></i>Autor</h3><div class=img-thumbnail><a href=blog-post.html><img src=assets/images/avatar.jpg alt=""></a></div><p><strong class=name><a href=#>John Doe</a></strong></p><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam viverra euismod odio, gravida pellentesque urna varius vitae. Sed dui lorem, adipiscing in adipiscing et, interdum nec metus. Mauris ultricies, justo eu convallis placerat, felis enim ornare nisi, vitae mattis nulla ante id dui.</p></div><div class="post-block post-comments clearfix" ng-hide="singleArticulo.comentarios.length===2"><h3><i class="fa fa-comments"></i>Comentarios ({{singleArticulo.comentarios.length}})</h3><ul class=comments><li ng-repeat="comentario in singleArticulo.comentarios"><div class=comment><div class=img-thumbnail style=border:0px><i class="fa fa-user" style="font-size: 84px;margin-left: 17px;margin-top: 4px; color:{{listaColores[$index%9]}}"></i></div><div class=comment-block><div class=comment-arrow></div><span class=comment-by><strong>{{comentario.nombre}}</strong></span><p>{{comentario.comentario}}</p><span class="date pull-right">{{comentario.fechaComentario | date: \'d MMM yyyy h:mm:ss a\'}}</span></div></div></li></ul></div><div class="post-block post-leave-comment"><h3>Dejar un comentario</h3><div class=row><div class=form-group><div class=col-md-6><label>Tu nombre <span ng-show="!comentarioArticulo.nombre.length>0" style=color:red>*</span></label><input maxlength=100 class=form-control ng-model=comentarioArticulo.nombre></div><div class=col-md-6><label>Tu email <span ng-show="!comentarioArticulo.direccion.length>0" style=color:red>*</span></label><input type=email maxlength=100 class=form-control ng-model=comentarioArticulo.direccion></div></div></div><div class=row><div class=form-group><div class=col-md-12><label>Comentario <span ng-show="!comentarioArticulo.comentario.length>0" style=color:red>*</span></label><textarea maxlength=5000 rows=10 class=form-control ng-model=comentarioArticulo.comentario></textarea></div></div></div><div class=row><div class=col-md-12><input ng-click=enviarComentario() ng-disabled="comentarioArticulo.nombre.length===0 || comentarioArticulo.direccion.length===0 || comentarioArticulo.comentario.length===0" value="Enviar Comentario" class="btn btn-primary btn-lg" data-loading-text=Loading...></div></div></div></div></article></div></div><div class=col-md-3><aside class=sidebar><!--<form>\r\n									<div class="input-group input-group-lg">\r\n										<input class="form-control" placeholder="Search..." name="s" id="s" type="text">\r\n										<span class="input-group-btn">\r\n											<button type="submit" class="btn btn-primary btn-lg"><i class="fa fa-search"></i></button>\r\n										</span>\r\n									</div>\r\n								</form>\r\n\r\n								<hr />--><h4>Categorías</h4><ul class="nav nav-list primary push-bottom"><li><a href=#>General</a></li><li><a href=#>LightPainting</a></li><li><a href=#>Técnica</a></li><li><a href=#>Comunidad</a></li></ul><div class=tabs><ul class="nav nav-tabs"><li class=active><a href=#popularPosts data-toggle=tab><i class="fa fa-star"></i> Popular</a></li></ul><div class=tab-content><div class="tab-pane active" id=popularPosts><ul class=simple-post-list><li><div class=post-image><div class=img-thumbnail><a href=blog-post.html><img src=assets/images/blog/blog-thumb-1.jpg alt=""></a></div></div><div class=post-info><a href=blog-post.html>Nullam Vitae Nibh Un Odiosters</a><div class=post-meta>Jan 10, 2013</div></div></li></ul></div><!--<div class="tab-pane" id="recentPosts">\r\n											<ul class="simple-post-list">\r\n												<li>\r\n													<div class="post-image">\r\n														<div class="img-thumbnail">\r\n															<a href="blog-post.html">\r\n																<img src="img/blog/blog-thumb-2.jpg" alt="">\r\n															</a>\r\n														</div>\r\n													</div>\r\n													<div class="post-info">\r\n														<a href="blog-post.html">Vitae Nibh Un Odiosters</a>\r\n														<div class="post-meta">\r\n															 Jan 10, 2013\r\n														</div>\r\n													</div>\r\n												</li>\r\n												<li>\r\n													<div class="post-image">\r\n														<div class="img-thumbnail">\r\n															<a href="blog-post.html">\r\n																<img src="img/blog/blog-thumb-3.jpg" alt="">\r\n															</a>\r\n														</div>\r\n													</div>\r\n													<div class="post-info">\r\n														<a href="blog-post.html">Odiosters Nullam Vitae</a>\r\n														<div class="post-meta">\r\n															 Jan 10, 2013\r\n														</div>\r\n													</div>\r\n												</li>\r\n												<li>\r\n													<div class="post-image">\r\n														<div class="img-thumbnail">\r\n															<a href="blog-post.html">\r\n																<img src="img/blog/blog-thumb-1.jpg" alt="">\r\n															</a>\r\n														</div>\r\n													</div>\r\n													<div class="post-info">\r\n														<a href="blog-post.html">Nullam Vitae Nibh Un Odiosters</a>\r\n														<div class="post-meta">\r\n															 Jan 10, 2013\r\n														</div>\r\n													</div>\r\n												</li>\r\n											</ul>\r\n										</div>--></div></div><hr><h4>Colabora</h4><p>¿Te apetece contar tú historia, compartir cómo has encontrado una localización o quieres dar detalle de cómo has realizado una fotografía? Ponte en <a href=/contacto>contacto</a> con nosotros y cuéntanos.</p></aside></div></div></div>'),a.put("app/contacto/contacto.html",'<div role=main class=main><section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href="/">Inicio</a></li><li class=active>Contata con Nosotros</li></ul></div></div><div class=row><div class=col-md-12><h1>Contata con Nosotros</h1></div></div></div></section><div class=container><div class=row><div class=col-md-6><h2 class=short><strong>Escríbenos</strong></h2><form id=contactForm><div class=row><div class=form-group><div class=col-md-6><label>Tu nombre <span ng-show="!nombre.length>0" style=color:red>*</span></label><input maxlength=100 class=form-control name=name id=name ng-model=nombre required></div><div class=col-md-6><label>Tu email <span ng-show="!direccion.length>0" style=color:red>*</span></label><input maxlength=100 class=form-control name=direccion id=direccion ng-model=direccion required></div></div></div><div class=row><div class=form-group><div class=col-md-12><label>Asunto</label><input maxlength=100 class=form-control ng-model=asunto name=subject id=subject></div></div></div><div class=row><div class=form-group><div class=col-md-12><label>Mensaje <span ng-show="!mensaje.length>0" style=color:red>*</span></label><textarea maxlength=5000 ng-model=mensaje rows=10 class=form-control name=mensaje id=mensaje required></textarea></div></div></div><div><span style=color:red>*</span> Campos obligatorios</div><div class="alert alert-success" id=contactSuccess ng-show=enviado><strong>Enviado correctamente!</strong> En la mayor brevedad posible nos pondremos en contacto contigo. Gracias!</div><div ng-show=enviando class=pull-right><strong style=font-size:24px><i class="fa fa-spinner fa-pulse"></i></strong></div><div class="alert alert-danger" id=contactError ng-show=mostrarError><strong>Error!</strong> Ha habido un problema en el envio. Por favor intentelo pasado unos minutos.</div><div class=row><div class=col-md-12><input ng-click=enviarCorreo() value=Enviar ng-disabled="nombre.length===0 || direccion.length===0 || mensaje.length===0" class="btn btn-success btn-lg pull-right" data-loading-text=Loading...></div></div></form></div><div class=col-md-6><h4 class=push-top>Estamos en <strong>contacto</strong></h4><p>Cualquier problema, sugerencia o incidencia que encuentres con la web, ponte en contacto con nosotros. Lo resolveremos lo más rápido posible!</p><hr><h4>La <strong>Oficina</strong></h4><ul class=list-unstyled><li><i class="fa fa-map-marker"></i> <strong>Dirección:</strong> 20 Wellwood Street, Belfast, Northen Ireland</li><li><i class="fa fa-phone"></i> <strong>Móvil:</strong> (+44) 7938 653 915</li></ul><hr><h4>Be <strong>Social</strong></h4><i class="fa fa-facebook-square" style="font-size: 90px"></i> <i class="fa fa-twitter-square" style="font-size: 90px"></i> <i class="fa fa-instagram" style="font-size: 90px"></i> <i class="fa fa-google-plus-square" style="font-size: 90px"></i></div></div></div></div><!--<section class="call-to-action featured footer">\n				<div class="container">\n					<div class="row">\n						<div class="center">\n							<h3>Porto is <strong>everything</strong> you need to create an <strong>awesome</strong> website! <a href="http://themeforest.net/item/porto-responsive-html5-template/4106987" target="_blank" class="btn btn-lg btn-primary" data-appear-animation="bounceIn">Buy Now!</a> <span class="arrow hlb hidden-xs hidden-sm hidden-md" data-appear-animation="rotateInUpLeft" style="top: -22px;"></span></h3>\n						</div>\n					</div>\n				</div>\n			</section>-->'),a.put("app/localizaciones/crear-localizaciones.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Mapa</li></ul></div></div><div class=row><div class=col-md-12><h1>Sube tu fotografía</h1></div></div></div></section><div class=container><div class=row><div class=col-md-7><div class=form-group><label>Selecciona la localización exacta</label><span ng-show="!marker.coords.latitude>0" style=color:red>*</span><small>(Haz click en el mapa para situar el punto sobre el mapa)</small><div class=row><ui-gmap-google-map center=map.center zoom=map.zoom events=map.events><ui-gmap-marker coords=marker.coords options=marker.options events=marker.events idkey=marker.id></ui-gmap-marker></ui-gmap-google-map></div><span style=color:red>*</span> Campos obligatorios</div></div><div class=col-md-5><div class=row><div class=form-group ng-class="{ \'has-success\': form.titulo.$valid && submitted,\r\n					\'has-error\': form.titulo.$invalid && submitted }"><label>Título <span ng-show="!localizacion.titulo.length>0" style=color:red>*</span></label><input name=titulo class=form-control ng-model=localizacion.titulo required mongoose-error><p class=help-block ng-show="form.titulo.$error.required && submitted">Olvidaste poner el título</p><p class=help-block ng-show=form.titulo.$error.mongoose>{{ errors.titulo }}</p></div></div><div class=row><div class=form-group><label>Fecha de la toma</label><span ng-show="!dt.length>0" style=color:red>*</span><div class=row><div class=col-md-6><p class=input-group><input class=form-control datepicker-popup=dd/MM/yyyy ng-model=dt is-open=opened datepicker-options=dateOptions ng-required=true close-text="Close"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click=open($event)><i class="glyphicon glyphicon-calendar"></i></button></span></p></div></div></div></div><div class=row><div class=col-md-7 style="margin-left: -15px"><div class=form-group><label>Subir fotografía</label><span ng-show=!finalizado style=color:red>*</span> <input type=file name=file class=cloudinary_fileupload multiple ng-model=$parent.files><div class=file ng-repeat="file in files"><!--<h3><i ng-class="finalizado ? \'fa fa-check\' : \'fa fa-spinner fa-pulse\'"></i></h3>--><div class=status ng-show=!finalizado>{{file.status}}</div><div class=progress-bar ng-show=!finalizado><div class=progress style="width: {{file.progress}}%" ng-init="progress=0"></div></div><h4 class=success ng-show=finalizado>Carga completada</h4></div></div></div><div class=col-md-5><div class=file ng-repeat="file in files"><cl-image public-id={{file.result.public_id}} class="thumbnail inline" crop=fit height=150 width=150 format="jpg"></div></div></div><div class=row><div class=form-group><label>Etiquetas</label><small>Utiliza palabras clave para que tu localización sea más fácil de encontrar.<tags-input ng-model=tags placeholder="Ejemplo: canon, mar, startrail, alicante"></tags-input></small></div></div><div class=row><div class=form-group><label>Acceso</label><span ng-show="!localizacion.acceso.length>0" style=color:red>*</span><small>(Se puede llegar con coche? solo a pie? el terreno es peligroso?)</small> <i data-toggle=tooltip data-placement=top title="Explica cómo está el acceso: si se puede llegar con coche, o hay que ir andando tantos minutos, si hay cerca zonas peligrosas, etc, etc..." class="fa fa-info-circle"></i><textarea class=form-control ng-model=localizacion.acceso rows=3 id=acceso ng-model=localizacion.acceso></textarea></div></div><div class=row><div class=form-group><p style=margin:0px><label>Peligrosidad de la zona</label><span ng-show="!rate>0" style=color:red>*</span></p><rating ng-model=rate max=max readonly on-hover=hoveringOver(value) on-leave="overStar = null" style="font-size: 20px"></rating><span class=label ng-class="{\'label-warning\': percent<30, \'label-info\': percent>=30 && percent<70, \'label-success\': percent>=70}" ng-show="overStar && !isReadonly">{{percent}}%</span></div></div><div class=row><div class=form-group><p style=margin:0px><label>Contaminación lumínica</label><span ng-show="!rateCL>0" style=color:red>*</span></p><rating ng-model=rateCL max=max readonly on-hover=hoveringOverCL(value) on-leave="overStarCL = null" style="font-size: 20px"></rating><span class=label ng-class="{\'label-warning\': percent<30, \'label-info\': percent>=30 && percent<70, \'label-success\': percent>=70}" ng-show="overStarCL && !isReadonly">{{percentCL}}%</span></div></div><div class=row><div class=form-group><label>Algo más que destacar</label><textarea class=form-control ng-model=localizacion.notasAdicionales rows=3 id=acceso ng-model=localizacion.notasAdicionales></textarea></div></div><alert type=danger close=closeAlert($index) ng-show="mensajeError.length>0">{{ mensajeError }}</alert><button class="btn btn-lg btn-success pull-right" type=button ng-click=crearLocalizacion() ng-disabled=localizacionCreada>Guardar</button></div></div></div>'),a.put("app/localizaciones/editar-localizaciones.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Mapa</li></ul></div></div><div class=row><div class=col-md-12><h1>Edita tu fotografía</h1></div></div></div></section><div class=container><div class=row><div class=col-md-7><div class=form-group><label>Selecciona la localización exacta</label><span ng-show="!marker.coords.latitude>0" style=color:red>*</span><small>(Haz click en el mapa para situar el punto sobre el mapa)</small><div class=row><ui-gmap-google-map center=map.center zoom=map.zoom events=map.events><ui-gmap-marker coords=marker.coords options=marker.options events=marker.events idkey=marker.id></ui-gmap-marker></ui-gmap-google-map></div><span style=color:red>*</span> Campos obligatorios</div></div><div class=col-md-5><div class=row><cl-image public-id={{localizacion.cloudinaryId}} class="thumbnail inline" crop=fit width=340 format=jpg></cl-image></div><div class=row><div class=form-group ng-class="{ \'has-success\': form.titulo.$valid && submitted,\r\n					\'has-error\': form.titulo.$invalid && submitted }"><label>Título <span ng-show="!localizacion.titulo.length>0" style=color:red>*</span></label><input name=titulo class=form-control ng-model=localizacion.titulo required mongoose-error><p class=help-block ng-show="form.titulo.$error.required && submitted">Olvidaste poner el título</p><p class=help-block ng-show=form.titulo.$error.mongoose>{{ errors.titulo }}</p></div></div><div class=row><div class=form-group><label>Fecha de la toma</label><span ng-show="!dt.length>0" style=color:red>*</span><div class=row><div class=col-md-6><p class=input-group><input class=form-control datepicker-popup=dd/MM/yyyy ng-model=dt is-open=opened datepicker-options=dateOptions ng-required=true close-text="Close"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click=open($event)><i class="glyphicon glyphicon-calendar"></i></button></span></p></div></div></div></div><div class=row><div class=form-group><label>Etiquetas</label><tags-input ng-model=tags placeholder="Ejemplo: luna, urbana"></tags-input></div></div><div class=row><div class=form-group><label>Acceso</label><span ng-show="!localizacion.acceso.length>0" style=color:red>*</span><small>(Se puede llegar con coche? solo a pie? el terreno es peligroso?)</small> <i data-toggle=tooltip data-placement=top title="Explica cómo está el acceso: si se puede llegar con coche, o hay que ir andando tantos minutos, si hay cerca zonas peligrosas, etc, etc..." class="fa fa-info-circle"></i><textarea class=form-control ng-model=localizacion.acceso rows=3 id=acceso ng-model=localizacion.acceso></textarea></div></div><div class=row><div class=form-group><p style=margin:0px><label>Peligrosidad de la zona</label><span ng-show="!rate>0" style=color:red>*</span></p><rating ng-model=rate max=max readonly on-hover=hoveringOver(value) on-leave="overStar = null" style="font-size: 20px"></rating><span class=label ng-class="{\'label-warning\': percent<30, \'label-info\': percent>=30 && percent<70, \'label-success\': percent>=70}" ng-show="overStar && !isReadonly">{{percent}}%</span></div></div><div class=row><div class=form-group><p style=margin:0px><label>Contaminación lumínica</label><span ng-show="!rateCL>0" style=color:red>*</span></p><rating ng-model=rateCL max=max readonly on-hover=hoveringOverCL(value) on-leave="overStarCL = null" style="font-size: 20px"></rating><span class=label ng-class="{\'label-warning\': percent<30, \'label-info\': percent>=30 && percent<70, \'label-success\': percent>=70}" ng-show="overStarCL && !isReadonly">{{percentCL}}%</span></div></div><div class=row><div class=form-group><label>Algo más que destacar</label><textarea class=form-control ng-model=localizacion.notasAdicionales rows=3 id=acceso ng-model=localizacion.notasAdicionales></textarea></div></div><alert type=danger close=closeAlert($index) ng-show="mensajeError.length>0">{{ mensajeError }}</alert><h3 ng-show=localizacionEditada>Fotografía guardada correctamente!</h3><h3 ng-show=localizacionBorrada>Fotografía borrada correctamente!</h3><button class="btn btn-lg btn-success pull-right" style=margin-left:30px type=button ng-click=editarLocalizacion()>Guardar</button><!--<button class="btn btn-lg btn-danger pull-right" type="button" ng-click="editarLocalizacion()" ng-disabled="localizacionBorrada">Borrar</button>--></div></div></div>'),
a.put("app/localizaciones/localizacion-creada.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Home</a></li><li class=active>Localización Creada</li></ul></div></div><div class=row><div class=col-md-12><h1>Localización Creada Correctamente!</h1></div></div></div></section><div class=container><div class="row featured-boxes"><div class="col-md-3 col-sm-6"><a href=/localizaciones><div class="featured-box featured-box-primary"><div class=box-content><i class="icon-featured fa fa-globe"></i><h4>Mapa</h4><p>Explora tu nueva localización junto al resto del mapa.</p></div></div></a></div><div class="col-md-3 col-sm-6"><a href=/crear-localizaciones><div class="featured-box featured-box-secundary"><div class=box-content><i class="icon-featured fa fa-cloud-upload"></i><h4>Crea localización</h4><p>Sube otra localización y comparte tus conocimientos :)</p></div></div></a></div><div class="col-md-3 col-sm-6"><a href=/tus-localizaciones/{{getCurrentUser.username}}><div class="featured-box featured-box-tertiary"><div class=box-content><i class="icon-featured fa fa-trophy"></i><h4>{{listaLocalizaciones.length}} localizaciones</h4><p>Enhorabuena! Ya tienes creadas {{listaLocalizaciones.length}} localizaciones.</p></div></div></a></div><div class="col-md-3 col-sm-6"><a href=/localizaciones/{{parametro}}/{{titulo}}><div class="featured-box featured-box-quartenary"><div class=box-content><i class="icon-featured fa fa-cogs"></i><h4>Editar</h4><p>¿Se te ha olvidado añadir alguna información? Edítala</p></div></div></a></div></div></div>'),a.put("app/localizaciones/localizaciones.html",'<style>.angular-google-map-container {  width:100%; height: 400px; }</style><section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Mapa</li></ul></div></div><div class=row><div class=col-md-12><h1>Localización de fotografias nocturnas</h1></div></div></div></section><div class=container><div class=row><div class=col-md-8>Haz click en un punto para ver los detalles de la localización<ui-gmap-google-map center=map.center zoom=map.zoom draggable=true options=options bounds=map.bounds><ui-gmap-markers models=misLocalizaciones coords="\'self\'" icon="\'icon\'" click="\'misLocalizaciones.events\'" docluster=true></ui-gmap-markers></ui-gmap-google-map></div><div class=col-md-4><div ng-show="fotoActual.idClodinary.length>0"><h3 style="margin-bottom: 8px">{{fotoActual.titulo}}</h3><cl-image public-id={{fotoActual.idClodinary}} class="thumbnail inline" crop=fit width=380 format=jpg></cl-image><p><strong>Autor:</strong> <a href=/tus-localizaciones/{{fotoActual.autor}}>{{fotoActual.autor}}</a></p><p><strong>Fecha:</strong> {{fotoActual.fechaToma | date:\'dd/MM/yyyy\'}}</p><p><strong>Etiquetas:</strong><span ng-repeat="etiqueta in fotoActual.tags">{{etiqueta}},</span></p><p><strong>Acceso:</strong> {{fotoActual.acceso}}</p><p><strong>Peligrosidad de la zona:</strong> {{fotoActual.peligrosidad}}/10</p><p><strong>Contaminacion luminica:</strong> {{fotoActual.contaminacion}}/10</p><p ng-show="fotoActual.notas.length>0"><strong>Notas adicionales:</strong> {{fotoActual.notas}}</p><a href="/localizaciones/{{fotoActual._id}}/{{fotoActual.titulo | seo}}">Ver detalle</a></div></div></div><!--<div class="row">\n		<p ng-repeat="localizacion in listaLocalizaciones">{{localizacion.titulo}}</p>\n	</div>--></div>'),a.put("app/localizaciones/myModalContent.html",""),a.put("app/localizaciones/tus-localizaciones.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Home</a></li><li class=active>Portfolio</li></ul></div></div><div class=row><div class=col-md-12><h1>Portfolio</h1></div></div></div></section><!--<div class="sort-source-wrapper">\r\n					<div class="container">\r\n						<ul class="nav nav-pills sort-source secundary pull-right" data-sort-id="portfolio" data-option-key="filter">\r\n							<li data-option-value="*" class="active"><a href="#">Show All</a></li>\r\n							<li data-option-value=".websites"><a href="#">Websites</a></li>\r\n							<li data-option-value=".logos"><a href="#">Logos</a></li>\r\n							<li data-option-value=".brands"><a href="#">Brands</a></li>\r\n						</ul>\r\n					</div>\r\n				</div>--><div class=container><div class=row><ul class="portfolio-list sort-destination" data-sort-id=portfolio data-plugin-options="{&quot;delegate&quot;: &quot;a&quot;, &quot;type&quot;: &quot;image&quot;, &quot;gallery&quot;: {&quot;enabled&quot;: true}}"><li ng-repeat="loca in listaLocalizaciones " class="col-md-3 col-sm-6 col-xs-12 isotope-item websites"><div class="portfolio-item img-thumbnail"><a href="/localizaciones/{{loca._id}}/{{loca.titulo | seo}}" class=thumb-info><img alt={{loca.titulo}} class=img-responsive src=http://res.cloudinary.com/djhqderty/image/upload/c_fill,h_447,w_447/{{loca.cloudinaryId}}> <span class=thumb-info-title><span class=thumb-info-inner>{{loca.titulo}}</span> <span class=thumb-info-type>Ver</span></span> <span class=thumb-info-action><span title=Universal class=thumb-info-action-icon><i class="fa fa-link"></i></span></span></a></div></li></ul></div></div>'),a.put("app/localizaciones/vista-localizaciones.html",'<style>.angular-google-map-container {  width:340px; height: 320px;margin-left: 6px; }</style><section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Home</a></li><li class=active>Localizaciones</li></ul></div></div><div class=row><div class=col-md-12><h1>{{localizacion.titulo}}</h1></div></div></div></section><div class=container><!--<div class="portfolio-title">\r\n						<div class="row">\r\n							<div class="portfolio-nav-all col-md-1">\r\n								<a href="portfolio-single-project.html" data-tooltip data-original-title="Back to list"><i class="fa fa-th"></i></a>\r\n							</div>\r\n							<div class="col-md-10 center">\r\n								<h2 class="shorter">Lorem Ipsum Dolor</h2>\r\n							</div>\r\n							<div class="portfolio-nav col-md-1">\r\n								<a href="portfolio-single-project.html" class="portfolio-nav-prev" data-tooltip data-original-title="Previous"><i class="fa fa-chevron-left"></i></a>\r\n								<a href="portfolio-single-project.html" class="portfolio-nav-next" data-tooltip data-original-title="Next"><i class="fa fa-chevron-right"></i></a>\r\n							</div>\r\n						</div>\r\n					</div>\r\n\r\n					<hr class="tall">--><div class=row><div class=col-md-4><cl-image public-id={{localizacion.cloudinaryId}} class="thumbnail inline" crop=fit width=340 format=jpg></cl-image><ui-gmap-google-map center=map.center zoom=map.zoom><ui-gmap-marker coords=marker.coords options=marker.options idkey=marker.id></ui-gmap-marker></ui-gmap-google-map></div><div class=col-md-8><div class=portfolio-info><div class=row><div class="col-md-12 center"><ul><li><a href=# data-tooltip data-original-title=Like><i class="fa fa-heart"></i>14</a></li><li><i class="fa fa-calendar"></i> {{localizacion.fechaToma | date:\'dd MMMM yyyy\'}}</li><li><i class="fa fa-globe"></i> <strong>Latitud:</strong> {{localizacion.latitud}} <strong>Longuitud:</strong> {{localizacion.longitud}}</li></ul></div></div></div><h4>Acceso</h4><p class=taller>{{localizacion.acceso}}</p><a href=http://res.cloudinary.com/djhqderty/image/upload/v1429114149/{{localizacion.cloudinaryId}}.jpg data-lightbox=image-1 class="btn btn-primary btn-icon"><i class="fa fa-external-link"></i>Ver en grande</a> <a href="/editar-localizaciones/{{localizacion._id}}/" class="btn btn-warning btn-icon" ng-if=mostrarEditar><i class="fa fa-pencil"></i>Editar localizacion</a> <a href=# class="btn btn-danger btn-icon" ng-click=delete(localizacion) ng-if=mostrarEditar><i class="fa fa-trash-o"></i>Eliminar localizacion</a><ul class=portfolio-details><li><p><strong>Tags:</strong></p><ul class="list list-skills icons list-unstyled list-inline"><li ng-repeat="etiqueta in localizacion.tags"><i class="fa fa-check-circle"></i> {{etiqueta}}</li></ul></li><li><p><strong>Coordenadas:</strong></p><p>Latitud: {{localizacion.latitud}}</p><p>Longuitud: {{localizacion.longitud}}</p></li><li><p><strong>Peligrosidad de la zona:</strong></p><p>{{localizacion.peligrosidad}}/10</p></li><li><p><strong>Contaminacion Luminica:</strong></p><p>{{localizacion.contaminacionLuminica}}/10</p></li><li><p><strong>Autor:</strong></p><p><a href=/tus-localizaciones/{{localizacion.autor}}>{{localizacion.autor}}</a></p></li></ul></div></div><!--<hr class="tall" />\r\n\r\n					<div class="row">\r\n\r\n						<div class="col-md-12">\r\n							<h3>Related <strong>Work</strong></h3>\r\n						</div>\r\n\r\n						<ul class="portfolio-list">\r\n							<li class="col-md-3 col-xs-6">\r\n								<div class="portfolio-item thumbnail">\r\n									<a href="portfolio-single-project.html" class="thumb-info">\r\n										<img alt="" class="img-responsive" src="img/projects/project.jpg">\r\n										<span class="thumb-info-title">\r\n											<span class="thumb-info-inner">SEO</span>\r\n											<span class="thumb-info-type">Website</span>\r\n										</span>\r\n										<span class="thumb-info-action">\r\n											<span title="Universal" class="thumb-info-action-icon"><i class="fa fa-link"></i></span>\r\n										</span>\r\n									</a>\r\n								</div>\r\n							</li>\r\n							<li class="col-md-3 col-xs-6">\r\n								<div class="portfolio-item thumbnail">\r\n									<a href="portfolio-single-project.html" class="thumb-info">\r\n										<img alt="" class="img-responsive" src="img/projects/project-1.jpg">\r\n										<span class="thumb-info-title">\r\n											<span class="thumb-info-inner">Okler</span>\r\n											<span class="thumb-info-type">Brand</span>\r\n										</span>\r\n										<span class="thumb-info-action">\r\n											<span title="Universal" class="thumb-info-action-icon"><i class="fa fa-link"></i></span>\r\n										</span>\r\n									</a>\r\n								</div>\r\n							</li>\r\n							<li class="col-md-3 col-xs-6">\r\n								<div class="portfolio-item thumbnail">\r\n									<a href="portfolio-single-project.html" class="thumb-info">\r\n										<img alt="" class="img-responsive" src="img/projects/project-2.jpg">\r\n										<span class="thumb-info-title">\r\n											<span class="thumb-info-inner">The Fly</span>\r\n											<span class="thumb-info-type">Logo</span>\r\n										</span>\r\n										<span class="thumb-info-action">\r\n											<span title="Universal" class="thumb-info-action-icon"><i class="fa fa-link"></i></span>\r\n										</span>\r\n									</a>\r\n								</div>\r\n							</li>\r\n							<li class="col-md-3 col-xs-6">\r\n								<div class="portfolio-item thumbnail">\r\n									<a href="portfolio-single-project.html" class="thumb-info">\r\n										<img alt="" class="img-responsive" src="img/projects/project-3.jpg">\r\n										<span class="thumb-info-title">\r\n											<span class="thumb-info-inner">The Code</span>\r\n											<span class="thumb-info-type">Website</span>\r\n										</span>\r\n										<span class="thumb-info-action">\r\n											<span title="Universal" class="thumb-info-action-icon"><i class="fa fa-link"></i></span>\r\n										</span>\r\n									</a>\r\n								</div>\r\n							</li>\r\n						</ul>\r\n\r\n					</div>--></div>'),a.put("app/main/main.html",'<div role=main class=main><div class=home-intro><div class=container><div class=row><div class=col-md-8><p>Localizador de fotografías <em>Nocturnas</em> <span>Explora todas las fotografías que puedes hacer...</span></p></div><div class=col-md-4><div class=get-started ng-show=!isLoggedIn()><a href=/signup class="btn btn-lg btn-primary">Crea tu cuenta ahora!</a><div class=learn-more>o <a href=/login>inicia sesión</a></div></div></div></div></div></div><div class=container><div class="row center"><div class=col-md-12><h2 class="short word-rotator-title">Descrubre las mejores fotografías <strong>nocturnas</strong> cerca de ti</h2><p class=lead>Conoce de cada localización cómo acceder, peligrosidad de la zona y la contaminación lumínica.<br>Descúbrelas!</p></div></div></div><div class=container><div class="row center"><div class=col-md-12><a href=/localizaciones><img src=assets/images/picture-home.jpg class=img-responsive alt="malin head" style="margin: 45px 0px -35px"></a></div></div></div></div>'),a.put("app/mejora/mejora.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Mejora la Web</li></ul></div></div><div class=row><div class=col-md-12><h1>Mejora la Web</h1></div></div></div></section><div class=container><div class=row><div class=col-md-12><div class="alert alert-info alert-admin"><div class=row><div class=col-md-8><h4>Tu opinión cuenta</h4><p>Cualquier sugerencia que se te ocurra, un problema que encuentres, alguna funcionalidad nueva que te gustaría que apareciera en la web o cualquier comentario para mejorar la web es bienvenido. Totalmente anónimo y gratuito jeje</p></div><div class="col-md-4 visible-md visible-lg"><img class=pull-right src=assets/images/mejora-la-web.png style="width: 372px; margin:0px"></div></div></div></div></div></div><div class=container><section class=panel><header class=panel-heading><button class="btn btn-success" ng-click="isCollapsed=!isCollapsed">Añade nueva mejora</button><div collapse=isCollapsed><div class=form-group style=margin-top:20px><label class="col-md-2 control-label">Describe la mejora</label><div class=col-md-10><div class="input-group mb-md"><input class=form-control ng-model=descripcionMejora> <span class=input-group-btn><button class="btn btn-success" type=button ng-click=crearMejora()>Guardar</button></span></div></div></div></div><alert type=info close="mejoraCreada=false" ng-show=mejoraCreada style=margin-top:20px>Tu mejora ha sido guardada. En cuanto se pueda nos pondremos en manos a la obra con ella. Gracias!</alert></header><div class=panel-body><table class="table table-no-more table-bordered table-striped mb-none"><thead><tr><th>Fecha</th><th>Mejora</th><th>Estado</th><th>Votos</th><th></th></tr></thead><tbody><tr ng-repeat="mejora in listaMejoras"><td data-title=Fecha>{{mejora.fecha | date:\'dd-MM-yyyy\'}}</td><td data-title=Mejroa>{{mejora.descripcion}}</td><td data-title=Mejroa>{{estadosMejoras[mejora.estado]}}</td><td data-title=Votos>{{mejora.votos}}</td><td><a href="" ng-click="actualizarVoto(mejora._id, true)"><i class="fa fa-thumbs-o-up"></i></a> <a href="" ng-click="actualizarVoto(mejora._id, false)"><i class="fa fa-thumbs-o-down"></i></a> <a href="" ng-click=borrarMejora(mejora._id) ng-show=isAdmin()><i class="fa fa-trash-o"></i></a></td></tr></tbody></table></div></section></div>'),a.put("components/footer/footer.html",'<footer id=footer><div class=container><div class=row><div class=footer-ribbon><span>Get in Touch</span></div><div class=col-md-3><div class=newsletter><h4>Newsletter</h4><p>Keep up on our always evolving product features and technology. Enter your e-mail and subscribe to our newsletter.</p><div class="alert alert-success hidden" id=newsletterSuccess><strong>Success!</strong> You\'ve been added to our email list.</div><div class="alert alert-danger hidden" id=newsletterError></div><form id=newsletterForm><div class=input-group><input class=form-control placeholder="Email Address" name=newsletterEmail id=newsletterEmail> <span class=input-group-btn><button class="btn btn-default" type=submit>Go!</button></span></div></form></div></div><div class=col-md-3><h4>Latest Tweets</h4><div id=tweet class=twitter data-plugin-tweets data-plugin-options="{&quot;username&quot;: &quot;&quot;, &quot;count&quot;: 2}"><p>Please wait...</p></div></div><div class=col-md-4><div class=contact-details><h4>Contact Us</h4><ul class=contact><li><p><i class="fa fa-map-marker"></i> <strong>Address:</strong> 1234 Street Name, City Name, United States</p></li><li><p><i class="fa fa-phone"></i> <strong>Phone:</strong> (123) 456-7890</p></li><li><p><i class="fa fa-envelope"></i> <strong>Email:</strong> <a href=mailto:mail@example.com>mail@example.com</a></p></li></ul></div></div><div class=col-md-2><h4>Follow Us</h4><div class=social-icons><ul class=social-icons><li class=facebook><a href="http://www.facebook.com/" target=_blank data-placement=bottom data-tooltip title=Facebook>Facebook</a></li><li class=twitter><a href="http://www.twitter.com/" target=_blank data-placement=bottom data-tooltip title=Twitter>Twitter</a></li><li class=linkedin><a href="http://www.linkedin.com/" target=_blank data-placement=bottom data-tooltip title=Linkedin>Linkedin</a></li></ul></div></div></div></div><div class=footer-copyright><div class=container><div class=row><div class=col-md-1><a href=index.html class=logo><img alt="Porto Website Template" class=img-responsive src=assets/images/logo-footer.png></a></div><div class=col-md-7><p>© Copyright 2015. All Rights Reserved.</p></div><div class=col-md-4><nav id=sub-menu><ul><li><a href=page-faq.html>FAQ\'s</a></li><li><a href=sitemap.html>Sitemap</a></li><li><a href=contact-us.html>Contact</a></li></ul></nav></div></div></div></div></footer>'),a.put("components/modal/modal.html",'<div class=modal-header><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title style=color:#333></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),a.put("components/navbar/navbar.html",'<header id=header ng-controller=NavbarCtrl autoscroll=true><div class=container><div class=logo><!--<a href="index.html">\n              <img alt="Porto" width="111" height="54" data-sticky-width="82" data-sticky-height="40" src="img/logo.png">\n            </a>--><!-- <h1><a href="/">Subexpuesta.com</a></h1>--><h1><a href="/"><img src=/assets/images/subexpuesta-logo.png alt=Subexpuesta.com width="304px"></a></h1></div><!--<div class="search">\n            <form id="searchForm" action="page-search-results.html" method="get">\n              <div class="input-group">\n                <input type="text" class="form-control search" name="q" id="q" placeholder="Search..." required>\n                <span class="input-group-btn">\n                  <button class="btn btn-default" type="submit"><i class="fa fa-search"></i></button>\n                </span>\n              </div>\n            </form>\n          </div>--><ul class=social-icons><li class=facebook><a href="http://www.facebook.com/" target=_blank title=Facebook>Facebook</a></li><li class=twitter><a href="http://www.twitter.com/" target=_blank title=Twitter>Twitter</a></li></ul><nav><ul class="nav nav-pills nav-top"><li><a href=about-us.html><i class="fa fa-angle-right"></i>Sobre Nosotros</a></li><li><a href=/mejora><i class="fa fa-angle-right"></i>Mejora la Web</a></li></ul></nav><button class="btn btn-responsive-nav btn-inverse" data-toggle=collapse data-target=.nav-main-collapse><i class="fa fa-bars"></i></button></div><div class="navbar-collapse nav-main-collapse collapse"><div class=container><nav class="nav-main mega-menu" style=width:700px><ul class="nav nav-pills nav-main" id=mainMenu><li><a class=dropdown-toggle href="/">Inicio</a></li><li><a href=/localizaciones>Mapa</a></li><li><a href=shortcodes.html>Ranking</a></li><li><a href=shortcodes.html>Recomendaciones</a></li><li><a href=/blog>Blog</a></li><li><a href=/contacto>Contacto</a></li><li><a ng-show=!isLoggedIn() href=/login style=color:#444><i class="fa fa-user"></i> Iniciar Sesión</a></li><li ng-show=isLoggedIn() class="dropdown mega-menu-item mega-menu-signin signin logged" id=headerAccount><a class=dropdown-toggle href=page-login.html><i class="fa fa-user"></i> {{getCurrentUser().username}} <i class="fa fa-angle-down"></i></a><ul class=dropdown-menu><li><div class=mega-menu-content><div class=row><div class=col-md-7><div class=user-avatar><div class=img-thumbnail><img ng-src="{{getCurrentUser().avatar}}"></div><p><strong>{{getCurrentUser().username}}</strong><i class="fa fa-camera"></i> <a href=/tus-localizaciones/{{getCurrentUser().username}}>Tus localizaciones</a></p></div></div><div class=col-md-5><ul class=list-unstyled><li><i class="fa fa-cloud-upload"></i> <a href=/crear-localizaciones>Crear Localización</a></li><li><i class="fa fa-cog"></i> <a href=/settings>Mi Cuenta</a></li><li><i class="fa fa-sign-out"></i> <a href="" ng-click=logout()>Cerrar Sesión</a></li></ul></div></div></div></li></ul></li></ul></nav></div></div></header>')}]);