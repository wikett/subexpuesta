"use strict";angular.module("subexpuestaV2App",["ngCookies","ngResource","ngSanitize","ui.router","ui.bootstrap","ngImgCrop","cloudinary","angularFileUpload","uiGmapgoogle-maps","ngTagsInput","ui-rangeSlider"]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","uiGmapGoogleMapApiProvider",function(a,b,c,d,e){b.otherwise("/"),c.html5Mode(!0),d.interceptors.push("authInterceptor"),d.defaults.headers.common["Access-Control-Allow-Headers"]="*",delete d.defaults.headers.common["X-Requested-With"],$.cloudinary.config().cloud_name="djhqderty",$.cloudinary.config().upload_preset="jtzexgjp",e.configure({v:"3.17",libraries:"weather,places,geometry,visualization"})}]).factory("authInterceptor",["$rootScope","$q","$cookieStore","$location",function(a,b,c,d){return{request:function(a){return a.headers=a.headers||{},c.get("token")&&-1===a.url.indexOf("api.cloudinary.com")&&(a.headers.Authorization="Bearer "+c.get("token")),a},responseError:function(a){return 401===a.status?(d.path("/login"),c.remove("token"),b.reject(a)):b.reject(a)}}}]).run(["$rootScope","$location","Auth","$window",function(a,b,c,d){a.$on("$stateChangeStart",function(a,e){d.scrollTo(0,0),c.isLoggedInAsync(function(a){e.authenticate&&!a&&b.path("/login")})}),a.title="",a.metaDescription="",a.titleFB="",a.descriptionFB="",a.imageFB="http://www.subexpuesta.com/assets/images/subexpuesta-logo.png"}]),angular.module("subexpuestaV2App").config(["$stateProvider",function(a){a.state("login",{url:"/login",templateUrl:"app/account/login/login.html",controller:"LoginCtrl"}).state("signup",{url:"/signup",templateUrl:"app/account/signup/signup.html",controller:"SignupCtrl"}).state("olvide",{url:"/olvide-password",templateUrl:"app/account/reset/forgotten.html",controller:"ForgottenCtrl"}).state("reset",{url:"/reset/:token",templateUrl:"app/account/reset/reset.html",controller:"ResetCtrl"}).state("adminlistadousuarios",{url:"/admin/usuarios",templateUrl:"app/account/admin/lista-usuarios.html",controller:"AdminListaUsuariosCtrl",authenticate:!0}).state("settings",{url:"/settings",templateUrl:"app/account/settings/settings.html",controller:"SettingsCtrl",authenticate:!0})}]),angular.module("subexpuestaV2App").controller("AdminListaUsuariosCtrl",["$scope","$rootScope","$log","User","Auth","$location","Usuario","$http",function(a,b,c,d,e,f,g,h){function i(){d.query({},function(b){a.listaUsuarios=b})}function j(a){h.get("/api/users/actualizarvip/"+a).success(function(a){c.debug("Usuario modificado correctamente")})}function k(a){h.get("/api/users/actualizarnovip/"+a).success(function(a){c.debug("Usuario modificado correctamente")})}e.isAdmin()||f.path("/"),a.listaUsuarios=[],i(),a.usuario="",a.actualizarVIP=function(a,b){c.debug("actualizarVIP: "+a),a?j(b):k(b)},a.establecerGanador=function(a){c.debug("Call ganador"),h.get("/api/users/actualizarconcurso/"+a).success(function(a){c.debug("Ganador establecido correctamente")})}}]),angular.module("subexpuestaV2App").controller("LoginCtrl",["$scope","Auth","$location","$window",function(a,b,c,d){a.user={},a.errors={},a.login=function(d){a.submitted=!0,d.$valid&&b.login({email:a.user.email,password:a.user.password}).then(function(){console.log("Logeado correctamente"),c.path("/")})["catch"](function(b){a.errors.other=b.message})},a.loginOauth=function(a){d.location.href="/auth/"+a}}]),angular.module("subexpuestaV2App").controller("ForgottenCtrl",["$scope","$log","$http",function(a,b,c){a.error=!1,a.enviando=!1,a.enviado=!1,a.correo="",a.caca="",a.olivdePassword=function(){a.submitted=!0,_.isUndefined(a.correo)||(a.enviando=!0,c({url:"http://www.subexpuesta.com/api/users/forgotten",method:"POST",data:{email:a.correo},headers:"application/json"}).then(function(b){a.enviado=!0,a.enviando=!1},function(b){a.error=!0}))},a.volver=function(){a.enviando=!1,a.error=!1,a.enviado=!1,a.correo=""}}]),angular.module("subexpuestaV2App").controller("ResetCtrl",["$scope","$log","$http","$stateParams",function(a,b,c,d){a.error=!1,a.errorPassword=!1,a.enviado=!1,a.password="",a.passwordAgain="",a.resetear=function(){b.debug("Token: "+d.token),a.password!==a.passwordAgain?a.errorPassword=!0:(a.errorPassword=!1,c({url:"http://www.subexpuesta.com/api/users/reset/"+d.token,method:"POST",data:{password:a.password},headers:"application/json"}).then(function(b){a.enviado=!0,a.enviando=!1},function(b){a.error=!0}))},a.volver=function(){a.enviando=!1,a.error=!1,a.enviado=!1,a.correo=""}}]),angular.module("subexpuestaV2App").controller("SettingsCtrl",["$scope","Auth","$log","uiGmapGoogleMapApi",function(a,b,c,d){function e(c,d){a.submitted=!0,""===a.user.newPassword&&a.user.newPassword!==a.renewPassword?a.errors.passwordIguales="Repita la nueva contraseña correctamente":c.$valid&&b.changePassword(a.passwordActual,a.user.newPassword,a.user.name,a.user.location,a.user.web,a.myCroppedImage,a.user.participarConcursos,a.user.newsletter,a.user.urlFacebook,a.user.urlTwitter,a.user.coordenadasAvisoLatitud,a.user.coordenadasAvisoLongitud,a.sliderValue,a.user.frecuenciaAviso).then(function(){a.message=a.exito[d]})["catch"](function(){a.errors.other="Contraseña incorrecta",a.message=""})}a.errors={},a.passwordActual="",a.renewPassword="",a.user=b.getCurrentUser(),a.myImage="",a.myCroppedImage="",a.isCollapsed=!0,a.cancelarAvisos=!1,a.radioMetros=0,a.items=[{id:0,name:"-Elija cuando quiere recibir los avisos"},{id:1,name:"Una vez al dia"},{id:2,name:"Una vez a la semana"},{id:3,name:"Una vez al mes"}],a.exito=["Datos actualizados correctamente","Avisos creados correctamente","Tu contraseña ha sido cambiada correctamente"],a.numeroGuardar="-1",a.map={center:{latitude:40.399995,longitude:-4.087896},zoom:5,events:{click:function(b,c,d){a.$apply(function(){a.marker.coords.latitude=d[0].latLng.lat(),a.marker.coords.longitude=d[0].latLng.lng(),a.user.coordenadasAvisoLatitud=a.marker.coords.latitude,a.user.coordenadasAvisoLongitud=a.marker.coords.longitude,a.map.circle.center.latitude=a.marker.coords.latitude,a.map.circle.center.longitude=a.marker.coords.longitude,a.marker.icon="http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png"})}}},a.marker={id:0,icon:"http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png",coords:{latitude:a.user.coordenadasAvisoLatitud,longitude:a.user.coordenadasAvisoLongitud},options:{draggable:!0},events:{dragend:function(b,c,d){a.user.coordenadasAvisoLatitud=b.getPosition().lat(),a.user.coordenadasAvisoLongitud=b.getPosition().lng(),a.map.circle.center.latitude=a.user.coordenadasAvisoLatitud,a.map.circle.center.longitude=a.user.coordenadasAvisoLongitud}}},a.map.circle={id:1,center:{latitude:a.user.coordenadasAvisoLatitud,longitude:a.user.coordenadasAvisoLongitud},radius:1e4,stroke:{color:"#08B21F",weight:2,opacity:1},fill:{color:"#08B21F",opacity:.5},geodesic:!1,draggable:!1,clickable:!1,editable:!1,visible:!0,events:{radius_changed:function(){}}},d.then(function(b){setTimeout(function(){a.showMap=!0,a.$apply()},100)}),a.sliderValue=a.user.radioAviso,a.sliderFlag=!0,a.sliderChange=function(){void 0!==a.map&&(a.map.circle.radius=1e3*a.sliderValue)},a.$watch("sliderValue",function(){a.sliderChange()});var f=function(b){var c=b.currentTarget.files[0],d=new FileReader;d.onload=function(b){a.$apply(function(a){a.myImage=b.target.result})},d.readAsDataURL(c)};angular.element(document.querySelector("#fileInput")).on("change",f),a.closeAlert=function(){a.message="",a.errors.other="",a.errors.passwordIguales="",a.numeroGuardar="-1"},a.actualizarDatos=function(b,c){a.numeroGuardar=c,e(b,c)}}]),angular.module("subexpuestaV2App").controller("SignupCtrl",["$scope","Auth","$location","$window","Email","$log",function(a,b,c,d,e,f){a.user={},a.errors={},a.register=function(d){if(a.submitted=!0,d.$valid){var f=a.user.username.toString().replace(/[&\/\\#,+()$~%.='!":*?<>{}]/g,"-"),g=a.user.origen;_.isUndefined(a.user.origenTexto)||(g=a.user.origenTexto),b.createUser({name:a.user.name,username:f,email:a.user.email,origen:g,password:a.user.password}).then(function(){e.EmailEnviar.enviarMail({direccion:a.user.email},function(a){}),c.path("/")})["catch"](function(b){b=b.data,a.errors={},angular.forEach(b.errors,function(b,c){console.log("error: "+b.message+" field: "+c),d[c].$setValidity("mongoose",!1),a.errors[c]=b.message})})}},a.loginOauth=function(a){d.location.href="/auth/"+a}}]),angular.module("subexpuestaV2App").controller("AdminCtrl",["$scope","$http","Auth","User","$location","$log",function(a,b,c,d,e,f){f.debug("Es admin: "+c.isAdmin()),c.isAdmin()||e.path("/")}]),angular.module("subexpuestaV2App").config(["$stateProvider",function(a){a.state("admin",{url:"/admin",templateUrl:"app/admin/admin.html",controller:"AdminCtrl",authenticate:!0})}]),angular.module("subexpuestaV2App").controller("CrearArticuloCtrl",["$scope","$rootScope","$log","Articulo","Auth","$location",function(a,b,c,d,e,f){e.isAdmin()||f.path("/"),a.model={id:0},a.titulo="",a.contenido="",a.contenidoHTML="",a.autor="",a.urlAutor="",a.imagen="",a.articuloCreado=!1,a.crearArticulo=function(){a.nuevoArticulo=new d,a.nuevoArticulo.titulo=a.titulo,a.nuevoArticulo.contenido=a.contenido,a.nuevoArticulo.contenidoHTML=a.contenidoHTML,a.nuevoArticulo.autor=a.autor,a.nuevoArticulo.urlAutor=a.urlAutor,a.nuevoArticulo.imagen=a.imagen,a.nuevoArticulo.categoria=a.model.id,a.nuevoArticulo.$save().then(function(b){a.articuloCreado=!0})}}]),angular.module("subexpuestaV2App").controller("AdminListaArticulosCtrl",["$scope","$rootScope","$log","Articulo","Auth","$location",function(a,b,c,d,e,f){function g(){d.query({},function(b){a.listaArticulos=b})}e.isAdmin()||f.path("/"),a.listaArticulos=[],g()}]),angular.module("subexpuestaV2App").controller("AdminModificarArticulosCtrl",["$scope","$stateParams","$rootScope","$log","Articulo","Auth","$location",function(a,b,c,d,e,f,g){function h(){e.get({id:b.id},function(b){a.titulo=b.titulo,a.contenido=b.contenido,a.contenidoHTML=b.contenidoHTML,a.autor=b.autor,a.imagen=b.imagen,a.model.id=b.categoria})}f.isAdmin()||g.path("/"),a.model={id:0},a.titulo="",a.contenido="",a.contenidoHTML="",a.autor="",a.imagen="",a.articuloModificado=!1,a.mensajeError="",h(),a.modificarArticulo=function(){return _.isUndefined(a.titulo)?void(a.mensajeError="Por favor, indique el titulo de la fotografia."):_.isUndefined(a.contenido)?void(a.mensajeError="Por favor, indique el contenido "):_.isUndefined(a.contenidoHTML)?void(a.mensajeError="Por favor, indique el contenidoHTML"):void(a.editarArticulo=e.get({id:b.id},function(){a.editarArticulo.titulo=a.titulo,a.editarArticulo.contenido=a.contenido,a.editarArticulo.contenidoHTML=a.contenidoHTML,a.editarArticulo.autor=a.autor,a.editarArticulo.imagen=a.imagen,a.editarArticulo.categoria=a.model.id,a.editarArticulo.$update().then(function(b){a.articuloModificado=!0,a.mensajeError=""})}))}}]),angular.module("subexpuestaV2App").controller("SingleArticuloCtrl",["$scope","$rootScope","$log","Articulo","ArticuloComentario","$stateParams",function(a,b,c,d,e,f){function g(){d.query({},function(b){a.listaArticulos=b})}function h(){d.get({id:f.id},function(c){a.singleArticulo=c,b.title=c.titulo+" | subexpuesta.com",b.metaDescription=c.contenido.substring(0,150)+"...",b.titleFB=c.titulo+" | subexpuesta.com",b.descriptionFB=c.contenido.substring(0,150)+"...",b.imageFB=c.imagen})}a.singleArticulo={},a.listaArticulos=[],a.listaColores=["#AAAA39","#9D344B","#313975","#E4E47A","#42000E","#959ABC","#474700","#D37186","#050A31"],a.comentarioArticulo={nombre:"",direccion:"",comentario:""},g(),h(),a.enviarComentario=function(){a.singleArticulo=e.update({id:f.id},a.comentarioArticulo),a.comentarioArticulo={nombre:"",direccion:"",comentario:""}}}]),angular.module("subexpuestaV2App").config(["$stateProvider",function(a){a.state("articulo",{url:"/articulo",templateUrl:"app/articulo/articulo.html",controller:"ArticuloCtrl"}).state("blog",{url:"/blog",templateUrl:"app/articulo/lista-articulos.html",controller:"ListaArticulosCtrl"}).state("blogcategoria",{url:"/blog/:categoria",templateUrl:"app/articulo/lista-articulos.html",controller:"ListaArticulosCtrl"}).state("creararticulo",{url:"/admin/crear-articulo",templateUrl:"app/articulo/admin/crear-articulo.html",controller:"CrearArticuloCtrl",authenticate:!0}).state("listadoarticulos",{url:"/admin/listado-articulos",templateUrl:"app/articulo/admin/lista-articulos.html",controller:"AdminListaArticulosCtrl",authenticate:!0}).state("modificararticulos",{url:"/admin/modificar-articulos/:id/",templateUrl:"app/articulo/admin/modificar-articulo.html",controller:"AdminModificarArticulosCtrl",authenticate:!0}).state("singlearticulo",{url:"/articulo/:id/:titulo",templateUrl:"app/articulo/single-articulo.html",controller:"SingleArticuloCtrl"})}]),angular.module("subexpuestaV2App").factory("Articulo",["$resource",function(a){return a("/api/articulos/:id",{id:"@_id"},{update:{method:"PUT"}})}]),angular.module("subexpuestaV2App").factory("ArticuloComentario",["$resource",function(a){return a("/api/articulos/addcomentario/:id",{id:"@_id"},{update:{method:"PUT"}})}]),angular.module("subexpuestaV2App").controller("ListaArticulosCtrl",["$scope","$rootScope","$log","Articulo","$stateParams",function(a,b,c,d,e){function f(){var b=0;switch(e.categoria){case"general":b=0;break;case"afondo":b=1}d.query({},function(c){_.isUndefined(e.categoria)?a.listaArticulos=c:a.listaArticulos=_.where(c,{categoria:b})})}a.listaArticulos=[],b.title="Nuestro Blog. Artículos sobre fotografía nocturna | subexpuesta.com",b.metaDescription="Tutoriales, cómo se hizo la fotografía, experiencias, unboxing, linternas, puesta en práctica, vamos... nuestro blog!",b.titleFB="Nuestro Blog. Artículos sobre fotografía nocturna | subexpuesta.com",b.descriptionFB="Tutoriales, cómo se hizo la fotografía, experiencias, unboxing, linternas, puesta en práctica, vamos... nuestro blog!",b.imageFB="http://res.cloudinary.com/djhqderty/image/upload/v1431698600/subexpuesta-com-bienvenida_o8bobi.jpg",f()}]),angular.module("subexpuestaV2App").controller("ContactoCtrl",["$scope","$rootScope","Email","$log","$http",function(a,b,c,d,e){b.title="Ponte en contacto con nosotros | subexpuesta.com",b.metaDescription="Cualquier problema, sugerencia o incidencia que encuentres con la web, ponte en contacto con nosotros. Lo resolveremos lo más rápido posible!",b.titleFB="Ponte en contacto con nosotros | subexpuesta.com",b.descriptionFB="Cualquier problema, sugerencia o incidencia que encuentres con la web, ponte en contacto con nosotros. Lo resolveremos lo más rápido posible!",b.imageFB="http://www.subexpuesta.com/assets/images/subexpuesta-logo.png",a.enviado=!1,a.mostrarError=!1,a.enviando=!1,a.direccion="",a.nombre="",a.asunto="",a.mensaje="",a.miembros=[],a.enviarCorreo=function(){a.enviando=!0,c.EmailEnviarContacto.enviarMailContacto({direccion:a.direccion,nombre:a.nombre,asunto:a.asunto,mensaje:a.mensaje},function(b){"success"===b.message?a.enviado=!0:a.mostrarError=!0,a.enviando=!1})}}]),angular.module("subexpuestaV2App").config(["$stateProvider",function(a){a.state("contacto",{url:"/contacto",templateUrl:"app/contacto/contacto.html",controller:"ContactoCtrl"})}]),angular.module("subexpuestaV2App").factory("Email",["$resource",function(a){return{EmailAPI:a("/api/emails/:id",{id:"@_id"},{update:{method:"PUT"}}),EmailEnviar:a("/api/emails/enviarmail",{autor:"@_id"},{enviarMail:{method:"POST"}}),EmailEnviarContacto:a("/api/emails/enviarmailcontacto",{autor:"@_id"},{enviarMailContacto:{method:"POST"}})}}]),angular.module("subexpuestaV2App").controller("CrearEventoCtrl",["$scope","$rootScope","$log","$upload","uiGmapGoogleMapApi","Evento","Auth","$location",function(a,b,c,d,e,f,g,h){g.isAdmin()||h.path("/"),a.model={id:0},a.evento=new f,a.files={},a.finalizado=!1,a.mensajeError="",a.titulo="",a.organizador="",a.descripcion="",a.fecha="",a.capacidad="",a.eventoCreado=!1,a.opened=!1,a.showMap=!1,a.today=function(){a.dt=new Date},a.clear=function(){a.dt=null},a.tags=[],a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.map={center:{latitude:40.399995,longitude:-4.087896},zoom:6,scaleControl:!0,events:{click:function(b,c,d){a.$apply(function(){a.marker.coords.latitude=d[0].latLng.lat(),a.marker.coords.longitude=d[0].latLng.lng(),a.marker.icon="http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png"})}}},a.marker={id:0,icon:"http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png",coords:{latitude:0,longitude:0},options:{draggable:!0},events:{dragend:function(a,b,c){a.getPosition().lat(),a.getPosition().lng()}}},a.searchbox={template:"searchbox.tpl.html",position:"RIGHT_TOP",events:{places_changed:function(b){var d=b.getPlaces();c.debug("New place: "+JSON.stringify(d[0],null,4)),0!=d.length&&(a.marker.coords.latitude=d[0].geometry.location.lat(),a.marker.coords.longitude=d[0].geometry.location.lng(),a.map.center.latitude=d[0].geometry.location.lat(),a.map.center.longitude=d[0].geometry.location.lng(),a.map.zoom=10)}}},e.then(function(b){setTimeout(function(){a.showMap=!0,a.$apply()},100)}),a.crearEvento=function(){a.evento.fecha=a.dt,a.evento.longitud=a.marker.coords.longitude,a.evento.latitud=a.marker.coords.latitude,a.evento.$save().then(function(b){a.eventoCreado=!0})},a.widget=$(".cloudinary_fileupload").unsigned_cloudinary_upload($.cloudinary.config().upload_preset,{tags:"subexpuesta",context:"photo=",folder:"subexpuesta"},{acceptFileTypes:/(\.|\/)(gif|jpe?g|png|bmp|ico)$/i,maxFileSize:5e6,dropZone:"#direct_upload_jquery",start:function(b){a.status="Comienza la carga...",a.files={},a.$apply()},fail:function(b,c){a.status="Error en la carga",a.$apply()}}).on("cloudinaryprogress",function(b,c){var d=c.files[0].name,e=a.files[d]||{};e.progress=Math.round(100*c.loaded/c.total),e.status="Subiendo... "+e.progress+"%",a.files[d]=e,a.$apply()}).on("cloudinaryprogressall",function(b,c){a.progress=Math.round(100*c.loaded/c.total),a.status="Subiendo... "+a.progress+"%",a.$apply()}).on("cloudinarydone",function(b,c){c.result.context={custom:{photo:a.title}},a.status="Finalizado correctamente",a.result=c.result,a.evento.cloudinaryId=a.result.public_id;var d=c.files[0].name,e=a.files[d]||{};e.name=d,e.result=c.result,a.files[d]=e,a.finalizado=!0,a.$apply()})}]),angular.module("subexpuestaV2App").controller("AdminListaEventoCtrl",["$scope","$rootScope","$log","Evento","Auth","$location",function(a,b,c,d,e,f){function g(){d.query({},function(b){a.listaEventos=b})}e.isAdmin()||f.path("/"),a.listaEventos=[],g()}]),angular.module("subexpuestaV2App").controller("ModificarEventoCtrl",["$scope","$rootScope","$log","$upload","uiGmapGoogleMapApi","Evento","Auth","$location","$stateParams",function(a,b,c,d,e,f,g,h,i){function j(){f.get({id:i.id},function(b){a.evento=b,a.marker.coords.latitude=b.latitud,a.marker.coords.longitude=b.longitud,a.dt=b.fecha})}g.isAdmin()||h.path("/"),a.model={id:0},a.files={},a.finalizado=!1,a.mensajeError="",a.titulo="",a.organizador="",a.descripcion="",a.fecha="",a.capacidad="",a.eventoModificado=!1,a.opened=!1,a.showMap=!1,a.today=function(){a.dt=new Date},a.clear=function(){a.dt=null},a.tags=[],a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.map={center:{latitude:40.399995,longitude:-4.087896},zoom:6,scaleControl:!0,events:{click:function(b,c,d){a.$apply(function(){a.marker.coords.latitude=d[0].latLng.lat(),a.marker.coords.longitude=d[0].latLng.lng(),a.marker.icon="http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png"})}}},a.marker={id:0,icon:"http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png",coords:{latitude:0,longitude:0},options:{draggable:!0},events:{dragend:function(a,b,c){a.getPosition().lat(),a.getPosition().lng()}}},e.then(function(b){setTimeout(function(){a.showMap=!0,a.$apply()},100)}),j(),a.widget=$(".cloudinary_fileupload").unsigned_cloudinary_upload($.cloudinary.config().upload_preset,{tags:"subexpuesta",context:"photo=",folder:"subexpuesta"},{acceptFileTypes:/(\.|\/)(gif|jpe?g|png|bmp|ico)$/i,maxFileSize:5e6,dropZone:"#direct_upload_jquery",start:function(b){a.status="Comienza la carga...",a.files={},a.$apply()},fail:function(b,c){a.status="Error en la carga",a.$apply()}}).on("cloudinaryprogress",function(b,c){var d=c.files[0].name,e=a.files[d]||{};e.progress=Math.round(100*c.loaded/c.total),e.status="Subiendo... "+e.progress+"%",a.files[d]=e,a.$apply()}).on("cloudinaryprogressall",function(b,c){a.progress=Math.round(100*c.loaded/c.total),a.status="Subiendo... "+a.progress+"%",a.$apply()}).on("cloudinarydone",function(b,c){c.result.context={custom:{photo:a.title}},a.status="Finalizado correctamente",a.result=c.result,a.evento.cloudinaryId=a.result.public_id;var d=c.files[0].name,e=a.files[d]||{};e.name=d,e.result=c.result,a.files[d]=e,a.finalizado=!0,a.$apply()}),a.modificarEvento=function(){a.evento.$update().then(function(b){a.eventoModificado=!0,a.mensajeError=""})}}]),angular.module("subexpuestaV2App").controller("EventoPeticionCtrl",["$scope","$rootScope","$log","Evento","$stateParams","Email",function(a,b,c,d,e,f){b.title="Añade tu curso de fotografía a www.subexpuesta.com",b.metaDescription="Añade tu curso al listado de www.subexpuesta.com, tanto de fotografía nocturna, lightpainting, edición en photoshop o lightroom, o paisajístico. Podrás tener más difusión, poder llegar a más personas y completar tu aforo más fácilmente",b.titleFB="Añade tu curso de fotografía a www.subexpuesta.com",b.descriptionFB="Añade tu curso al listado de www.subexpuesta.com, tanto de fotografía nocturna, lightpainting, edición en photoshop o lightroom, o paisajístico. Podrás tener más difusión, poder llegar a más personas y completar tu aforo más fácilmente",a.peticion={},a.mensajeError="",a.enviado=!1,a.mostrarError=!1,a.enviando=!1,a.closeAlert=function(){a.mensajeError=""},a.closeMensaje=function(){a.mensajeExito=""},a.enviarMensaje=function(){return _.isUndefined(a.peticion.nombre)?void(a.mensajeError="Por favor, indique su nombre."):_.isUndefined(a.peticion.email)?void(a.mensajeError="Por favor, indique su email."):_.isUndefined(a.peticion.web)?void(a.mensajeError="Por favor, indique la web donde se promociona su curso."):(a.enviando=!0,void f.EmailEnviarContacto.enviarMailContacto({direccion:a.peticion.email,nombre:a.peticion.nombre,asunto:"Añade tu curso a www.subexpuesta.com ",mensaje:a.peticion.web},function(b){c.debug("mensaje: "+JSON.stringify(b)),"success"===b.message?(a.enviado=!0,a.mensajeExito="Su mensaje ha sido enviado correctamente, en la mayor brevedad posible nos pondremos en contacto contigo.",a.peticion={}):a.mostrarError=!0,a.enviando=!1}))}}]),angular.module("subexpuestaV2App").controller("SingleEventoCtrl",["$scope","$log","$rootScope","Evento","$stateParams","Email",function(a,b,c,d,e,f){function g(){d.get({id:e.id},function(b){a.eventoActual=b,c.title=b.titulo,c.metaDescription=b.descripcion.substring(0,150)+"...",c.titleFB=b.titulo,c.descriptionFB=b.descripcion.substring(0,150)+"..."})}a.alumno={},a.mensajeError="",a.enviado=!1,a.mostrarError=!1,a.enviando=!1,a.closeAlert=function(){a.mensajeError=""},a.closeMensaje=function(){a.mensajeExito=""},g(),a.enviarMensaje=function(){return _.isUndefined(a.alumno.nombre)?void(a.mensajeError="Por favor, indique su nombre."):_.isUndefined(a.alumno.email)?void(a.mensajeError="Por favor, indique su email."):_.isUndefined(a.alumno.mensaje)?void(a.mensajeError="Por favor, indique el mensaje que quiere enviar."):(a.enviando=!0,void f.EmailEnviarContacto.enviarMailContacto({organizador:a.eventoActual.emailContacto,direccion:a.alumno.email,nombre:a.alumno.nombre,asunto:"Informacion sobre el curso: "+a.eventoActual.titulo,mensaje:a.alumno.mensaje},function(c){b.debug("mensaje: "+JSON.stringify(c)),"success"===c.message?(a.enviado=!0,a.mensajeExito="Su mensaje ha sido enviado correctamente, en la mayor brevedad posible nos pondremos en contacto contigo.",a.alumno={}):a.mostrarError=!0,a.enviando=!1}))}}]),angular.module("subexpuestaV2App").controller("EventoCtrl",["$scope","$rootScope","Evento","$log","$filter","Boletin","$timeout",function(a,b,c,d,e,f,g){function h(){a.boletinCreado=!1,a.correo=""}function i(){var b=new Date;d.debug("fechaHoy: "+b),c.query({},function(c){a.listaEventos=_.filter(c,function(a){var c=new Date(a.fecha);return c>b});var d=_.groupBy(a.listaEventos,function(a){return a.fecha.substring(0,7)});a.eventosAgrupados=d,_.each(c,function(b){var c={"@context":"http://schema.org","@type":"Event",name:b.titulo,location:{"@type":"Place",name:"Aula",address:{"@type":"PostalAddress",addressLocality:b.localidad,streetAddress:b.direccion}},offers:{"@type":"AggregateOffer",url:"http://www.subexpuesta.com/"+b._id+"/"+e("seo")(b.titulo),price:b.precio,lowprice:b.precio},startDate:b.fecha,url:"http://www.subexpuesta.com/"+b._id+"/"+e("seo")(b.titulo),organizer:{name:b.organizador,url:b.web}};a.listaSnippet.push(c)}),$("#json-ld-content").html(JSON.stringify(a.listaSnippet))})}b.title="Cursos sobre fotografía nocturna y paisaje",b.metaDescription="Cursos de fotografía nocturna, lightpainting, edición y retoque avanzado de paisaje, astrofotografía, y muchas más...",b.titleFB="Cursos sobre fotografía nocturna y paisaje",b.descriptionFB="Cursos de fotografía nocturna, lightpainting, edición y retoque avanzado de paisaje, astrofotografía, y muchas más...",a.correo="",a.listaEventos=[],a.listaSnippet=[],a.tipoEventos=["evento-general.png","evento-nocturna.png","evento-edicion.png","evento-online.png","evento-astrofotografia.png","evento-paisaje.png"],a.guardarEmail=function(){a.nuevo=new f,a.nuevo.email=a.correo,a.nuevo.origen="cursos",a.nuevo.$save().then(function(b){a.boletinCreado=!0,g(h,5e3)})},i(),a.oneAtATime=!0,a.groups=[{title:"Dynamic Group Header - 1",content:"Dynamic Group Body - 1"},{title:"Dynamic Group Header - 2",content:"Dynamic Group Body - 2"}],a.items=["Item 1","Item 2","Item 3"],a.addItem=function(){var b=a.items.length+1;a.items.push("Item "+b)},a.status={isFirstOpen:!0,isFirstDisabled:!1}}]),angular.module("subexpuestaV2App").filter("fechaEvento",function(){return function(a){function b(a){switch(a){case"-01":return"Enero";case"-02":return"Febrero";case"-03":return"Marzo";case"-04":return"Abril";case"-05":return"Mayo";case"-06":return"Junio";case"-07":return"Julio";case"-08":return"Agosto";case"-09":return"Septiembre";case"-10":return"Octubre";case"-11":return"Noviembre";case"-12":return"Diciembre";default:return a}}return _.isUndefined(a)?void 0:b(a.substring(4,7))+" de "+a.substring(0,4)}}),angular.module("subexpuestaV2App").config(["$stateProvider",function(a){a.state("evento",{url:"/cursos-sobre-fotografia-nocturna-y-paisaje",templateUrl:"app/evento/evento.html",controller:"EventoCtrl"}).state("singleevento",{url:"/cursos/:id/:titulo",templateUrl:"app/evento/evento-single.html",controller:"SingleEventoCtrl"}).state("peticionevento",{url:"/cursos/agregar-nuevo-curso",templateUrl:"app/evento/evento-peticion.html",controller:"EventoPeticionCtrl"}).state("crearevento",{url:"/admin/crear-evento",templateUrl:"app/evento/admin/crear-evento.html",controller:"CrearEventoCtrl",authenticate:!0}).state("modificarevento",{url:"/admin/modificar-evento/:id/",templateUrl:"app/evento/admin/modificar-evento.html",controller:"ModificarEventoCtrl",authenticate:!0}).state("listadoeventos",{url:"/admin/listado-eventos",templateUrl:"app/evento/admin/lista-evento.html",controller:"AdminListaEventoCtrl",authenticate:!0})}]),angular.module("subexpuestaV2App").factory("Evento",["$resource",function(a){return a("/api/eventos/:id",{id:"@_id"},{update:{method:"PUT"}})}]),angular.module("subexpuestaV2App").controller("AdminLocalizacionCtrl",["$scope","$rootScope","Localizacion","Auth","$log","$http",function(a,b,c,d,e,f){function g(){a.listaLocalizaciones=c.LocalizacionAPI.query(function(){})}a.isAdmin=d.isAdmin,a.listaLocalizaciones={},a.descripcionMejora="",a.mejoraCreada=!1,a.nuevoEstado=2,a.items=[{id:0,name:"Aceptada"},{id:1,name:"Pendiente de Validar"},{id:2,name:"Rechazada"}],a.obtenerDirecciones=function(b){a.actualizarLocalizacion=c.LocalizacionAPI.get({id:b},function(){f({method:"GET",url:"https://maps.googleapis.com/maps/api/geocode/json?latlng="+a.actualizarLocalizacion.latitud+","+a.actualizarLocalizacion.longitud,transformRequest:function(a,b){var c=b();return delete c.Authorization,c}}).success(function(b){a.actualizarLocalizacion.direccion=b.results[0].formatted_address,a.actualizarLocalizacion.$update().then(function(a){g()})})})},a.actualizarLocalizacion=function(b,d){a.actualizarLocalizacion=c.LocalizacionAPI.get({id:b},function(){a.actualizarLocalizacion.estado=d,a.actualizarLocalizacion.$update().then(function(a){g()})})},g()}]),angular.module("subexpuestaV2App").controller("LocalizacionCreadaCtrl",["$scope","$log","Localizacion","$stateParams","Auth",function(a,b,c,d,e){function f(){c.LocalizacionAutor.getByAutor({autor:a.getCurrentUser.username},function(b){a.listaLocalizaciones=b})}a.getCurrentUser=e.getCurrentUser(),a.listaLocalizaciones={},a.parametro=d.id,a.titulo=d.titulo,f()}]),angular.module("subexpuestaV2App").controller("LocalizacionesCtrl",["$scope","$rootScope","$http","$upload","$log","$location","Localizacion","uiGmapGoogleMapApi","Auth","Modal","$filter","Usuario","User","UsuarioAviso",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){a.getCurrentUser=i.getCurrentUser(),b.title="Localizaciones Fotografía Nocturna",b.metaDescription="Mapa de todo el mundo con las mejores localizaciones de fotografía nocturna que te puedas encontrar!",b.titleFB="Localizaciones Fotografía Nocturna",b.descriptionFB="Mapa de todo el mundo con las mejores localizaciones de fotografía nocturna que te puedas encontrar!",b.imageFB="http://www.subexpuesta.com/assets/images/subexpuesta-logo.png",a.localizacion={},a.localizacionCreada=!1,a.files={},a.finalizado=!1,a.mensajeError="",a.rate=0,a.rateCL=0,a.max=10,a.isReadonly=!1,a.showMap=!1,a.hoveringOver=function(b){a.overStar=b,a.percent=100*(b/a.max)},a.hoveringOverCL=function(b){a.overStarCL=b,a.percentCL=100*(b/a.max)},a.ratingStates=[{stateOn:"glyphicon-ok-sign",stateOff:"glyphicon-ok-circle"},{stateOn:"glyphicon-star",stateOff:"glyphicon-star-empty"},{stateOn:"glyphicon-heart",stateOff:"glyphicon-ban-circle"},{stateOn:"glyphicon-heart"},{stateOff:"glyphicon-off"}],a.today=function(){a.dt=new Date},a.clear=function(){a.dt=null},a.tags=[],a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.closeAlert=function(){a.mensajeError=""},a.formats=["dd-MM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],a.format=a.formats[3],a.defaultBounds=new google.maps.LatLngBounds(new google.maps.LatLng(44.399995,4.087896),new google.maps.LatLng(40.66541,-4.31715)),a.map={center:{latitude:40.399995,longitude:-4.087896},zoom:6,events:{click:function(b,c,d){a.$apply(function(){a.marker.coords.latitude=d[0].latLng.lat(),a.marker.coords.longitude=d[0].latLng.lng(),a.marker.icon="http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png"})}}},a.marker={id:0,icon:"http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png",coords:{latitude:0,longitude:0},options:{draggable:!0},events:{dragend:function(a,b,c){a.getPosition().lat(),a.getPosition().lng()}}},a.searchbox={template:"searchbox.tpl.html",position:"top-left",options:{bounds:{},visible:!0},events:{places_changed:function(b){var c=b.getPlaces();if(e.debug("places total: "+c.length),0!=c.length){for(var d,f=[],g=new google.maps.LatLngBounds,h=0;d=c[h];h++){var i={id:h,place_id:d.place_id,name:d.name,latitude:d.geometry.location.lat(),longitude:d.geometry.location.lng(),options:{visible:!1},templateurl:"window.tpl.html",templateparameter:d};f.push(i),g.extend(d.geometry.location)}a.map.bounds={northeast:{latitude:g.getNorthEast().lat(),longitude:g.getNorthEast().lng()},southwest:{latitude:g.getSouthWest().lat(),longitude:g.getSouthWest().lng()}},_.each(f,function(b){b.closeClick=function(){return a.selected.options.visible=!1,b.options.visble=!1,
e.debug("click closeClick"),a.$apply()},b.onClicked=function(){a.selected.options.visible=!1,a.selected=b,e.debug("click onClicked"),a.selected.options.visible=!0}}),a.map.zoom=12}}}},h.then(function(b){setTimeout(function(){a.searchbox.options.bounds=new google.maps.LatLngBounds(a.defaultBounds.getNorthEast(),a.defaultBounds.getSouthWest()),a.showMap=!0,a.$apply()},100)}),a.crearLocalizacion=function(){if(0===a.marker.coords.latitude)return void(a.mensajeError="Por favor, indique la localización de la fotografía en el mapa.");if(_.isUndefined(a.localizacion.titulo))return void(a.mensajeError="Por favor, indique el titulo de la fotografia.");if(_.isUndefined(a.dt))return void(a.mensajeError="Por favor, indique la fecha de cuando fue tomada la fotografia.");if(_.isUndefined(a.localizacion.cloudinaryId))return void(a.mensajeError="Por favor, seleccione la imagene que quiere subir.");if(_.isUndefined(a.localizacion.acceso))return void(a.mensajeError="Por favor, indique el acceso a la localizacion para realizar la fotografia.");if(0===a.rate)return void(a.mensajeError="Por favor, valore peligrosidad de la zona de acceso al lugar de la fotografia.");if(_.isUndefined(a.localizacion.categoria))return void(a.mensajeError="Por favor, indique la categoria de la fotografia.");if(a.localizacion.categoria<8){if(0===a.rateCL)return void(a.mensajeError="Por favor, valore la contaminacion luminica del lugar de la fotografia.");a.nuevaLocalizacion=new g.LocalizacionAPI,a.nuevaLocalizacion.titulo=a.localizacion.titulo,a.listaEtiquetas=[],a.tags.length>0&&_.each(a.tags,function(b){a.listaEtiquetas.push(b.text)}),a.nuevaLocalizacion.tags=a.listaEtiquetas,a.nuevaLocalizacion.autor=a.getCurrentUser.username,a.nuevaLocalizacion.cloudinaryId=a.localizacion.cloudinaryId,a.nuevaLocalizacion.fechaToma=a.dt,a.nuevaLocalizacion.acceso=a.localizacion.acceso,a.nuevaLocalizacion.peligrosidad=a.rate,a.nuevaLocalizacion.contaminacionLuminica=a.rateCL,a.nuevaLocalizacion.notasAdicionales=a.localizacion.notasAdicionales,a.nuevaLocalizacion.latitud=a.marker.coords.latitude,a.nuevaLocalizacion.longitud=a.marker.coords.longitude,a.nuevaLocalizacion.categoria=a.localizacion.categoria,c({method:"GET",url:"http://maps.googleapis.com/maps/api/geocode/json?latlng="+a.nuevaLocalizacion.latitud+","+a.nuevaLocalizacion.longitud,transformRequest:function(a,b){var c=b();return delete c.Authorization,c}}).success(function(b){b.results.length>0&&(a.nuevaLocalizacion.direccion=b.results[0].formatted_address)})["finally"](function(){a.nuevaLocalizacion.$save().then(function(b){a.localizacionCreada=!0,m.query({},function(c){_.each(c,function(c){if(c.radioAviso>0&&c.username!=a.getCurrentUser.username){var d=new google.maps.LatLng(a.marker.coords.latitude,a.marker.coords.longitude),e=new google.maps.LatLng(c.coordenadasAvisoLatitud,c.coordenadasAvisoLongitud),f=Math.round(google.maps.geometry.spherical.computeDistanceBetween(d,e)/1e3),g={titulo:a.localizacion.titulo,autor:a.getCurrentUser.username,distanciakm:f,imagen:"http://res.cloudinary.com/djhqderty/image/upload/c_fit,w_340/v1/"+a.localizacion.cloudinaryId+".jpg",url:"http://www.subexpuesta.com/localizaciones/"+b._id+"/"+k("seo")(b.titulo)};f<c.radioAviso&&n.update({id:c._id},g)}})}),f.path("/localizacion-creada/"+b._id+"/"+k("seo")(b.titulo))})})}},a.modalCreada=j.confirm.localizacionCreada(function(a){e.debug("Dentro modal: "),f.path("/localizacion-creada")}),a.updateTitle=function(){var b=a.widget.fileupload("option","formData");b.context="photo="+a.title,a.widget.fileupload("option","formData",b)},a.widget=$(".cloudinary_fileupload").unsigned_cloudinary_upload($.cloudinary.config().upload_preset,{tags:"subexpuesta",context:"photo=",folder:"subexpuesta"},{acceptFileTypes:/(\.|\/)(gif|jpe?g|png|bmp|ico)$/i,maxFileSize:5e6,dropZone:"#direct_upload_jquery",start:function(b){a.status="Comienza la carga...",a.files={},a.$apply()},fail:function(b,c){a.status="Error en la carga",a.$apply()}}).on("cloudinaryprogress",function(b,c){var d=c.files[0].name,e=a.files[d]||{};e.progress=Math.round(100*c.loaded/c.total),e.status="Subiendo... "+e.progress+"%",a.files[d]=e,a.$apply()}).on("cloudinaryprogressall",function(b,c){a.progress=Math.round(100*c.loaded/c.total),a.status="Subiendo... "+a.progress+"%",a.$apply()}).on("cloudinarydone",function(b,c){c.result.context={custom:{photo:a.title}},a.status="Finalizado correctamente",a.result=c.result,a.localizacion.cloudinaryId=a.result.public_id;var d=c.files[0].name,e=a.files[d]||{};e.name=d,e.result=c.result,a.files[d]=e,a.finalizado=!0,a.$apply()})}]),angular.module("subexpuestaV2App").controller("ModalInstanceCtrl",["$scope","$modalInstance","items",function(a,b,c){a.items=c,a.selected={item:a.items[0]},a.ok=function(){b.close(a.selected.item)},a.cancel=function(){b.dismiss("cancel")}}]),angular.module("subexpuestaV2App").config(["$stateProvider",function(a){a.state("localizaciones",{url:"/localizaciones-fotografia-nocturna",templateUrl:"app/localizaciones/localizaciones.html",controller:"LocalizacionesMapaCtrl"}).state("tuslocalizaciones",{url:"/tus-localizaciones/:autor",templateUrl:"app/localizaciones/tus-localizaciones.html",controller:"LocalizacionesPortfolioCtrl"}).state("vistalocalizaciones",{url:"/localizaciones/:id/:titulo",templateUrl:"app/localizaciones/vista-localizaciones.html",controller:"LocalizacionesVistaCtrl"}).state("editarlocalizaciones",{url:"/editar-localizaciones/:id/",templateUrl:"app/localizaciones/editar-localizaciones.html",controller:"LocalizacionesEditarCtrl",authenticate:!0}).state("adminlocalizaciones",{url:"/admin/localizaciones",templateUrl:"app/localizaciones/admin/modificar-localizacion.html",controller:"AdminLocalizacionCtrl",authenticate:!0}).state("localizacioncreada",{url:"/localizacion-creada/:id/:titulo",templateUrl:"app/localizaciones/localizacion-creada.html",controller:"LocalizacionCreadaCtrl",authenticate:!0}).state("mapaspain",{url:"/localizaciones/españa",templateUrl:"app/localizaciones/mapaSpain.html",controller:"MapaSpainCtrl"}).state("crearlocalizaciones",{url:"/crear-localizaciones",templateUrl:"app/localizaciones/crear-localizaciones.html",controller:"LocalizacionesCtrl",authenticate:!0})}]),angular.module("subexpuestaV2App").factory("Localizacion",["$resource",function(a){return{LocalizacionAPI:a("/api/localizaciones/:id",{id:"@_id"},{update:{method:"PUT"}}),LocalizacionAutor:a("/api/localizaciones/autor/:autor",{autor:"@_id"},{getByAutor:{method:"GET",isArray:!0,params:{autor:"@autor"}}})}}]),angular.module("subexpuestaV2App").controller("LocalizacionesEditarCtrl",["$scope","$stateParams","$log","$location","Localizacion","uiGmapGoogleMapApi","Auth","Modal",function(a,b,c,d,e,f,g,h){function i(){e.LocalizacionAPI.get({id:b.id},function(b){a.localizacion=b,a.marker.coords.latitude=b.latitud,a.marker.coords.longitude=b.longitud,a.map.center.latitude=b.latitud,a.map.center.longitude=b.longitud,a.dt=b.fechaToma;var c=[];b.tags.length>0&&_.each(b.tags,function(a){var b=new function(){this.text=a};c.push(b)}),a.tags=c})}a.getCurrentUser=g.getCurrentUser(),a.localizacion={},a.localizacionEditada=!1,a.mensajeError="",a.localizacionBorrada=!1,a.rate=5,a.rateCL=5,a.max=10,a.isReadonly=!1,a.hoveringOver=function(b){a.overStar=b,a.percent=100*(b/a.max)},a.hoveringOverCL=function(b){a.overStarCL=b,a.percentCL=100*(b/a.max)},a.tags=[],a.ratingStates=[{stateOn:"glyphicon-ok-sign",stateOff:"glyphicon-ok-circle"},{stateOn:"glyphicon-star",stateOff:"glyphicon-star-empty"},{stateOn:"glyphicon-heart",stateOff:"glyphicon-ban-circle"},{stateOn:"glyphicon-heart"},{stateOff:"glyphicon-off"}],a.today=function(){a.dt=new Date},a.clear=function(){a.dt=null},a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.closeAlert=function(){a.mensajeError=""},a.formats=["dd-MM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],a.format=a.formats[3],a.map={center:{latitude:40.399995,longitude:-4.087896},zoom:6,events:{click:function(b,d,e){a.$apply(function(){c.log("click event"),c.log("latitud: "+e[0].latLng.lat()),c.log("$scope.marker.coords.latitude: "+a.marker.coords.latitude),a.marker.coords.latitude=e[0].latLng.lat(),a.marker.coords.longitude=e[0].latLng.lng()})}}},a.marker={id:0,coords:{latitude:0,longitude:0},icon:"http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png",options:{draggable:!0},events:{dragend:function(a,b,d){c.log("marker dragend");a.getPosition().lat(),a.getPosition().lng()}}},f.then(function(a){}),a.editarLocalizacion=function(){return 0===a.marker.coords.latitude?void(a.mensajeError="Por favor, indique la localización de la fotografía en el mapa."):_.isUndefined(a.localizacion.titulo)?void(a.mensajeError="Por favor, indique el titulo de la fotografia."):_.isUndefined(a.dt)?void(a.mensajeError="Por favor, indique la fecha de cuando fue tomada la fotografia."):_.isUndefined(a.localizacion.acceso)?void(a.mensajeError="Por favor, indique el acceso a la localizacion para realizar la fotografia."):0===a.rate?void(a.mensajeError="Por favor, valore la facilidad de acceso al lugar de la fotografia."):0===a.rateCL?void(a.mensajeError="Por favor, valore la contaminacion luminica del lugar de la fotografia."):void(a.editarLocalizacion=e.LocalizacionAPI.get({id:b.id},function(){a.editarLocalizacion.titulo=a.localizacion.titulo,a.editarLocalizacion.autor=a.getCurrentUser.username,a.editarLocalizacion.cloudinaryId=a.localizacion.cloudinaryId,a.editarLocalizacion.fechaToma=a.dt,a.editarLocalizacion.acceso=a.localizacion.acceso,a.editarLocalizacion.peligrosidad=a.rate,a.editarLocalizacion.contaminacionLuminica=a.rateCL,a.editarLocalizacion.notasAdicionales=a.localizacion.notasAdicionales,a.editarLocalizacion.latitud=a.marker.coords.latitude,a.editarLocalizacion.longitud=a.marker.coords.longitude,a.editarLocalizacion.categoria=a.localizacion.categoria,a.editarLocalizacion.$update().then(function(b){a.localizacionEditada=!0})}))},i()}]),angular.module("subexpuestaV2App").controller("LocalizacionesMapaCtrl",["$scope","$rootScope","$log","Localizacion","uiGmapGoogleMapApi","$filter",function(a,b,c,d,e,f){function g(){a.listaLocalizaciones=d.LocalizacionAPI.query(function(){_.each(a.listaLocalizaciones,function(b){var c=b.cloudinaryId,d={_id:b._id,id:b.cloudinaryId,autor:b.autor,tags:b.tags,latitude:b.latitud,longitude:b.longitud,titulo:b.titulo,idFoto:c,fechaToma:b.fechaToma,fechaSubida:b.fechaSubida,acceso:b.acceso,peligrosidad:b.peligrosidad,contaminacion:b.contaminacionLuminica,notas:b.notasAdicionales,icon:"http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png",events:{click:function(b,c,d){a.$apply(function(){a.fotoActual._id=d._id,a.fotoActual.idClodinary=d.id,a.fotoActual.tags=d.tags,a.fotoActual.autor=d.autor,a.fotoActual.titulo=d.titulo,a.fotoActual.fechaToma=d.fechaToma,a.fotoActual.fechaSubida=d.fechaSubida,a.fotoActual.acceso=d.acceso,a.fotoActual.peligrosidad=d.peligrosidad,a.fotoActual.contaminacion=d.contaminacion,a.fotoActual.notas=d.notas})}}};2!=b.estado&&a.misLocalizaciones.push(d)}),a.misLocalizacionesFiltradas=a.misLocalizaciones})}b.title="Mapa con Localizaciones de Fotografias Nocturnas",b.metaDescription="Descubre localizaciones de fotografias nocturnas cerca de tu zona, o de un nuevo sitio para poder hacer tu version. Juega con el mapa y explora.",b.titleFB="Mapa con Localizaciones de Fotografias Nocturnas | subexpuesta.com",b.descriptionFB="Descubre localizaciones de fotografias nocturnas cerca de tu zona, o de un nuevo sitio para poder hacer tu version. Juega con el mapa y explora.",b.imageFB="http://www.subexpuesta.com/assets/images/subexpuesta-logo.png",a.busqueda="",a.listaLocalizaciones={},a.misLocalizaciones=[],a.misLocalizacionesFiltradas=[],a.fotoActual={},a.showMap=!1,a.map={center:{latitude:40.399995,longitude:-4.087896},zoom:1,bounds:{},clusterOptions:{title:"Hi I am a Cluster!",gridSize:60,ignoreHidden:!0,minimumClusterSize:2}},a.options={scrollwheel:!0},e.then(function(b){setTimeout(function(){a.showMap=!0,a.$apply()},100)}),a.$watch("busqueda",function(b){a.misLocalizacionesFiltradas=f("filter")(a.misLocalizaciones,b),!a.misLocalizacionesFiltradas}),g()}]),angular.module("subexpuestaV2App").controller("LocalizacionesPortfolioCtrl",["$scope","$rootScope","$log","Localizacion","$stateParams","$filter","Auth","Usuario","$http",function(a,b,c,d,e,f,g,h,i){function j(){_.isUndefined(e.autor)||i({method:"GET",url:"/api/users/usuario/"+e.autor}).then(function(b){a.nombreUsuario=b.data.username,a.sitioweb=b.data.web,a.sitioFB=b.data.urlFacebook,a.sitioTwitter=b.data.urlTwitter,!_.isUndefined(a.sitioweb)&&a.sitioweb.length>0&&(a.sitioweb.indexOf("http")>=0?a.sitioweb=a.sitioweb:a.sitioweb="http://"+a.sitioweb),!_.isUndefined(a.sitioFB)&&a.sitioFB.length>0&&(a.sitioFB.indexOf("http")>=0?a.sitioFB=a.sitioFB:a.sitioFB="https://"+a.sitioFB),!_.isUndefined(a.sitioTwitter)&&a.sitioTwitter.length>0&&(a.sitioTwitter.indexOf("http")>=0?a.sitioTwitter=a.sitioTwitter:a.sitioTwitter="https://"+a.sitioTwitter)},function(a){c.debug("ERROR")})}function k(){d.LocalizacionAutor.getByAutor({autor:e.autor},function(b){a.listaLocalizaciones=b})}a.listaLocalizaciones={},b.title="Localizaciones de Fotografias Nocturnas por: "+e.autor,b.metaDescription="Porfolio con las localizaciones de fotografia nocturna compartidas por "+e.autor,b.titleFB="Localizaciones de Fotografias Nocturnas por: "+e.autor,b.descriptionFB="Porfolio con las localizaciones de fotografia nocturna compartidas por "+e.autor,b.imageFB="http://www.subexpuesta.com/assets/images/subexpuesta-logo.png",a.sitioweb="",a.sitioFB="",a.sitioTwitter="",a.usuarioSub="",j(),k()}]),angular.module("subexpuestaV2App").controller("LocalizacionesVistaCtrl",["$scope","$rootScope","$log","Localizacion","$stateParams","uiGmapGoogleMapApi","Auth","Modal","$location","Email",function(a,b,c,d,e,f,g,h,i,j){function k(){d.LocalizacionAPI.get({id:e.id},function(c){2==c.estado?i.path("/"):(a.localizacion=c,a.marker.coords.latitude=c.latitud,a.marker.coords.longitude=c.longitud,a.map.center.latitude=c.latitud,a.map.center.longitude=c.longitud,a.marker.icon="http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png",a.getCurrentUser.username===c.autor&&(a.mostrarEditar=!0),b.title=c.titulo+" por: "+c.autor,b.metaDescription=c.acceso,b.titleFB=b.title,b.descriptionFB=b.metaDescription,b.imageFB="http://res.cloudinary.com/djhqderty/image/upload/v1429114149/"+c.cloudinaryId+".jpg");var e=new google.maps.LatLng(c.latitud,c.longitud);d.LocalizacionAPI.query().$promise.then(function(b){a.listaLocalizaciones=b,_.each(a.listaLocalizaciones,function(b){var d=new google.maps.LatLng(b.latitud,b.longitud),f=Math.round(google.maps.geometry.spherical.computeDistanceBetween(e,d)/1e3);500>f&&b._id!=c._id&&(b.distanciakm=f,a.localizacionesCercanas.push(b))})})})}a.showMap=!1,a.arrayCategorias=["Nocturna Paisaje","Nocturna Urbana","LightPainting","Atardecer-Amanecer","Monumentos","Ruinas","Vehiculos-Maquinarias","Mineria","Paisaje","Larga Exposicion Diurna","Urbana","Costa"],a.localizacion={},a.listaLocalizaciones={},a.localizacionesCercanas=[],a.isCollapsed=!0,a.mejoraCreada=!1,a.textoReporte="",a.miObjeto={localizaciones:{},distancia:{}},a.getCurrentUser=g.getCurrentUser(),a.mostrarEditar=!1,a.map={center:{latitude:0,longitude:0},zoom:5,icon:"http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png"},a.marker={id:0,icon:"http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png",coords:{latitude:0,longitude:0}},f.then(function(b){setTimeout(function(){a.showMap=!0,a.$apply()},100)}),a["delete"]=h.confirm.borrarLocalizacion(function(b){a.editarLocalizacion=d.LocalizacionAPI.get({id:e.id},function(){a.editarLocalizacion.estado=2,a.editarLocalizacion.$update().then(function(b){i.path("/tus-localizaciones/"+a.getCurrentUser.username)})})}),a.guardarReporte=function(){a.enviando=!0,j.EmailEnviarContacto.enviarMailContacto({direccion:"subexpuestaweb@gmail.com",nombre:"Wikett",asunto:"Reporte Localizacion",mensaje:JSON.stringify(a.localizacion,null,4)+"Comentario: "+a.textoReporte},function(b){"success"===b.message?a.enviado=!0:a.mostrarError=!0,a.enviando=!1})},k()}]),angular.module("subexpuestaV2App").controller("MapaSpainCtrl",["$scope","$rootScope","$log","Localizacion","$stateParams","uiGmapGoogleMapApi","Auth",function(a,b,c,d,e,f,g){function h(b){var e=[];a.listaLocalizaciones=d.LocalizacionAPI.query(),a.listaLocalizaciones.$promise.then(function(b){_.each(b,function(b){if(c.debug("Loca: "+b.latitud+", "+b.longitud),!_.isUndefined(b.direccion))for(var d=0;d<a.provincias.length;d++)if(!_.isUndefined(a.provincias[d].texto))for(var f=0;f<a.provincias[d].texto.length;f++)b.direccion.indexOf(a.provincias[d].texto[f])>-1&&a.provincias[d].localizaciones++;e.push(new google.maps.LatLng(b.latitud,b.longitud))})});var f=new google.maps.MVCArray(e);b.setData(f)}function i(){}a.showMap=!1,a.getCurrentUser=g.getCurrentUser(),a.listaLocalizaciones={},a.provincias=[{nombre:"a coruna",localizaciones:0,texto:["a coruna","a coruña","la coruña"]},{nombre:"alava",localizaciones:0,texto:"alava álava"},{nombre:"albacete",localizaciones:0},{nombre:"alicante",localizaciones:0},{nombre:"almeria",localizaciones:0,texto:"alemría almeria"},{nombre:"asturias",localizaciones:0},{nombre:"avila",localizaciones:0,texto:"ávila avila"},{nombre:"badajoz",localizaciones:0},{nombre:"baleares",localizaciones:0},{nombre:"barcelona",localizaciones:0},{nombre:"burgos",localizaciones:0},{nombre:"caceres",localizaciones:0,texto:"caceres cáceres"},{nombre:"cadiz",localizaciones:0,texto:"cádiz cadiz"},{nombre:"cantabria",localizaciones:0},{nombre:"castellon",localizaciones:0,texto:"castellon castellón castelló"},{nombre:"ceuta",localizaciones:0},{nombre:"ciudad real",localizaciones:0},{nombre:"cordoba",localizaciones:0,texto:"cordoba córdoba"},{nombre:"cuenca",localizaciones:0},{nombre:"girona",localizaciones:0},{nombre:"granada",localizaciones:0},{nombre:"guadalajara",localizaciones:0},{nombre:"guipuzcoa",localizaciones:0},{nombre:"huelva",localizaciones:0},{nombre:"huesca",localizaciones:0},{nombre:"jaen",localizaciones:0},{nombre:"la rioja",localizaciones:0},{nombre:"las palmas",localizaciones:0},{nombre:"leon",localizaciones:0,texto:"leon león"},{nombre:"lleida",localizaciones:0,texto:"lleida lerida"},{nombre:"lugo",localizaciones:0},{nombre:"madrid",localizaciones:0},{nombre:"malaga",localizaciones:0,texto:"malaga málaga"},{nombre:"melilla",localizaciones:0},{nombre:"murcia",localizaciones:0},{nombre:"navarra",localizaciones:0},{nombre:"ourense",localizaciones:0,texto:"ourense orense"},{nombre:"palencia",localizaciones:0},{nombre:"salamanca",localizaciones:0},{nombre:"tenerife",localizaciones:0},{nombre:"segovia",localizaciones:0},{nombre:"sevilla",localizaciones:0},{nombre:"soria",localizaciones:0},{nombre:"tarragona",localizaciones:0},{nombre:"teruel",localizaciones:0},{nombre:"toledo",localizaciones:0},{nombre:"valencia",localizaciones:0},{nombre:"valladolid",localizaciones:0},{nombre:"vizcaya",localizaciones:0},{nombre:"zamora",localizaciones:0},{nombre:"zaragoza",localizaciones:0}],a.map={center:{latitude:40.399995,longitude:-4.087896},zoom:4,heatLayerCallback:function(a){new h(a)},showHeat:!0},a.marker={id:0,icon:"http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png",coords:{latitude:0,longitude:0}},f.then(function(b){setTimeout(function(){a.showMap=!0,a.$apply()},100)}),i()}]),angular.module("subexpuestaV2App").controller("MainCtrl",["$scope","$rootScope","Auth","$log","Localizacion","uiGmapGoogleMapApi","Modal","$filter","$location","$window","Evento",function(a,b,c,d,e,f,g,h,i,j,k){function l(){k.query({},function(b){a.listaEventos=b})}function m(){a.listaLocalizaciones=e.LocalizacionAPI.query(function(){_.each(a.listaLocalizaciones,function(b){var c={id:b.cloudinaryId,_id:b._id,autor:b.autor,tags:b.tags,latitude:b.latitud,longitude:b.longitud,titulo:b.titulo,idFoto:b.cloudinaryId,fechaToma:b.fechaToma,acceso:b.acceso,peligrosidad:b.peligrosidad,contaminacion:b.contaminacionLuminica,notas:b.notasAdicionales,fechaCreacion:b.fechaSubida,icon:"http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png",events:{click:function(b,c,d){a.$apply(function(){a.destinoModal=d._id,a.destinoTituloModal=d.titulo,a.abrir(d),a.fotoActual._id=d._id,a.fotoActual.idClodinary=d.id,a.fotoActual.tags=d.tags,a.fotoActual.autor=d.autor,a.fotoActual.titulo=d.titulo,a.fotoActual.fechaToma=d.fechaToma,a.fotoActual.acceso=d.acceso,a.fotoActual.peligrosidad=d.peligrosidad,a.fotoActual.contaminacion=d.contaminacion,a.fotoActual.notas=d.notas})}}};2!=b.estado&&a.misLocalizaciones.push(c)});var b=_.countBy(a.misLocalizaciones,"autor"),c=new Date(a.fechaHoy.getFullYear(),a.fechaHoy.getMonth(),1);a.topUsuariosMensual=_.filter(a.misLocalizaciones,function(a){var b=new Date(a.fechaCreacion);return b>c}),a.topUsuariosMensual=_.countBy(a.topUsuariosMensual,"autor"),a.topUsuariosMensual=_.map(a.topUsuariosMensual,function(a,b){return{autor:b,total:a}}),a.maximo=_.map(b,function(a,b){return{autor:b,total:a}}),a.usuarioMaximo=_.max(a.maximo,"total")})}a.isLoggedIn=c.isLoggedIn,b.title="Localizaciones de Fotografías Nocturnas",b.titleFB="Localizaciones de Fotografías Nocturnas",b.metaDescription="Localizaciones para Fotografías Nocturnas. Busca en el mapa nuevas localizaciones para hacer tus fotografías nocturnas, y comparte las que ya tengas hechas!",b.descriptionFB="Localizaciones para Fotografías Nocturnas. Busca en el mapa nuevas localizaciones para hacer tus fotografías nocturnas, y comparte las que ya tengas hechas!",b.imageFB="http://www.subexpuesta.com/assets/images/subexpuesta-logo.png",a.destinoModal="",a.destinoTituloModal="",a.usuarioMaximo="",a.listaUsuarios={},a.listaLocalizaciones={},a.misLocalizaciones=[],a.fotoActual={},a.fechaHoy=new Date,a.meses=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],a.listaEventos=[],a.map={center:{latitude:40.399995,longitude:-4.087896},zoom:1,bounds:{},clusterOptions:{title:"Hi I am a Cluster!",gridSize:60,ignoreHidden:!0,minimumClusterSize:2}},a.options={scrollwheel:!0},f.then(function(a){}),a.abrir=g.confirm.visitarLocalizacion(function(b){j.open("/localizaciones/"+a.destinoModal+"/"+h("seo")(a.destinoTituloModal))}),m(),l(),a.status={isFirstOpen:!0,isFirstDisabled:!1}}]),angular.module("subexpuestaV2App").config(["$stateProvider",function(a){a.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"}).state("terminos",{url:"/terminos-de-uso",templateUrl:"app/main/terminos.html",controller:"MainCtrl"}).state("cookies",{url:"/cookies",templateUrl:"app/main/cookies.html"}).state("donaciones",{url:"/donaciones",templateUrl:"app/main/donaciones.html"}).state("sitemap",{url:"/sitemap",templateUrl:"app/main/sitemap.html",controller:"SiteMapCtrl"})}]),angular.module("subexpuestaV2App").controller("SiteMapCtrl",["$scope","$rootScope",function(a,b){a.isLoggedIn=Auth.isLoggedIn,b.title="Sitemap | subexpuesta.com",b.metaDescription="Organización de todos los enlaces de la web."}]),angular.module("subexpuestaV2App").controller("AdminBoletinCtrl",["$scope","$rootScope","Boletin","Auth","$log",function(a,b,c,d,e){function f(){a.listaBoletines=c.query(function(){})}a.isAdmin=d.isAdmin,a.listaBoletines={},f()}]),angular.module("subexpuestaV2App").controller("AdminMejoraCtrl",["$scope","$rootScope","Mejora","Auth","$log",function(a,b,c,d,e){function f(){a.listaMejoras=c.query(function(){})}a.isAdmin=d.isAdmin,a.listaMejoras=[],a.descripcionMejora="",a.isCollapsed=!0,a.mejoraCreada=!1,a.nuevoEstado=2,a.estadosMejoras=["Pendiente de hacer","En proceso...","Realizado","Rechazado","Borrado"],a.items=[{id:0,name:"Pendiente de hacer"},{id:1,name:"En proceso..."},{id:2,name:"Realizado"},{id:3,name:"Rechazado"},{id:4,name:"Borrado"}],a.actualizarVoto=function(b,d){a.actualizarMejora=c.get({id:b},function(){d?a.actualizarMejora.votos++:a.actualizarMejora.votos--,a.actualizarMejora.$update().then(function(a){f()})})},a.actualizarMejora=function(b,d){a.actualizarMejora=c.get({id:b},function(){a.actualizarMejora.estado=d,a.actualizarMejora.$update().then(function(a){f()})}),e.debug("nuevo Estado: "+d)},a.borrarMejora=function(b){console.log("MejoraCtrl borrarMejora: "+b),a.borrarMejora=c.get({id:b},function(){a.borrarMejora.$delete().then(function(a){f()})})},f()}]),angular.module("subexpuestaV2App").controller("MejoraCtrl",["$scope","$rootScope","Mejora","Auth",function(a,b,c,d){function e(){a.listaMejoras=c.query(function(){})}function f(a){if(2>a)return!1;if(a!=Math.round(a))return!1;for(var b=!0,c=2;c<=Math.sqrt(a);c++)a%c==0&&(b=!1);return b}function g(a){for(var b=a.length,c=0;c<Math.floor(b/2);c++)if(a[c]!==a[b-1-c])return!1;return!0}function h(){for(var a,b=1e3;b>921;)f(b)&&g(b)&&(a=b),b--;return a}a.isAdmin=d.isAdmin,b.title="Mejora la web | subexpuesta.com",b.metaDescription="Cualquier sugerencia que se te ocurra, un problema que encuentres, alguna funcionalidad nueva que te gustaría que apareciera en la web o cualquier comentario para mejorar la web es bienvenido.",a.listaMejoras=[],a.descripcionMejora="",a.isCollapsed=!0,a.mejoraCreada=!1,a.textoReporte="",a.estadosMejoras=["Pendiente de hacer","En proceso...","Realizado","Rechazado","Borrado"],console.log(h()),a.crearMejora=function(){a.nuevaMejora=new c,a.nuevaMejora.descripcion=a.descripcionMejora,a.nuevaMejora.$save().then(function(b){a.isCollapsed=!0,a.descripcionMejora="",a.mejoraCreada=!0,a.listaMejoras.push(b)})},a.actualizarVoto=function(b,d){a.actualizarMejora=c.get({id:b},function(){d?a.actualizarMejora.votos++:a.actualizarMejora.votos--,a.actualizarMejora.$update().then(function(a){e()})})},a.borrarMejora=function(b){console.log("MejoraCtrl borrarMejora: "+b),a.borrarMejora=c.get({id:b},function(){a.borrarMejora.$delete().then(function(a){e()})})},e()}]),angular.module("subexpuestaV2App").config(["$stateProvider",function(a){a.state("mejora",{url:"/mejora",templateUrl:"app/mejora/mejora.html",controller:"MejoraCtrl"}).state("gestionboletin",{url:"/admin/boletin",templateUrl:"app/mejora/admin/gestion-boletin.html",controller:"AdminBoletinCtrl"}).state("adminmejora",{url:"/admin/mejora",templateUrl:"app/mejora/admin/modificar-mejora.html",controller:"AdminMejoraCtrl",authenticate:!0})}]),angular.module("subexpuestaV2App").factory("Mejora",["$resource",function(a){return a("/api/mejoras/:id",{id:"@_id"},{update:{method:"PUT"}})}]),angular.module("subexpuestaV2App").controller("AdminPostalesCtrl",["$scope","$rootScope","$log","User","Auth","$location","Usuario","$http","Localizacion",function(a,b,c,d,e,f,g,h,i){function j(){a.listaLocalizaciones=i.LocalizacionAPI.query(function(){_.each(a.listaLocalizaciones,function(b){var c={id:b.cloudinaryId,_id:b._id,autor:b.autor,tags:b.tags,latitude:b.latitud,longitude:b.longitud,titulo:b.titulo,idFoto:b.cloudinaryId,fechaToma:b.fechaToma,acceso:b.acceso,peligrosidad:b.peligrosidad,contaminacion:b.contaminacionLuminica,notas:b.notasAdicionales,fechaCreacion:b.fechaSubida,icon:"http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png",events:{click:function(b,c,d){a.$apply(function(){a.destinoModal=d._id,a.destinoTituloModal=d.titulo,a.abrir(d),a.fotoActual._id=d._id,a.fotoActual.idClodinary=d.id,a.fotoActual.tags=d.tags,a.fotoActual.autor=d.autor,a.fotoActual.titulo=d.titulo,a.fotoActual.fechaToma=d.fechaToma,a.fotoActual.acceso=d.acceso,a.fotoActual.peligrosidad=d.peligrosidad,a.fotoActual.contaminacion=d.contaminacion,a.fotoActual.notas=d.notas})}}};2!=b.estado&&a.misLocalizaciones.push(c)});var b=(_.countBy(a.misLocalizaciones,"autor"),new Date(a.fechaHoy.getFullYear(),10,1));a.topUsuariosMensual=_.filter(a.misLocalizaciones,function(a){var c=new Date(a.fechaCreacion);return c>b}),a.topUsuariosMensual=_.countBy(a.topUsuariosMensual,"autor"),a.topUsuariosMensual=_.map(a.topUsuariosMensual,function(a,b){return{autor:b,total:a}})})}function k(){d.query({},function(b){a.listaUsuarios=b})}e.isAdmin()||f.path("/"),a.listaUsuarios=[],a.misLocalizaciones=[],a.fechaHoy=new Date,a.participantes=[],a.ganadores=[],j(),k(),a.usuario="",a.calcular=function(){c.debug("entro en calcular: "+a.topUsuariosMensual.length),a.ganadores=[],a.participantes=[];for(var b=0;b<a.topUsuariosMensual.length;){for(var d=0;d<a.topUsuariosMensual[b].total;d++)a.participantes.push(a.topUsuariosMensual[b].autor);b++}c.debug(JSON.stringify(a.participantes));for(var e=0;25>e;){var f=Math.floor(Math.random()*a.participantes.length);c.debug("numero Aleatorio: "+f);var g=a.participantes[f];c.debug("item: "+g),"quique_aparicio"!==g&&"Danielafote"!==g&&"luis muñoz"!==g&&(_.contains(a.ganadores,g)||(a.ganadores.push(g),e++))}c.debug(JSON.stringify(a.ganadores))},a.establecerGanador=function(){c.debug("Call ganador");_.findWhere(a.listaUsuarios,{username:item});h.get("/api/users/actualizarconcurso/"+idUsuario).success(function(a){c.debug("Ganador establecido correctamente")})}}]),angular.module("subexpuestaV2App").controller("PostalesCtrl",["$scope","Localizacion","$log",function(a,b,c){function d(){a.listaLocalizaciones=b.LocalizacionAPI.query(function(){_.each(a.listaLocalizaciones,function(b){var c={id:b.cloudinaryId,_id:b._id,autor:b.autor,tags:b.tags,latitude:b.latitud,longitude:b.longitud,titulo:b.titulo,idFoto:b.cloudinaryId,fechaToma:b.fechaToma,acceso:b.acceso,peligrosidad:b.peligrosidad,contaminacion:b.contaminacionLuminica,notas:b.notasAdicionales,fechaCreacion:b.fechaSubida,icon:"http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png",events:{click:function(b,c,d){a.$apply(function(){a.destinoModal=d._id,a.destinoTituloModal=d.titulo,a.abrir(d),a.fotoActual._id=d._id,a.fotoActual.idClodinary=d.id,a.fotoActual.tags=d.tags,a.fotoActual.autor=d.autor,a.fotoActual.titulo=d.titulo,a.fotoActual.fechaToma=d.fechaToma,a.fotoActual.acceso=d.acceso,a.fotoActual.peligrosidad=d.peligrosidad,a.fotoActual.contaminacion=d.contaminacion,a.fotoActual.notas=d.notas})}}};2!=b.estado&&a.misLocalizaciones.push(c)});var b=(_.countBy(a.misLocalizaciones,"autor"),new Date(a.fechaHoy.getFullYear(),10,1));a.topUsuariosMensual=_.filter(a.misLocalizaciones,function(a){var c=new Date(a.fechaCreacion);return c>b}),a.topUsuariosMensual=_.countBy(a.topUsuariosMensual,"autor"),a.topUsuariosMensual=_.map(a.topUsuariosMensual,function(a,b){return{autor:b,total:a}})})}a.misLocalizaciones=[],a.fechaHoy=new Date,d()}]),angular.module("subexpuestaV2App").config(["$stateProvider",function(a){a.state("postales",{url:"/sorteo-postales-navidad",templateUrl:"app/postales/postales.html",controller:"PostalesCtrl"}).state("generar-ganadores",{url:"/admin/generar-ganadores",templateUrl:"app/postales/admin/generar-ganadores.html",controller:"AdminPostalesCtrl",authenticate:!0}).state("ganadores-postales",{url:"/ganadores-postales-navidad",templateUrl:"app/postales/ganadores-postales.html",controller:"PostalesCtrl"})}]),angular.module("subexpuestaV2App").controller("RecomendacionesCtrl",["$scope","$rootScope",function(a,b){b.title="Recomendaciones para hacer Fotografías Nocturnas | subexpuesta.com",b.metaDescription="Guia y trucos para la fotografia nocturna. Equipo, linternas, lasers, y toda la parafernalia que a veces es util en la fotografia nocturna."}]),angular.module("subexpuestaV2App").config(["$stateProvider",function(a){a.state("recomendaciones",{url:"/recomendaciones",templateUrl:"app/recomendaciones/recomendaciones.html",controller:"RecomendacionesCtrl"})}]),angular.module("subexpuestaV2App").filter("seo",function(){return function(a){function b(a){switch(a){case"á":return"a";case"é":return"e";case"í":return"i";case"ó":return"o";case"ú":return"u";case"ñ":return"n";default:return a}}function c(a){var c="";for(var d in a)c+=b(a[d]);return c}return _.isUndefined(a)?void 0:c(a.toLowerCase()).replace(/[-\s]+/g,"-").replace(/[^-\w\s]/g,"").replace(/^\s+|\s+$/g,"")+""}}),
angular.module("subexpuestaV2App").filter("usernameFilter",function(){return function(a){function b(a){switch(a){case"á":return"a";case"é":return"e";case"í":return"i";case"ó":return"o";case"ú":return"u";case"ñ":return"n";default:return a}}function c(a){var c="";for(var d in a)c+=b(a[d]);return c}return _.isUndefined(a)?void 0:c(a).replace(/[-\s]+/g,"-").replace(/[^-\w\s]/g,"").replace(/^\s+|\s+$/g,"")+""}}),angular.module("subexpuestaV2App").controller("SobremiCtrl",["$scope","$rootScope",function(a,b){b.title="Sobre Nosotros | subexpuesta.com",b.metaDescription="El equipo humano que hay tras los bits y los pixeles."}]),angular.module("subexpuestaV2App").config(["$stateProvider",function(a){a.state("sobremi",{url:"/sobrenosotros",templateUrl:"app/sobremi/sobremi.html",controller:"SobremiCtrl"})}]),angular.module("subexpuestaV2App").factory("ActualizarUsuario",["$resource",function(a){return a("/api/users/actualizar/:id",{id:"@_id"},{update:{method:"PUT"},get:{method:"GET",params:{id:"me"}}})}]),angular.module("subexpuestaV2App").factory("Auth",["$location","$rootScope","$http","User","$cookieStore","$q",function(a,b,c,d,e,f){var g={};return e.get("token")&&(g=d.get()),{login:function(a,b){var h=b||angular.noop,i=f.defer();return c.post("/auth/local",{email:a.email,password:a.password}).success(function(a){return e.put("token",a.token),g=d.get(),i.resolve(a),h()}).error(function(a){return this.logout(),i.reject(a),h(a)}.bind(this)),i.promise},logout:function(){e.remove("token"),g={}},createUser:function(a,b){var c=b||angular.noop;return d.save(a,function(b){return e.put("token",b.token),g=d.get(),c(a)},function(a){return this.logout(),c(a)}.bind(this)).$promise},changePassword:function(a,b,c,e,f,h,i,j,k,l,m,n,o,p,q){var r=q||angular.noop;return d.changePassword({id:g._id},{passwordActual:a,newPassword:b,newName:c,newLocation:e,newWeb:f,newAvatar:h,newSorteo:i,newNewsletter:j,newUrlFacebook:k,newUrlTwitter:l,newAvisoLat:m,newAvisoLon:n,newRadioAviso:o,newFrecuenciaAviso:p},function(a){return r(a)},function(a){return r(a)}).$promise},getCurrentUser:function(){return g},isLoggedIn:function(){return g.hasOwnProperty("role")},isLoggedInAsync:function(a){g.hasOwnProperty("$promise")?g.$promise.then(function(){a(!0)})["catch"](function(){a(!1)}):a(g.hasOwnProperty("role")?!0:!1)},isAdmin:function(){return"admin"===g.role},getToken:function(){return e.get("token")}}}]),angular.module("subexpuestaV2App").factory("Forgotten",["$resource",function(a){return a("/api/users/forgotten/:id",{id:"@_id"},{update:{method:"PUT"}})}]),angular.module("subexpuestaV2App").factory("User",["$resource",function(a){return a("/api/users/:id/:controller",{id:"@_id"},{changePassword:{method:"PUT",params:{controller:"password"}},get:{method:"GET",params:{id:"me"}}})}]),angular.module("subexpuestaV2App").factory("Usuario",["$resource",function(a){return a("/api/users/usuario/:id",{id:"@_id"},{update:{method:"PUT"},get:{method:"GET",params:{id:"me"}},getportitulo:{method:"GET",params:{id:"@id"}}})}]),angular.module("subexpuestaV2App").factory("UsuarioAviso",["$resource",function(a){return a("/api/users/addaviso/:id",{id:"@_id"},{update:{method:"PUT"},get:{method:"GET",params:{id:"me"}}})}]),angular.module("subexpuestaV2App").factory("Boletin",["$resource",function(a){return a("/api/boletines/:id",{id:"@_id"},{update:{method:"PUT"}})}]),angular.module("subexpuestaV2App").controller("FooterCtrl",["$scope","$log","Boletin","$timeout","Articulo",function(a,b,c,d,e){function f(){a.boletinCreado=!1}function g(){e.query({},function(b){a.listaArticulos=b})}a.correo="",a.boletinCreado=!1,a.listaLocalizaciones={},a.localizacionRandom={},a.guardarEmail=function(){a.nuevo=new c,a.nuevo.email=a.correo,a.nuevo.origen="footer",a.nuevo.$save().then(function(b){a.boletinCreado=!0,d(f,4e3)})},g()}]),angular.module("subexpuestaV2App").factory("Modal",["$rootScope","$modal",function(a,b){function c(c,d){var e=a.$new();return c=c||{},d=d||"modal-default",angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})}return{confirm:{"delete":function(a){return a=a||angular.noop,function(){var b,d=Array.prototype.slice.call(arguments),e=d.shift();b=c({modal:{dismissable:!0,title:"Confirmacion de borrado",html:"<p>¿Estás seguro de borrar la localización: <strong>"+e+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Borrar",click:function(a){b.close(a)}},{classes:"btn-default",text:"Cancelar",click:function(a){b.dismiss(a)}}]}},"modal-danger"),b.result.then(function(b){a.apply(b,d)})}},localizacionCreada:function(a){return a=a||angular.noop,function(){var b,d=Array.prototype.slice.call(arguments);d.shift();b=c({modal:{dismissable:!0,title:"Localización creada!!",html:"<p>¿Quieres subir una localizacion nueva?</p>",buttons:[{classes:"btn-success",text:"Crear Nueva Localización",click:function(a){b.close(a)}},{classes:"btn-primary",text:"Continuar",click:function(a){b.dismiss(a)}}]}},"modal-success"),b.result.then(function(b){a.apply(b,d)})}},visitarLocalizacion:function(a){return a=a||angular.noop,function(){var b,d=Array.prototype.slice.call(arguments);d.shift();b=c({modal:{dismissable:!0,title:"Localizador de Fotografías Nocturnas",html:'<div class="row"><div class="col-md-7"><img src="http://res.cloudinary.com/djhqderty/image/upload/c_scale,q_29,w_300/v1429114149/'+arguments[0].id+'.jpg" width="300px" title="'+arguments[0].titulo+'" /></div><div class="col-md-5" style="padding:0px;"><p><strong>Titulo:</strong> '+arguments[0].titulo+"</p><p><strong>Latitud:</strong> "+arguments[0].latitude+"</p><p><strong>Longitud:</strong> "+arguments[0].longitude+"</p><p><strong>Peligrosidad de acceso:</strong> "+arguments[0].peligrosidad+"/10</p><p><strong>Contaminación lumínica:</strong> "+arguments[0].contaminacion+"/10</p></div></div>",buttons:[{classes:"btn-success",text:"Ver Localización",click:function(a){b.close(a)}},{classes:"btn-primary",text:"Cerrar",click:function(a){b.dismiss(a)}}]}},"modal-info"),b.result.then(function(b){a.apply(b,d)})}},borrarLocalizacion:function(a){return a=a||angular.noop,function(){var b,d=Array.prototype.slice.call(arguments),e=d.shift();b=c({modal:{dismissable:!0,title:"Confirmacion de borrado",html:"<p>¿Estás seguro de borrar la localización: <strong>"+e.titulo+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Borrar",click:function(a){b.close(a)}},{classes:"btn-default",text:"Cancelar",click:function(a){b.dismiss(a)}}]}},"modal-danger"),b.result.then(function(b){a.apply(b,d)})}}}}}]),angular.module("subexpuestaV2App").directive("mongooseError",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){b.on("keydown",function(){return d.$setValidity("mongoose",!0)})}}}),angular.module("subexpuestaV2App").controller("NavbarCtrl",["$scope","$location","Auth","$log",function(a,b,c,d){a.menu=[{title:"Home",link:"/"}],a.isCollapsed=!0,a.isLoggedIn=c.isLoggedIn,a.isAdmin=c.isAdmin,a.getCurrentUser=c.getCurrentUser,a.menuExpandido=!1,a.cerrarMenu=function(){a.menuExpandido=!1},a.abrirMenu=function(){a.menuExpandido=!0},a.swapMenu=function(){a.menuExpandido=!a.menuExpandido},a.logout=function(){c.logout(),b.path("/login")},a.isActive=function(a){return a===b.path()}}]),angular.module("subexpuestaV2App").run(["$templateCache",function(a){a.put("app/account/admin/lista-usuarios.html",'<div class=container><div class=row><div class=col-md-12><table class="table table-bordered table-striped mb-none" id=datatable-default><thead><tr><th>Fecha</th><th>Username</th><th>Email</th><th>Frecuencia</th><th>Radio</th><th>Origen</th><th>VIP</th><th>Postales</th><th>Acciones</th></tr></thead><tbody><tr ng-repeat="usuario in listaUsuarios" class=gradeX><td>{{usuario.fecha | date:\'dd/MM/yyyy\'}}</td><td>{{usuario.username}}</td><td>{{usuario.email}}</td><td>{{usuario.frecuenciaAviso}}</td><td>{{usuario.radioAviso}}km</td><td>{{usuario.origen}}</td><td><input type=checkbox ng-model=usuario.vip ng-click="actualizarVIP(usuario.vip, usuario._id)"></td><td><input type=checkbox ng-model=usuario.ganadorPostales ng-click=establecerGanador(usuario._id)></td><td><a href=#>Ver</a> |<a href=#>Modificar</a> | <a href=#>Borrar</a></td></tr></tbody></table></div></div></div>'),a.put("app/account/login/login.html",'<div role=main class=main><section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Iniciar Sesión</li></ul></div></div><div class=row><div class=col-md-12><h1>Iniciar Sesión</h1></div></div></div></section><div class=container><div class=row><div class=col-md-12><div class="row featured-boxes login"><div class="col-md-6 col-md-offset-3"><div class="featured-box featured-box-secundary default info-content"><div class=box-content><h4>Inicia Sesión</h4><form class=form name=form ng-submit=login(form) novalidate><div class=row><div class=form-group><div class=col-md-12><label>E-mail</label><input type=email name=email class="form-control input-lg" ng-model=user.email required></div></div></div><div class=row><div class=form-group><div class=col-md-12><a class=pull-right href=/olvide-password>(Olvidaste tu password?)</a><label>Password</label><input type=password name=password class="form-control input-lg" ng-model=user.password required></div></div></div><div class=row><div class=col-md-6><div class="form-group has-error"><p class=help-block ng-show="form.email.$error.required && form.password.$error.required && submitted">Por favor, introduzca su email y contraseña</p><p class=help-block ng-show="form.email.$error.email && submitted">Dirección de email incorrecta</p><p class=help-block>{{ errors.other }}</p></div></div></div><div class=row><div class=col-md-6><a href=/signup>¿No tienes cuenta? Regístrate</a></div><div class=col-md-6><input type=submit value=Login class="btn btn-primary pull-right push-bottom" data-loading-text=Loading...></div></div></form></div></div></div></div></div></div></div></div>'),a.put("app/account/reset/forgotten.html",'<div role=main class=main><section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Olvidé mi contraseña</li></ul></div></div><div class=row><div class=col-md-12><h1>Olvidé mi contraseña</h1></div></div></div></section><div class=container><div class=row><div class=col-md-12><div class="row featured-boxes login"><div class="col-md-6 col-md-offset-3"><div class="featured-box featured-box-secundary default info-content"><div class=box-content ng-hide="enviado || error"><h4>Solicitar nueva contraseña</h4><div class=row><div class=form-group><div class=col-md-12><label>E-mail</label><input type=email class="form-control input-lg" ng-model=correo required></div></div></div><div class=row><div class=col-md-6><small>Se te enviará a tu email las instrucciones para resetear tu contraseña.</small></div><div class=col-md-6><i class="fa fa-spinner fa-pulse" style=font-size:24px ng-show=enviando></i><button class="btn btn-success pull-right" type=button ng-click=olivdePassword() ng-disabled="!correo.length>0 || enviando">Enviar</button></div></div></div><div class=box-content ng-show=enviado><h4>Solicitud enviada correctamente</h4><div class=row><div class=form-group><div class=col-md-12><p>Se te acaba de enviar un correo a la dirección falicitada para poder resetear tu contraseña. Abra el correo y siga las instrucciones para completar el proceso. Gracias</p></div></div></div></div><div class=box-content ng-show=error><h4>Se produjo un error</h4><div class=row><div class=form-group><div class=col-md-12><p>Por favor, revise que ha puesto su email correctamente o espere unos minutos para volver a intentarlo. Gracias</p><a href=# ng-click=volver()>Volver</a></div></div></div></div></div></div></div></div></div></div></div>'),a.put("app/account/reset/reset.html",'<div role=main class=main><section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Crear nueva contraseña</li></ul></div></div><div class=row><div class=col-md-12><h1>Crear nueva contraseña</h1></div></div></div></section><div class=container><div class=row><div class=col-md-12><div class="row featured-boxes login"><div class="col-md-6 col-md-offset-3"><div class="featured-box featured-box-secundary default info-content"><div class=box-content ng-hide="enviado || error"><h4>Crear Nueva contraseña</h4><div class=row><div class=form-group><div class=col-md-12><label>Contraseña</label><input type=password name=password class="form-control input-lg" ng-model=password required></div></div><div class=form-group><div class=col-md-12><label>Repetir Contraseña</label><input type=password name=passwordAgain class="form-control input-lg" ng-model=passwordAgain required></div></div></div><div class=row ng-show=errorPassword><div class=col-md-12><div class="form-group has-error"><p class=help-block>Las contraseñas no coinciden</p></div></div></div><div class=row><div class=col-md-12><i class="fa fa-spinner fa-pulse" style=font-size:24px ng-show=enviando></i><button class="btn btn-success pull-right" type=button ng-click=resetear() ng-disabled="!password.length>0 || !passwordAgain.length>0">Enviar</button></div></div></div><div class=box-content ng-show=enviado><h4>Contraseña actualizada correctamente</h4><div class=row><div class=form-group><div class=col-md-12><p>Vuelve a la página de login y ya puedes utilizar tu nueva contraseña. Gracias.</p><a href=/login>Iniciar Sesión</a></div></div></div></div><div class=box-content ng-show=error><h4>Se produjo un error</h4><div class=row><div class=form-group><div class=col-md-12><p>Token invalido o ha expirado su tiempo para renovar su contraseña (tienes una hora máximo para abrir el enlace que se envió a tu correo). Vuelva a solicitar cambio de contraseña. Gracias</p><a href=/olvide-password>Solicitar nueva contraseña</a></div></div></div></div></div></div></div></div></div></div></div>'),a.put("app/account/settings/settings.html",'<style>.angular-google-map-container { height: 350px; width: 533px;  }</style><section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Home</a></li><li class=active>Mi Cuenta</li></ul></div></div><div class=row><div class=col-md-12><h1>Mi Cuenta</h1></div></div></div></section><div class=container><div class=row><div class=col-lg-12><form class="form-horizontal form-bordered" name=form novalidate><section class=panel><header class=panel-heading><h3 style=color:#337ab7>Tus datos</h3></header><div class=panel-body><div class=form-group><label class="col-md-3 control-label" for=inputDefault>Nombre</label><div class=col-md-6><input class=form-control name=name ng-model=user.name></div></div><div class=form-group><label class="col-md-3 control-label" for=inputDefault>¿De dónde eres?</label><div class=col-md-6><input class=form-control name=location ng-model=user.location></div></div><div class=form-group><label class="col-md-3 control-label" for=inputDefault>Web Personal</label><div class=col-md-6><input class=form-control name=web ng-model=user.web placeholder=http://www.subexpuesta.com></div></div><div class=form-group><label class="col-md-3 control-label" for=inputDefault>Facebook url</label><div class=col-md-6><input class=form-control name=urlFacebook ng-model=user.urlFacebook placeholder=https://www.facebook.com/subexpuesta></div></div><div class=form-group><label class="col-md-3 control-label" for=inputDefault>Twitter url</label><div class=col-md-6><input class=form-control name=urlTwitter ng-model=user.urlTwitter placeholder=https://twitter.com/subexpuesta_com></div></div><div class=form-group><label class="col-md-3 control-label" for=inputDefault>Descríbete</label><div class=col-md-6><textarea type=text rows=4 class=form-control name=web ng-model=user.descripcion></textarea></div></div><div class=form-group><label class="col-md-3 control-label" for=inputSuccess>Alertas</label><div class=col-md-6><div class=checkbox><label><input type=checkbox id=participarConcursos ng-model=user.participarConcursos> Me gustaría participar en sorteos de material fotográfico, linciencias o similar.</label></div><div class=checkbox><label><input type=checkbox id=newsletter ng-model=user.newsletter> Me gustaría recibir el boletín de noticias</label></div></div></div><div class=form-group><a href="" class="col-md-3 control-label" for=inputDefault ng-click="isCollapsed = !isCollapsed">Editar Avatar <i ng-class="isCollapsed ? \'fa fa-chevron-right\' : \'fa fa-chevron-down\'"></i></a><div class=col-md-6><div collapse=isCollapsed><input type=file id=fileInput class="form-control"><div style="background: #E4E4E4;overflow: hidden;width:538px;height:350px; margin-top:15px"><img-crop image=myImage area-type=square result-image=myCroppedImage result-image-size=120></img-crop></div><div>Imagen final:</div><div><img ng-src="{{myCroppedImage}}"></div></div></div></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label" for=inputDefault>Tu contraseña<span style=color:red>*</span></label><div class=col-md-6><input type=password name=passwordActual class=form-control ng-model=passwordActual mongoose-error required><alert type=danger ng-show="form.passwordActual.$error.required && submitted" style=margin-top:10px>Debes indicar tu contraseña actual</alert></div></div><div class=col-md-9><alert type=success close=closeAlert($index) ng-show="numeroGuardar==0">{{message}}</alert><alert type=danger close=closeAlert($index) ng-show="errors.other.length>0">{{ errors.other }}</alert><button id=guardar class="btn btn-lg btn-primary pull-right" type=submit ng-click=actualizarDatos(form,0)>Guardar</button></div></div></div></section><section class=panel><header class=panel-heading><div class=panel-actions></div><h3 style=color:#ed9c28>Avisos</h3></header><div class=panel-body><div class=form-group><label class="col-md-3 control-label" for=inputDefault>¿Cerca de dónde?</label><div class=col-md-6><div ng-if=showMap><ui-gmap-google-map center=map.center zoom=map.zoom events=map.events><ui-gmap-marker coords=marker.coords options=marker.options events=marker.events idkey=marker.id icon="{url:\'http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png\' }"></ui-gmap-marker><ui-gmap-circle center=map.circle.center radius=map.circle.radius fill=map.circle.fill stroke=map.circle.stroke clickable=map.circle.clickable draggable editable=map.circle.editable visible events=map.circle.events></ui-gmap-circle></ui-gmap-google-map><span ng-show="user.coordenadasAvisoLatitud>0">Latitud: {{user.coordenadasAvisoLatitud}} Longitud: {{user.coordenadasAvisoLongitud}}</span></div></div></div><div class=form-group ng-show="marker.coords.latitude>0"><label class="col-md-3 control-label" for=inputDefault>Radio (en kilometros)</label><div class=col-md-6><!--<input type="text" name="radioAvi" class="form-control" ng-model="user.radioAviso">\n                <div range-slider min="0" max="600" model-min="demo2.range.min" model-max="demo2.range.max" pin-handle="min"  disabled="false" style="margin-bottom:0px;"></div> --><div range-slider on-handle-up=sliderChange() min=0 max=500 model-max=sliderValue pin-handle=min style=margin-bottom:0px></div><div class=row><div class=col-md-12><p ng-show="sliderValue>0" class=text-right>{{sliderValue}}km</p></div></div></div></div><div class=form-group ng-show="sliderValue>0"><label class="col-md-3 control-label" for=inputDefault>Frecuencia de aviso</label><div class=col-md-6><select ng-model=user.frecuenciaAviso ng-options="item.id as item.name for item in items"></select></div></div><!--<div class="form-group">\n              <label class="col-md-3 control-label" for="inputDefault">Cancelar avisos</label>\n              <div class="col-md-6">\n                \n               <input type="checkbox" id="cancelarAvisos" ng-model="cancelarAvisos">\n              </div>\n            </div>  --><div class=form-group ng-show="user.frecuenciaAviso>-1"><label class="col-md-3 control-label" for=inputDefault></label><div class=col-md-6></div></div><div class=panel-body ng-show="user.frecuenciaAviso>0"><div class=form-group><label class="col-md-3 control-label" for=inputDefault>Tu contraseña<span style=color:red>*</span></label><div class=col-md-6><input type=password name=passwordActual class=form-control ng-model=passwordActual mongoose-error required><alert type=danger ng-show="form.passwordActual.$error.required && submitted" style=margin-top:10px>Debes indicar tu contraseña actual</alert></div></div><div class=col-md-9><alert type=warning close=closeAlert($index) ng-show="numeroGuardar==1">{{message}}</alert><alert type=danger close=closeAlert($index) ng-show="errors.other.length>0">{{ errors.other }}</alert><button id=guardar class="btn btn-lg btn-warning pull-right" type=submit ng-click=actualizarDatos(form,1)>Guardar</button></div></div></div></section><section class=panel><header class=panel-heading><div class=panel-actions></div><h3 style=color:#47a447>Cambiar contraseña</h3></header><div class=panel-body><div class=form-group><label class="col-md-3 control-label" for=inputDefault>Nueva contraseña</label><div class=col-md-6><input type=password name=newPassword class=form-control ng-model=user.newPassword ng-minlength="6"><p class=help-block ng-show="form.newPassword.$error.minlength && (form.newPassword.$dirty || submitted)">La contraseña debe tener al menos 6 caracteres.</p></div></div><div class=form-group><label class="col-md-3 control-label" for=inputDefault>Repetir nueva contraseña</label><div class=col-md-6><input type=password name=renewPassword class=form-control ng-model=renewPassword></div></div><div class=col-md-9><alert type=danger close=closeAlert() ng-show="errors.passwordIguales.length>0">{{ errors.passwordIguales }}</alert></div></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label" for=inputDefault>Tu actual contraseña<span style=color:red>*</span></label><div class=col-md-6><input type=password name=passwordActual class=form-control ng-model=passwordActual mongoose-error required><alert type=danger ng-show="form.passwordActual.$error.required && submitted" style=margin-top:10px>Debes indicar tu contraseña actual</alert></div></div><div class=col-md-9><alert type=success close=closeAlert($index) ng-show="numeroGuardar==2">{{message}}</alert><alert type=danger close=closeAlert($index) ng-show="errors.other.length>0">{{ errors.other }}</alert><button id=guardar class="btn btn-lg btn-success pull-right" type=submit ng-click=actualizarDatos(form,2)>Guardar</button></div></div></section><!--<section class="panel">\n          <header class="panel-heading">\n            <div class="panel-actions">\n            </div>\n            \n            <h2 class="panel-title">Vuelve a introducir tu contraseña</h2>\n          </header>\n          <div class="panel-body">            \n            \n            <div class="form-group">\n              <label class="col-md-3 control-label" for="inputDefault">Tu actual contraseña<span style="color:red">*</span></label>\n              <div class="col-md-6">\n                <input type="password" name="passwordActual" class="form-control" ng-model="passwordActual"\n                mongoose-error required/>\n                <alert type="danger"  ng-show="form.passwordActual.$error.required && submitted" style="margin-top:10px;"> Debes indicar tu contraseña actual</alert>\n              </div>\n\n            </div>   \n            <div class="col-md-9">         \n            <alert type="success"  close="closeAlert($index)" ng-show="message.length>0"> {{message}}</alert>\n            <alert type="danger"  close="closeAlert($index)" ng-show="errors.other.length>0"> {{ errors.other }}</alert>\n            <button id="guardar" class="btn btn-lg btn-success pull-right" type="submit">Guardar</button>\n            </div>\n            \n            \n          </div>\n        </section>--></form></div></div></div>'),a.put("app/account/signup/signup.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Crear Cuenta</li></ul></div></div><div class=row><div class=col-md-12><h1>Crear Cuenta</h1></div></div></div></section><div class=container><div class=row><div class=col-md-12><div class="row featured-boxes login"><div class="col-md-6 col-md-offset-3"><div class="featured-box featured-box-secundary default info-content"><div class=box-content><h4>Crear Cuenta</h4><form class=form name=form ng-submit=register(form) novalidate><div class=row><div class=form-group ng-class="{ \'has-success\': form.username.$valid && submitted,\n                    \'has-error\': form.username.$invalid && submitted }"><label>Usuario</label><label ng-hide="user.username.length>0" style=color:red>*</label><input name=username class=form-control ng-model=user.username required mongoose-error><p class=help-block ng-show="form.username.$error.required && submitted">Olvidaste poner tu nombre de usuario</p><p class=help-block ng-show=form.username.$error.mongoose>{{ errors.username }}</p></div></div><div class=row><div class=form-group ng-class="{ \'has-success\': form.email.$valid && submitted,\n                    \'has-error\': form.email.$invalid && submitted }"><label>Email</label><label ng-hide="user.email.length>0" style=color:red>*</label><input type=email name=email class=form-control ng-model=user.email required mongoose-error><p class=help-block ng-show="form.email.$error.email && submitted">No parece un email correcto</p><p class=help-block ng-show="form.email.$error.required && submitted">Olvidaste poner tu correo</p><p class=help-block ng-show=form.email.$error.mongoose>{{ errors.email }}</p></div></div><div class=row><div class=form-group ng-class="{ \'has-success\': form.password.$valid && submitted,\n                    \'has-error\': form.password.$invalid && submitted }"><label>Contraseña</label><label ng-hide="user.password.length>0" style=color:red>*</label><input type=password name=password class=form-control ng-model=user.password ng-minlength=6 required mongoose-error><p class=help-block ng-show="(form.password.$error.minlength || form.password.$error.required) && submitted">La contraseña debe tener al menos 6 caracteres.</p><p class=help-block ng-show=form.password.$error.mongoose>{{ errors.password }}</p></div></div><div class=row><div class=form-group ng-class="{ \'has-success\': form.password.$valid && submitted,\n                    \'has-error\': form.password.$invalid && submitted }"><label>Repetir Contraseña</label><label ng-hide="user.passwordagain.length>0" style=color:red>*</label><input type=password name=passwordagain class=form-control ng-model=user.passwordagain required><p class=help-block ng-show="(user.password != user.passwordagain) && submitted">No coinciden las contraseñas</p></div></div><div class=row><div class=form-group><label>¿Cómo nos conocistes?</label><select class=form-control ng-model=user.origen><option value=""></option><option value=Facebook>Facebook</option><option value=Twitter>Twitter</option><option value="Foros de fotografia">Foros de fotografía</option><option value=Google>Google</option><option value="Un amigo de hablo">Un amigo me habló de la web</option><option value=Otros>Otros</option></select></div></div><div ng-if="user.origen===\'Otros\'" class=row><div class=form-group><label>¿Nos lo puedes indicar?</label><input name=origenTexto class=form-control ng-model=user.origenTexto></div></div><p style=text-align:right><label style=color:red>*</label>Campos obligatorios</p><div class=row><div class=col-md-6><a href=/login>¿Tienes ya cuenta? Inicia Sesión</a></div><div class=col-md-6><input type=submit value=Crear class="btn btn-success btn-lg pull-right"></div></div></form></div></div></div></div></div></div></div>'),a.put("app/admin/admin.html",'<div class=container><nav class="navbar navbar-default"><div class=container-fluid><!-- Brand and toggle get grouped for better mobile display --><div class=navbar-header><a class=navbar-brand href=#>Admin panel</a></div><!-- Collect the nav links, forms, and other content for toggling --><div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1><ul class="nav navbar-nav navbar-right"><li><a href=/admin/mejora>Mejoras</a></li><li><a href=/admin/boletin>Boletin</a></li><li><a href=/admin/usuarios>Usuarios</a></li><li><a href=/admin/listado-eventos>Eventos</a></li><li><a href=/admin/localizaciones>Localizaciones</a></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown role=button aria-haspopup=true aria-expanded=false>Articulos <span class=caret></span></a><ul class=dropdown-menu><li><a href=/admin/crear-articulo>Crear Nuevo</a></li><li><a href=#>Borrar articulo</a></li><li><a href=#>Modificar articulos</a></li><li role=separator class=divider></li><li><a href=/admin/listado-articulos>Ver articulos</a></li></ul></li></ul></div><!-- /.navbar-collapse --></div><!-- /.container-fluid --></nav></div><!--\n<div class="container">\n\n  <p>The delete user and user index api routes are restricted to users with the \'admin\' role.</p>\n  <ul class="list-group">\n    <li class="list-group-item" ng-repeat="user in users">\n        <strong>{{user.name}}</strong><br>\n        <span class="text-muted">{{user.email}}</span>\n        <a ng-click="delete(user)" class="trash"><span class="glyphicon glyphicon-trash pull-right"></span></a>\n    </li>\n  </ul>\n</div>-->'),a.put("app/articulo/admin/crear-articulo.html",'<div class=container><div class=row><form ng-submit=crearArticulo()><div class=form-group><label>Titulo</label><input class=form-control id=titulo placeholder=Titulo ng-model=titulo></div><div class=form-group><label>Texto plano</label><textarea class=form-control id=contenido ng-model=contenido></textarea></div><div class=form-group><label>Texto HTML</label><textarea class=form-control id=contenidoHTML ng-model=contenidoHTML></textarea></div><div class=form-group><label>Autor</label><textarea class=form-control id=autor placeholder=subexpuesta.com ng-model=autor></textarea></div><div class=form-group><label>URL Autor</label><textarea class=form-control id=urlAutor placeholder=http://www.subexpuesta.com ng-model=urlAutor></textarea></div><div class=form-group><label>Imagen</label><textarea class=form-control id=imagen placeholder="url de la imagen. 1280x500" ng-model=imagen></textarea></div><div class=form-group><label>Categoria</label><select ng-model=model.id convert-to-number><option value=0>General</option><option value=1>A fondo</option></select></div><button type=text class="btn btn-default">Crear</button></form><p ng-show=articuloCreado>Articulo creado correctamente</p></div></div>'),a.put("app/articulo/admin/lista-articulos.html",'<div class=container><div class=row><table class="table table-bordered table-striped mb-none" id=datatable-default><thead><tr><th>Fecha</th><th width=200px>Titulo</th><th>Contenido</th><th width=200px>Acciones</th></tr></thead><tbody><tr ng-repeat="articulo in listaArticulos" class=gradeX><td>{{articulo.fechaCreacion | date:\'dd/MM/yyyy\'}}</td><td width=200px>{{articulo.titulo}}</td><td>{{articulo.contenido | limitTo: 200}}</td><td width=200px><a href=#>Ver</a> |<a href="/admin/modificar-articulos/{{articulo._id}}/">Modificar</a> | <a href=#>Borrar</a></td></tr></tbody></table></div></div>'),a.put("app/articulo/admin/modificar-articulo.html",'<div class=container><h2>Modificar articulo</h2><div class=row><form ng-submit=modificarArticulo()><div class=form-group><label>Titulo</label><input class=form-control id=titulo placeholder=Titulo ng-model=titulo></div><div class=form-group><label>Texto plano</label><textarea class=form-control id=contenido ng-model=contenido></textarea></div><div class=form-group><label>Texto HTML</label><textarea class=form-control id=contenidoHTML ng-model=contenidoHTML></textarea></div><div class=form-group><label>Autor</label><textarea class=form-control id=autor placeholder=subexpuesta.com ng-model=autor></textarea></div><div class=form-group><label>Imagen</label><textarea class=form-control id=imagen placeholder="url de la imagen. 1280x500" ng-model=imagen></textarea></div><div class=form-group><label>Categoria</label><select ng-model=model.id convert-to-number><option value=0>General</option><option value=1>A fondo</option></select></div><button type=text class="btn btn-default">Modificar</button></form><p ng-show=articuloModificado>Articulo modificado correctamente</p></div></div>'),
a.put("app/articulo/articulo.html","<div class=col-md-12>This is the articulo view.</div>"),a.put("app/articulo/lista-articulos.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Home</a></li><li class=active>Blog</li></ul></div></div><div class=row><div class=col-md-12><h1>Blog</h1></div></div></div></section><div class=container><div class=row><div class=col-md-9><div class=blog-posts><article ng-repeat="articulo in listaArticulos | orderBy: \'-fechaCreacion\'" class="post post-large"><div class="post-image single"><img class=img-thumbnail src={{articulo.imagen}} alt={{articulo.titulo}}></div><div class=post-date><span class=day>{{articulo.fechaCreacion | date:\'d\'}}</span> <span class=month>{{articulo.fechaCreacion | date:\'MMM\'}}</span></div><div class=post-content><h2><a href="/articulo/{{articulo._id}}/{{articulo.titulo | seo}}">{{articulo.titulo}}</a></h2><p>{{articulo.contenido | limitTo: 300}} [...]</p><div class=post-meta><span><i class="fa fa-user"></i> Por <a href={{articulo.urlAutor}}>{{articulo.autor}}</a></span><!--<span><i class="fa fa-tag"></i> <a href="#">Duis</a>, <a href="#">News</a> </span>--><!--<span><i class="fa fa-comments"></i> <a href="#">12 Comments</a></span>--> <a href="/articulo/{{articulo._id}}/{{articulo.titulo | seo}}" class="btn btn-xs btn-primary pull-right">Leer más...</a></div></div></article><!--<ul class="pagination pagination-lg pull-right">\r\n									<li><a href="#">«</a></li>\r\n									<li class="active"><a href="#">1</a></li>\r\n									<li><a href="#">2</a></li>\r\n									<li><a href="#">3</a></li>\r\n									<li><a href="#">»</a></li>\r\n								</ul>--></div></div><div class=col-md-3><aside class=sidebar><!--<form>\r\n									<div class="input-group input-group-lg">\r\n										<input class="form-control" placeholder="Search..." name="s" id="s" type="text">\r\n										<span class="input-group-btn">\r\n											<button type="submit" class="btn btn-primary btn-lg"><i class="fa fa-search"></i></button>\r\n										</span>\r\n									</div>\r\n								</form>\r\n\r\n								<hr />--><h4>Categorías</h4><ul class="nav nav-list primary push-bottom"><li><a href=/blog/general>General</a></li><li><a href=/blog/afondo>A fondo</a></li></ul><h4>Be <strong>Social</strong></h4><a href=https://www.facebook.com/subexpuesta target=_blank><i class="fa fa-facebook-square" style="font-size: 40px"></i></a> <a href=https://twitter.com/subexpuesta_com target=_blank><i class="fa fa-twitter-square" style="font-size: 40px"></i></a> <a href=https://twitter.com/subexpuesta_com target=_blank><i class="fa fa-instagram" style="font-size: 40px"></i></a> <a href=https://plus.google.com/u/0/b/106789030605644022112/dashboard/overview target=_blank><i class="fa fa-google-plus-square" style="font-size: 40px"></i></a><div class=tabs style=margin-top:20px><ul class="nav nav-tabs"><li class=active><a href=#popularPosts data-toggle=tab><i class="fa fa-star"></i> Popular</a></li></ul><div class=tab-content><div class="tab-pane active" id=popularPosts><ul class=simple-post-list><li ng-repeat="articulo in listaArticulos"><div class=post-image><div class=img-thumbnail><a href=blog-post.html><img src={{articulo.imagen}} width=50px height=50px; alt={{articulo.titulo}}></a></div></div><div class=post-info><a href="/articulo/{{articulo._id}}/{{articulo.titulo | seo}}">{{articulo.titulo}}</a><div class=post-meta>{{articulo.fechaCreacion | date:\'d MMM yyyy\'}}</div></div></li></ul></div><!--<div class="tab-pane" id="recentPosts">\r\n											<ul class="simple-post-list">\r\n												<li>\r\n													<div class="post-image">\r\n														<div class="img-thumbnail">\r\n															<a href="blog-post.html">\r\n																<img src="img/blog/blog-thumb-2.jpg" alt="">\r\n															</a>\r\n														</div>\r\n													</div>\r\n													<div class="post-info">\r\n														<a href="blog-post.html">Vitae Nibh Un Odiosters</a>\r\n														<div class="post-meta">\r\n															 Jan 10, 2013\r\n														</div>\r\n													</div>\r\n												</li>\r\n												<li>\r\n													<div class="post-image">\r\n														<div class="img-thumbnail">\r\n															<a href="blog-post.html">\r\n																<img src="img/blog/blog-thumb-3.jpg" alt="">\r\n															</a>\r\n														</div>\r\n													</div>\r\n													<div class="post-info">\r\n														<a href="blog-post.html">Odiosters Nullam Vitae</a>\r\n														<div class="post-meta">\r\n															 Jan 10, 2013\r\n														</div>\r\n													</div>\r\n												</li>\r\n												<li>\r\n													<div class="post-image">\r\n														<div class="img-thumbnail">\r\n															<a href="blog-post.html">\r\n																<img src="img/blog/blog-thumb-1.jpg" alt="">\r\n															</a>\r\n														</div>\r\n													</div>\r\n													<div class="post-info">\r\n														<a href="blog-post.html">Nullam Vitae Nibh Un Odiosters</a>\r\n														<div class="post-meta">\r\n															 Jan 10, 2013\r\n														</div>\r\n													</div>\r\n												</li>\r\n											</ul>\r\n										</div>--></div></div><hr><h4>Colabora</h4><p>¿Te apetece contar tú historia, compartir cómo has encontrado una localización o quieres dar detalle de cómo has realizado una fotografía? Ponte en <a href=/contacto>contacto</a> con nosotros y cuéntanos.</p></aside></div></div></div>'),a.put("app/articulo/single-articulo.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Home</a></li><li class=active>Blog</li></ul></div></div><div class=row><div class=col-md-12><h1>{{singleArticulo.titulo}}</h1></div></div></div></section><div class=container><div class=row><div class=col-md-9><div class="blog-posts single-post"><article class="post post-large blog-single-post"><div class=post-image><div class=owl-carousel data-plugin-options={&quot;items&quot;:1}><div><div class=img-thumbnail><img class=img-responsive src={{singleArticulo.imagen}} alt={{singleArticulo.titulo}}></div></div></div></div><div class=post-date><span class=day>{{singleArticulo.fechaCreacion | date: \'d\'}}</span> <span class=month>{{singleArticulo.fechaCreacion | date: \'MMM\'}}</span></div><div class=post-content><h2><a href=blog-post.html>{{singleArticulo.titulo}}</a></h2><div class=post-meta><span><i class="fa fa-user"></i> Por <a href={{singleArticulo.urlAutor}}>{{singleArticulo.autor}}</a></span><!--<span><i class="fa fa-tag"></i> <a href="#">Duis</a>, <a href="#">News</a> </span>--> <span><i class="fa fa-comments"></i> <a href=#>{{singleArticulo.comentarios.length}} Comentarios</a></span></div><div ng-bind-html=singleArticulo.contenidoHTML></div><h3 style=margin-top:25px>Autor</h3><p align=right><a href={{singleArticulo.urlAutor}}>{{singleArticulo.autor}}</a></p><div class="post-block post-share"><h3><i class="fa fa-share"></i>Compartir artículo</h3><!-- AddThis Button BEGIN --><div class="addthis_toolbox addthis_default_style"><a class=addthis_button_facebook_like fb:like:layout=button_count></a> <a class=addthis_button_tweet></a> <a class=addthis_button_pinterest_pinit></a> <a class="addthis_counter addthis_pill_style"></a></div><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=xa-50faf75173aadc53"></script><!-- AddThis Button END --></div><!--<div class="post-block post-author clearfix">\r\n											<h3><i class="fa fa-user"></i>Autor</h3>\r\n											<div class="img-thumbnail">\r\n												<a href="blog-post.html">\r\n													<img src="assets/images/avatar.jpg" alt="">\r\n												</a>\r\n											</div>\r\n											<p><strong class="name"><a href="#">{{articulo.autor}}</a></strong></p>\r\n											<p>d </p>\r\n										</div>--><div class="post-block post-comments clearfix" ng-hide="singleArticulo.comentarios.length===0"><h3><i class="fa fa-comments"></i>Comentarios ({{singleArticulo.comentarios.length}})</h3><ul class=comments><li ng-repeat="comentario in singleArticulo.comentarios"><div class=comment><div class=img-thumbnail style=border:0px><i class="fa fa-user" style="font-size: 84px;margin-left: 17px;margin-top: 4px; color:{{listaColores[$index%9]}}"></i></div><div class=comment-block><div class=comment-arrow></div><span class=comment-by><strong>{{comentario.nombre}}</strong></span><p>{{comentario.comentario}}</p><span class="date pull-right">{{comentario.fechaComentario | date: \'d MMM yyyy h:mm:ss a\'}}</span></div></div></li></ul></div><div class="post-block post-leave-comment"><h3>Dejar un comentario</h3><div class=row><div class=form-group><div class=col-md-6><label>Tu nombre <span ng-show="!comentarioArticulo.nombre.length>0" style=color:red>*</span></label><input maxlength=100 class=form-control ng-model=comentarioArticulo.nombre></div><div class=col-md-6><label>Tu email <span ng-show="!comentarioArticulo.direccion.length>0" style=color:red>*</span></label><input type=email maxlength=100 class=form-control ng-model=comentarioArticulo.direccion></div></div></div><div class=row><div class=form-group><div class=col-md-12><label>Comentario <span ng-show="!comentarioArticulo.comentario.length>0" style=color:red>*</span></label><textarea maxlength=5000 rows=10 class=form-control ng-model=comentarioArticulo.comentario></textarea></div></div></div><div class=row><div class=col-md-12><input ng-click=enviarComentario() ng-disabled="comentarioArticulo.nombre.length===0 || comentarioArticulo.direccion.length===0 || comentarioArticulo.comentario.length===0" value="Enviar Comentario" class="btn btn-primary btn-lg" data-loading-text=Loading...></div></div></div></div></article></div></div><div class=col-md-3><aside class=sidebar><!--<form>\r\n									<div class="input-group input-group-lg">\r\n										<input class="form-control" placeholder="Search..." name="s" id="s" type="text">\r\n										<span class="input-group-btn">\r\n											<button type="submit" class="btn btn-primary btn-lg"><i class="fa fa-search"></i></button>\r\n										</span>\r\n									</div>\r\n								</form>\r\n\r\n								<hr />--><h4>Categorías</h4><ul class="nav nav-list primary push-bottom"><li><a href=/blog/general>General</a></li><li><a href=/blog/afondo>A fondo</a></li></ul><h4>Be <strong>Social</strong></h4><a href=https://www.facebook.com/subexpuesta target=_blank><i class="fa fa-facebook-square" style="font-size: 40px"></i></a> <a href=https://twitter.com/subexpuesta_com target=_blank><i class="fa fa-twitter-square" style="font-size: 40px"></i></a> <a href=https://twitter.com/subexpuesta_com target=_blank><i class="fa fa-instagram" style="font-size: 40px"></i></a> <a href=https://plus.google.com/u/0/b/106789030605644022112/dashboard/overview target=_blank><i class="fa fa-google-plus-square" style="font-size: 40px"></i></a><div class=tabs style=margin-top:20px><ul class="nav nav-tabs"><li class=active><a href=#popularPosts data-toggle=tab><i class="fa fa-star"></i> Popular</a></li></ul><div class=tab-content><div class="tab-pane active" id=popularPosts><ul class=simple-post-list><li ng-repeat="articulo in listaArticulos"><div class=post-image><div class=img-thumbnail><a href=blog-post.html><img src={{articulo.imagen}} width=50px height=50px; alt={{articulo.titulo}}></a></div></div><div class=post-info><a href="/articulo/{{articulo._id}}/{{articulo.titulo | seo}}">{{articulo.titulo}}</a><div class=post-meta>{{articulo.fechaCreacion | date:\'d MMM yyyy\'}}</div></div></li></ul></div><!--<div class="tab-pane" id="recentPosts">\r\n											<ul class="simple-post-list">\r\n												<li>\r\n													<div class="post-image">\r\n														<div class="img-thumbnail">\r\n															<a href="blog-post.html">\r\n																<img src="img/blog/blog-thumb-2.jpg" alt="">\r\n															</a>\r\n														</div>\r\n													</div>\r\n													<div class="post-info">\r\n														<a href="blog-post.html">Vitae Nibh Un Odiosters</a>\r\n														<div class="post-meta">\r\n															 Jan 10, 2013\r\n														</div>\r\n													</div>\r\n												</li>\r\n												<li>\r\n													<div class="post-image">\r\n														<div class="img-thumbnail">\r\n															<a href="blog-post.html">\r\n																<img src="img/blog/blog-thumb-3.jpg" alt="">\r\n															</a>\r\n														</div>\r\n													</div>\r\n													<div class="post-info">\r\n														<a href="blog-post.html">Odiosters Nullam Vitae</a>\r\n														<div class="post-meta">\r\n															 Jan 10, 2013\r\n														</div>\r\n													</div>\r\n												</li>\r\n												<li>\r\n													<div class="post-image">\r\n														<div class="img-thumbnail">\r\n															<a href="blog-post.html">\r\n																<img src="img/blog/blog-thumb-1.jpg" alt="">\r\n															</a>\r\n														</div>\r\n													</div>\r\n													<div class="post-info">\r\n														<a href="blog-post.html">Nullam Vitae Nibh Un Odiosters</a>\r\n														<div class="post-meta">\r\n															 Jan 10, 2013\r\n														</div>\r\n													</div>\r\n												</li>\r\n											</ul>\r\n										</div>--></div></div><hr><h4>Colabora</h4><p>¿Te apetece contar tú historia, compartir cómo has encontrado una localización o quieres dar detalle de cómo has realizado una fotografía? Ponte en <a href=/contacto>contacto</a> con nosotros y cuéntanos.</p></aside></div></div></div>'),a.put("app/contacto/contacto.html",'<div role=main class=main><section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href="/">Inicio</a></li><li class=active>Contacta con Nosotros</li></ul></div></div><div class=row><div class=col-md-12><h1>Contacta con Nosotros</h1></div></div></div></section><div class=container><div class=row><div class=col-md-6><ul><li ng-repeat="miembro in miembros">{{miembro.email_address}}</li></ul><h2 class=short><strong>Escríbenos</strong></h2><form id=contactForm><div class=row><div class=form-group><div class=col-md-6><label>Tu nombre <span ng-show="!nombre.length>0" style=color:red>*</span></label><input maxlength=100 class=form-control name=name id=name ng-model=nombre required></div><div class=col-md-6><label>Tu email <span ng-show="!direccion.length>0" style=color:red>*</span></label><input maxlength=100 class=form-control name=direccion id=direccion ng-model=direccion required></div></div></div><div class=row><div class=form-group><div class=col-md-12><label>Asunto</label><input maxlength=100 class=form-control ng-model=asunto name=subject id=subject></div></div></div><div class=row><div class=form-group><div class=col-md-12><label>Mensaje <span ng-show="!mensaje.length>0" style=color:red>*</span></label><textarea maxlength=5000 ng-model=mensaje rows=10 class=form-control name=mensaje id=mensaje required></textarea></div></div></div><div><span style=color:red>*</span> Campos obligatorios</div><div class="alert alert-success" id=contactSuccess ng-show=enviado><strong>Enviado correctamente!</strong> En la mayor brevedad posible nos pondremos en contacto contigo. Gracias!</div><div ng-show=enviando class=pull-right><strong style=font-size:24px><i class="fa fa-spinner fa-pulse"></i></strong></div><div class="alert alert-danger" id=contactError ng-show=mostrarError><strong>Error!</strong> Ha habido un problema en el envio. Por favor intentelo pasado unos minutos.</div><div class=row><div class=col-md-12><input ng-click=enviarCorreo() value=Enviar ng-disabled="nombre.length===0 || direccion.length===0 || mensaje.length===0" class="btn btn-success btn-lg pull-right" data-loading-text=Loading...></div></div></form></div><div class=col-md-6><h4 class=push-top>Estamos en <strong>contacto</strong></h4><p>Cualquier problema, sugerencia o incidencia que encuentres con la web, ponte en contacto con nosotros. Lo resolveremos lo más rápido posible!</p><hr><h4>La <strong>Oficina</strong></h4><ul class=list-unstyled><li><i class="fa fa-map-marker"></i> <strong>Dirección:</strong> 20 Wellwood Street, Belfast, Northen Ireland</li><li><i class="fa fa-phone"></i> <strong>Móvil:</strong> (+44) 7938 653 915</li></ul><hr><h4>Be <strong>Social</strong></h4><a href=https://www.facebook.com/subexpuesta target=_blank><i class="fa fa-facebook-square" style="font-size: 90px"></i></a> <a href=https://twitter.com/subexpuesta_com target=_blank><i class="fa fa-twitter-square" style="font-size: 90px"></i></a> <a href=https://twitter.com/subexpuesta_com target=_blank><i class="fa fa-instagram" style="font-size: 90px"></i></a> <a href=https://plus.google.com/u/0/b/106789030605644022112/dashboard/overview target=_blank><i class="fa fa-google-plus-square" style="font-size: 90px"></i></a></div></div></div></div><!--<section class="call-to-action featured footer">\n				<div class="container">\n					<div class="row">\n						<div class="center">\n							<h3>Porto is <strong>everything</strong> you need to create an <strong>awesome</strong> website! <a href="http://themeforest.net/item/porto-responsive-html5-template/4106987" target="_blank" class="btn btn-lg btn-primary" data-appear-animation="bounceIn">Buy Now!</a> <span class="arrow hlb hidden-xs hidden-sm hidden-md" data-appear-animation="rotateInUpLeft" style="top: -22px;"></span></h3>\n						</div>\n					</div>\n				</div>\n			</section>-->'),a.put("app/evento/admin/crear-evento.html",'<style>.angular-google-map-container { height: 400px; width: 700px;  }\r\n.angular-google-map-container input[type=text]{\r\n	width:400px;\r\n	color:navy;\r\n}</style><div class=container><div class=row><form><div class="col-md-8 form-group"><label>Titulo</label><input class=form-control id=titulo ng-model=evento.titulo></div><div class="col-md-4 form-group"><label>Fecha</label><p class=input-group><input class=form-control datepicker-popup=dd/MM/yyyy ng-model=dt is-open=opened datepicker-options=dateOptions ng-required=true close-text="Cerrar"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click=open($event)><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class="col-md-8 form-group"><label>Organizador</label><input class=form-control id=organizador ng-model=evento.organizador></div><div class="col-md-4 form-group"><label>Capacidad</label><input class=form-control id=capacidad ng-model=evento.capacidad></div><div class="col-md-8 form-group"><label>Localidad</label><input class=form-control id=localidad ng-model=evento.localidad></div><div class="col-md-4 form-group"><label>Direccion</label><input class=form-control id=direccion ng-model=evento.direccion></div><div class=row><div class="col-md-9 form-group"><label>Donde se realizara el evento?</label><div ng-if=showMap><ui-gmap-google-map center=map.center zoom=map.zoom events=map.events><!--<ui-gmap-search-box options="searchbox.options" template="searchbox.template"\r\n						events="searchbox.events" position="searchbox.position"></ui-gmap-search-box>--><ui-gmap-marker coords=marker.coords options=marker.options events=marker.events idkey=marker.id icon="{url:\'http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png\' }"></ui-gmap-marker></ui-gmap-google-map></div></div><div class="col-md-3 form-group"><label>Imagen</label><input type=file name=file class=cloudinary_fileupload multiple ng-model=$parent.files><div class=file ng-repeat="file in files"><div class=status ng-show=!finalizado>{{file.status}}</div><div class=progress-bar ng-show=!finalizado><div class=progress style="width: {{file.progress}}%" ng-init="progress=0"></div></div><h4 class=success ng-show=finalizado>Carga completada</h4><div class=file ng-repeat="file in files"><cl-image public-id={{file.result.public_id}} class="thumbnail inline" width=360px format="jpg"></div></div></div></div></form></div><br><div class="col-md-12 form-group"><label>Categoria</label><select ng-model=evento.categoria convert-to-number><option value=0>General</option><option value=1>Nocturna/Lightpainting</option><option value=2>Edicion</option><option value=3>Online</option><option value=4>Astrofotografia</option><option value=5>Paisaje</option></select></div><div class="col-md-8 form-group"><label>Descripcion</label><textarea class=form-control id=descripcion ng-model=evento.descripcion></textarea></div><div class="col-md-4 form-group"><label>Precio (euros)</label><input class=form-control id=precio ng-model=evento.precio></div><div class="col-md-12 form-group"><label>Mas informacion</label><input class=form-control id=web ng-model=evento.web placeholder="pagina web"></div><div class="col-md-12 form-group"><label>Email contacto</label><input class=form-control id=emailContacto ng-model=evento.emailContacto></div><div class="col-md-12 form-group"><label>Estado</label><select ng-model=evento.estado convert-to-number><option value=0>Activo</option><option value=1>Completo</option><option value=2>Cancelado</option><option value=3>Eliminado</option></select><label><input type=checkbox id=destacado ng-model=evento.destacado> Es Destacado</label></div><div class=col-md-12><button class="btn btn-lg btn-success pull-right" type=button ng-click=crearEvento() ng-disabled=localizacionCreada>Crear Evento</button></div><p ng-show=eventoCreado>Evento creado correctamente</p></div>'),a.put("app/evento/admin/lista-evento.html",'<div class=container><div class=row><a class="btn btn-success" href=/admin/crear-evento>Añade nuevo evento</a></div><div class=row style=margin-top:20px><table class="table table-bordered table-striped mb-none" id=datatable-default><thead><tr><th>Fecha</th><th width=200px>Titulo</th><th>Organizador</th><th>Lugar</th><th width=200px>Acciones</th></tr></thead><tbody><tr ng-repeat="evento in listaEventos" class=gradeX><td>{{evento.fecha | date:\'dd/MM/yyyy\'}}</td><td width=200px>{{evento.titulo}}</td><td>{{evento.organizador}}</td><td>{{evento.localidad}}</td><td width=200px><a href=#>Ver</a> |<a href="/admin/modificar-evento/{{evento._id}}/">Modificar</a> | <a href=#>Borrar</a></td></tr></tbody></table></div></div>'),a.put("app/evento/admin/modificar-evento.html",'<style>.angular-google-map-container { height: 400px; width: 700px;  }\r\n.angular-google-map-container input[type=text]{\r\n	width:400px;\r\n	color:navy;\r\n}</style><div class=container><div class=row><form><div class="col-md-8 form-group"><label>Titulo</label><input class=form-control id=titulo ng-model=evento.titulo></div><div class="col-md-4 form-group"><label>Fecha</label><p class=input-group><input class=form-control datepicker-popup=dd/MM/yyyy ng-model=evento.fecha is-open=opened datepicker-options=dateOptions ng-required=true close-text="Cerrar"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click=open($event)><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class="col-md-8 form-group"><label>Organizador</label><input class=form-control id=organizador ng-model=evento.organizador></div><div class="col-md-4 form-group"><label>Capacidad</label><input class=form-control id=capacidad ng-model=evento.capacidad></div><div class="col-md-8 form-group"><label>Localidad</label><input class=form-control id=localidad ng-model=evento.localidad></div><div class="col-md-4 form-group"><label>Direccion</label><input class=form-control id=direccion ng-model=evento.direccion></div><div class=row><div class="col-md-9 form-group"><label>Donde se realizara el evento?</label><div ng-if=showMap><ui-gmap-google-map center=map.center zoom=map.zoom events=map.events><!--<ui-gmap-search-box options="searchbox.options" template="searchbox.template"\r\n						events="searchbox.events" position="searchbox.position"></ui-gmap-search-box>--><ui-gmap-marker coords=marker.coords options=marker.options events=marker.events idkey=marker.id icon="{url:\'http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png\' }"></ui-gmap-marker></ui-gmap-google-map></div></div><div class="col-md-3 form-group"><label>Imagen</label><input type=file name=file class=cloudinary_fileupload multiple ng-model=$parent.files><div class=file ng-repeat="file in files"><div class=status ng-show=!finalizado>{{file.status}}</div><div class=progress-bar ng-show=!finalizado><div class=progress style="width: {{file.progress}}%" ng-init="progress=0"></div></div><h4 class=success ng-show=finalizado>Carga completada</h4><div class=file ng-repeat="file in files"><cl-image public-id={{file.result.public_id}} width=200 crop=fill class="thumbnail inline" format="jpg"></div></div><cl-image ng-show=!finalizado public-id={{evento.cloudinaryId}} width=200 crop=fill class="thumbnail inline" format="jpg"></div></div></form></div><br><div class="col-md-12 form-group"><label>Categoria</label><select ng-model=evento.categoria convert-to-number><option value=0>General</option><option value=1>Nocturna/Lightpainting</option><option value=2>Edicion</option><option value=3>Online</option><option value=4>Astrofotografia</option><option value=5>Paisaje</option></select></div><div class="col-md-8 form-group"><label>Descripcion</label><textarea class=form-control id=descripcion ng-model=evento.descripcion></textarea></div><div class="col-md-4 form-group"><label>Precio (euros)</label><input class=form-control id=precio ng-model=evento.precio></div><div class="col-md-12 form-group"><label>Mas informacion</label><input class=form-control id=web ng-model=evento.web placeholder="pagina web"></div><div class="col-md-12 form-group"><label>Email contacto</label><input class=form-control id=emailContacto ng-model=evento.emailContacto></div><div class="col-md-12 form-group"><label>Estado</label><select ng-model=evento.estado convert-to-number><option value=0>Activo</option><option value=1>Completo</option><option value=2>Cancelado</option><option value=3>Eliminado</option></select><label><input type=checkbox id=destacado ng-model=evento.destacado> Es Destacado</label></div><div class=col-md-12><button class="btn btn-lg btn-success pull-right" type=button ng-click=modificarEvento()>Modificar Evento</button></div><p ng-show=eventoModificado>Evento modificado correctamente</p></div>'),a.put("app/evento/evento-peticion.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Añade tu curso</li></ul></div></div><div class=row><div class=col-md-12><h1>Añade tu curso</h1></div></div></div></section><div class=container><div class=row><div class=col-md-12><p>Añade tu curso al listado de www.subexpuesta.com, tanto de fotografía nocturna, lightpainting, edición en photoshop o lightroom, o paisajístico. Podrás tener más difusión, poder llegar a más personas y completar tu aforo más fácilmente.</p></div></div><div class=row><div class="col-md-6 form-group"><label>Nombre</label><span ng-show="!peticion.nombre.length>0" style=color:red>*</span> <input class=form-control id=nombre ng-model="peticion.nombre"></div><div class="col-md-6 form-group"><label>Email</label><span ng-show="!peticion.email.length>0" style=color:red>*</span> <input class=form-control id=email ng-model="peticion.email"></div><div class="col-md-12 form-group"><label>Web del curso</label><span ng-show="!peticion.web.length>0" style=color:red>*</span> <input class=form-control rows=6 id=web ng-model=peticion.web></div><div class=col-md-12><alert type=danger close=closeAlert($index) ng-show="mensajeError.length>0">{{ mensajeError }}</alert><alert type=success close=closeMensaje($index) ng-show="mensajeExito.length>0">{{ mensajeExito }}</alert></div><div class="col-md-12 alert alert-danger" id=contactError ng-show=mostrarError><strong>Error!</strong> Ha habido un problema en el envio. Por favor intentelo pasado unos minutos.</div><div class="col-md-12 form-group"><p align=right><strong ng-show=enviando style=font-size:24px;margin-top:5px><i class="fa fa-spinner fa-pulse"></i></strong> <a class="btn btn-success" href=# ng-click=enviarMensaje()>Enviar</a></p></div></div></div>'),a.put("app/evento/evento-single.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>{{eventoActual.titulo}}</li></ul></div></div><div class=row><div class=col-md-12><h1>{{eventoActual.titulo}}</h1></div></div></div></section><div class=container><div class=row><div class=col-md-4><a href=http://res.cloudinary.com/djhqderty/image/upload/v1429114149/{{eventoActual.cloudinaryId}}.jpg target=_blank><img style="border: 0pt none; float:left; padding:0px 20px 10px 10px" src=http://res.cloudinary.com/djhqderty/image/upload/c_scale,q_29,w_350/v1429114149/{{eventoActual.cloudinaryId}}.jpg width=350px title="{{eventoActual.titulo}}"></a></div><div class=col-md-8><p><strong>Día:</strong> {{eventoActual.fecha | date:\'d/MM/yyyy\'}}</p><p><strong>Titulo:</strong> {{eventoActual.titulo}}</p><p><strong>Organizador:</strong> {{eventoActual.organizador}}</p><p><strong>Direccion:</strong> {{eventoActual.direccion}}, {{eventoActual.localidad}}</p><p><strong>Precio:</strong> {{eventoActual.precio + "€"}}</p><p ng-show="eventoActual.capacidad>0"><strong>Capacidad:</strong> {{eventoActual.capacidad}} personas</p><p><strong>Descripcion:</strong> {{eventoActual.descripcion}}</p><p><strong>Web:</strong> <a href={{eventoActual.web}} target=_blank>{{eventoActual.web}}</a></p></div></div><div class=row style=margin-top:30px><h3 style=margin-left:20px>Apúntate, pregunta alguna duda o reserva plaza!</h3><div class="col-md-6 form-group"><label>Nombre</label><span ng-show="!alumno.nombre.length>0" style=color:red>*</span> <input class=form-control id=nombre ng-model="alumno.nombre"></div><div class="col-md-6 form-group"><label>Email</label><span ng-show="!alumno.email.length>0" style=color:red>*</span> <input class=form-control id=email ng-model="alumno.email"></div><div class="col-md-12 form-group"><label>Mensaje</label><span ng-show="!alumno.mensaje.length>0" style=color:red>*</span><textarea type=text class=form-control rows=6 id=mensaje ng-model=alumno.mensaje></textarea></div><div class=col-md-12><alert type=danger close=closeAlert($index) ng-show="mensajeError.length>0">{{ mensajeError }}</alert><alert type=success close=closeMensaje($index) ng-show="mensajeExito.length>0">{{ mensajeExito }}</alert></div><div class="col-md-12 alert alert-danger" id=contactError ng-show=mostrarError><strong>Error!</strong> Ha habido un problema en el envio. Por favor intentelo pasado unos minutos.</div><div class="col-md-12 form-group"><p align=right><strong ng-show=enviando style=font-size:24px;margin-top:5px><i class="fa fa-spinner fa-pulse"></i></strong> <a class="btn btn-success" href=# ng-click=enviarMensaje()>Enviar</a></p></div></div></div>'),a.put("app/evento/evento.html",'<script type=application/ld+json id=json-ld-content></script><section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href="/">Inicio</a></li><li class=active>Cursos sobre fotografía nocturna y paisaje</li></ul></div></div><div class=row><div class=col-md-12><h1>Cursos sobre fotografía nocturna y paisaje</h1></div></div></div></section><div class=container><div class=row><div class="col-md-12 text-right" style=margin-right:20px><img src=/assets/images/evento-general.png width=20px title=General style="margin:0px 10px; 0px 10px"><span>General</span> <img src=/assets/images/evento-nocturna.png width=20px title=Nocturna/Lightpainting style="margin:0px 10px; 0px 10px"><span>Nocturna/Lightpainting</span> <img src=/assets/images/evento-edicion.png width=20px title=Edicion style="margin:0px 10px; 0px 10px"><span>Edición</span> <img src=/assets/images/evento-online.png width=20px title=Online style="margin:0px 10px; 0px 10px"><span>Online</span> <img src=/assets/images/evento-astrofotografia.png width=20px title=Astrofotografía style="margin:0px 10px; 0px 10px"><span>Astrofotografía</span> <img src=/assets/images/evento-paisaje.png width=20px title=Paisaje style="margin:0px 10px; 0px 10px"><span>Paisaje</span></div><div class=row style=margin-top:40px;margin-right:15px><div class=col-md-5></div><div class="col-md-7 input-group"><input class=form-control ng-model=busqueda placeholder="Busca por ciudad, por organizador, por descripcion..."> <span class=input-group-btn><button class="btn btn-default" type=button><i class="fa fa-search"></i></button></span></div></div><div class=col-md-12><accordion ng-repeat="(key, value) in eventosAgrupados | filter:busqueda"><h3 ng-show="(value | filter:busqueda).length > 0" style=color:#10066B>{{key | fechaEvento | filter:busqueda}}</h3><p ng-show="(value | filter:busqueda).length === 0 && $index===0">No se encontró ningún curso con tu búsqueda.</p><accordion-group is-open=evento.open ng-repeat="evento in value | filter:busqueda  |  orderBy:\'fecha\'"><accordion-heading><img src=/assets/images/{{tipoEventos[evento.categoria]}} style="margin-right:10px">{{evento.titulo}} por <strong>{{evento.organizador}}</strong><img ng-show="evento.estado==1" src=/assets/images/completo.png width=75px style="float:inherit"><i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': evento.open, \'glyphicon-chevron-right\': !evento.open}"></i></accordion-heading><div class=row><img style="border: 0pt none; float:left; padding:0px 20px 10px 10px" src=http://res.cloudinary.com/djhqderty/image/upload/c_scale,q_29,w_250/v1429114149/{{evento.cloudinaryId}}.jpg width=250px title="{{evento.titulo}}"><p><strong>Día:</strong> {{evento.fecha | date:\'d/MM/yyyy\'}}</p><p style=margin:0px><strong>Precio:</strong> {{evento.precio + "€"}}</p><p style=margin:0px><strong>Capacidad:</strong> {{evento.capacidad + " personas"}}</p><p style=margin:0px><strong>Lugar:</strong> {{evento.direccion}}, {{evento.localidad}}</p><p style=margin-left:11px><strong>Descripción:</strong> {{evento.descripcion}}</p><p style=margin-right:20px align=right><a class="btn btn-info" href="/cursos/{{evento._id}}/{{evento.titulo | seo}}">Más info</a></p></div></accordion-group></accordion></div><div class="col-md-offset-8 col-md-4"><label>Recibe los nuevos cursos a tu email</label><div class=input-group><input class=form-control placeholder="Tu Email" ng-model=correo type=email> <span class=input-group-btn><button class="btn btn-default" ng-click=guardarEmail() ng-disabled="!correo.length>0">Enviar</button></span></div><div class="alert alert-success" style=margin-top:10px ng-show=boletinCreado><strong>Guardado correctamente!</strong> Te avisaremos con los próximos cursos.</div></div><div class=col-md-12><a href=/cursos/agregar-nuevo-curso>[+] Añade tu curso a la lista</a></div></div></div>'),
a.put("app/localizaciones/admin/modificar-localizacion.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Localizaciones</li></ul></div></div><div class=row><div class=col-md-12><h1>Localizaciones</h1></div></div></div></section><div class=container><section class=panel><div class=panel-body><table class="table table-no-more table-bordered table-striped mb-none"><thead><tr><th>Fecha</th><th>Titulo</th><th>Autor</th><th>Direccion</th><th>Estado</th><th></th></tr></thead><tbody><tr ng-repeat="localizacion in listaLocalizaciones"><td data-title=Fecha>{{localizacion.fechaSubida | date:\'dd-MM-yyyy\'}}</td><td>{{localizacion.titulo}}</td><td data-title=Votos>{{localizacion.autor}}</td><td>{{localizacion.direccion}}</td><td><select ng-model=localizacion.estado ng-options="item.id as item.name for item in items"></select></td><td><button type=text class="btn btn-default" ng-click="actualizarLocalizacion(localizacion._id, localizacion.estado)">Modificar</button> <button type=text class="btn btn-default" ng-click=obtenerDirecciones(localizacion._id)>Obtener direcciones</button></td></tr></tbody></table></div></section></div>'),a.put("app/localizaciones/crear-localizaciones.html",'<style>.angular-google-map-container { height: 400px; width: 600px;  }</style><section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Mapa</li></ul></div></div><div class=row><div class=col-md-12><h1>Sube tu fotografía</h1></div></div></div></section><div class=container><div class=row><div class=col-md-7><div class=form-group><label>Selecciona la localización exacta</label><span ng-show="!marker.coords.latitude>0" style=color:red>*</span><small>(Haz click en el mapa para situar el punto sobre el mapa)</small><div class=row ng-if=showMap><ui-gmap-google-map center=map.center zoom=map.zoom events=map.events bounds=map.bounds><!--<ui-gmap-search-box options="searchbox.options" template="searchbox.template"\r\n				                            events="searchbox.events" position="searchbox.position"></ui-gmap-search-box>--><ui-gmap-marker coords=marker.coords options=marker.options events=marker.events idkey=marker.id icon="{url:\'http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png\' }"></ui-gmap-marker></ui-gmap-google-map></div><!--<div id="searchBoxParent"></div>\r\n				    <div>\r\n				        <ui-gmap-google-map\r\n				                center="map.center"\r\n				                zoom="map.zoom"\r\n				                dragging="map.dragging"\r\n				                bounds="map.bounds"\r\n				                events="map.events"\r\n				                options="map.options"\r\n				                pan="true"\r\n				                control="map.control"\r\n				                >\r\n\r\n				            <ui-gmap-search-box options="searchbox.options" template="searchbox.template"\r\n				                            events="searchbox.events" position="searchbox.position"></ui-gmap-search-box>\r\n\r\n\r\n\r\n				            <ui-gmap-markers idkey="map.idkey" models="map.markers" coords="\'self\'" icon="\'icon\'"\r\n				                             click="\'onClicked\'"></ui-gmap-markers>\r\n				            <ui-gmap-window coords="selected" idkey="selected.place_id" templateurl="selected.templateurl"\r\n				                            templateparameter="selected.templateparameter" options="selected.options"\r\n				                            closeClick=\'selected.closeClick()\' ng-cloak>\r\n\r\n				            </ui-gmap-window>\r\n\r\n\r\n				        </ui-gmap-google-map>\r\n				        <button type="button" ng-click="toggleMap()">Toggle Visibility</button>\r\n				        <span ng-bind="searchbox.options.visible"></span>\r\n				    </div>--><span style=color:red>*</span> Campos obligatorios<p>Latitud Marker: {{marker.coords.latitude}}</p><p>Longitud Marker: {{marker.coords.longitude}}</p></div></div><div class=col-md-5><div class=row><div class=form-group ng-class="{ \'has-success\': form.titulo.$valid && submitted,\r\n					\'has-error\': form.titulo.$invalid && submitted }"><label>Título <span ng-show="!localizacion.titulo.length>0" style=color:red>*</span></label><input name=titulo class=form-control ng-model=localizacion.titulo required mongoose-error><p class=help-block ng-show="form.titulo.$error.required && submitted">Olvidaste poner el título</p><p class=help-block ng-show=form.titulo.$error.mongoose>{{ errors.titulo }}</p></div></div><div class=row><div class=form-group><label>Fecha de la toma</label><span ng-show="!dt.length>0" style=color:red>*</span><div class=row><div class=col-md-6><p class=input-group><input class=form-control datepicker-popup=dd/MM/yyyy ng-model=dt is-open=opened datepicker-options=dateOptions ng-required=true close-text="Close"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click=open($event)><i class="glyphicon glyphicon-calendar"></i></button></span></p></div></div></div></div><div class=row><div class=col-md-7 style="margin-left: -15px"><div class=form-group><label>Subir fotografía</label><span ng-show=!finalizado style=color:red>*</span> <input type=file name=file class=cloudinary_fileupload multiple ng-model=$parent.files><div class=file ng-repeat="file in files"><!--<h3><i ng-class="finalizado ? \'fa fa-check\' : \'fa fa-spinner fa-pulse\'"></i></h3>--><div class=status ng-show=!finalizado>{{file.status}}</div><div class=progress-bar ng-show=!finalizado><div class=progress style="width: {{file.progress}}%" ng-init="progress=0"></div></div><h4 class=success ng-show=finalizado>Carga completada</h4></div></div></div><div class=col-md-5><div class=file ng-repeat="file in files"><cl-image public-id={{file.result.public_id}} class="thumbnail inline" crop=fit height=150 width=150 format="jpg"></div></div></div><div class=row><div class=form-group><label>Categoria</label><span ng-show="!(localizacion.categoria>=0)" style=color:red>*</span><select style="width: 100%" ng-model=localizacion.categoria convert-to-number><optgroup label=Nocturnas><option value=0>Nocturna Paisaje</option><option value=1>Nocturna Urbana</option><option value=2>Lightpainting</option><option value=3>Atardecer-Amanecer</option><option value=4>Monumentos</option><option value=5>Ruinas</option><option value=6>Vehículos-Maquinaria</option><option value=7>Minería</option></optgroup><optgroup ng-show=getCurrentUser.vip label="No sólo Nocturnas"><option value=8>Paisaje</option><option value=9>Larga Exposición Diurna</option><option value=10>Urbana</option><option value=11>Costa</option></optgroup></select></div></div><div class=row><div class=form-group><label>Etiquetas</label><small>Utiliza palabras clave para que tu localización sea más fácil de encontrar.</small><tags-input ng-model=tags placeholder="Ejemplo: canon, mar, startrail, alicante"></tags-input></div></div><div class=row><div class=form-group><label>Acceso</label><span ng-show="!localizacion.acceso.length>0" style=color:red>*</span><small>(Se puede llegar con coche? solo a pie? el terreno es peligroso?)</small> <i data-toggle=tooltip data-placement=top title="Explica cómo está el acceso: si se puede llegar con coche, o hay que ir andando tantos minutos, si hay cerca zonas peligrosas, etc, etc..." class="fa fa-info-circle"></i><textarea class=form-control ng-model=localizacion.acceso rows=3 id=acceso ng-model=localizacion.acceso></textarea></div></div><div class=row><div class=form-group><p style=margin:0px><label>Peligrosidad de la zona</label><span ng-show="!rate>0" style=color:red>*</span></p><rating ng-model=rate max=max readonly on-hover=hoveringOver(value) on-leave="overStar = null" style="font-size: 20px"></rating><span class=label ng-class="{\'label-warning\': percent<30, \'label-info\': percent>=30 && percent<70, \'label-success\': percent>=70}" ng-show="overStar && !isReadonly">{{percent}}%</span></div></div><div class=row ng-hide="localizacion.categoria>7"><div class=form-group><p style=margin:0px><label>Contaminación lumínica</label><span ng-show="!rateCL>0" style=color:red>*</span></p><rating ng-model=rateCL max=max readonly on-hover=hoveringOverCL(value) on-leave="overStarCL = null" style="font-size: 20px"></rating><span class=label ng-class="{\'label-warning\': percent<30, \'label-info\': percent>=30 && percent<70, \'label-success\': percent>=70}" ng-show="overStarCL && !isReadonly">{{percentCL}}%</span></div></div><div class=row><div class=form-group><label>Algo más que destacar</label><textarea class=form-control ng-model=localizacion.notasAdicionales rows=3 id=acceso ng-model=localizacion.notasAdicionales></textarea></div></div><alert type=danger close=closeAlert($index) ng-show="mensajeError.length>0">{{ mensajeError }}</alert><button class="btn btn-lg btn-success pull-right" type=button ng-click=crearLocalizacion() ng-disabled=localizacionCreada>Guardar</button></div></div></div>'),a.put("app/localizaciones/editar-localizaciones.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Mapa</li></ul></div></div><div class=row><div class=col-md-12><h1>Edita tu fotografía</h1></div></div></div></section><div class=container><div class=row><div class=col-md-7><div class=form-group><label>Selecciona la localización exacta</label><span ng-show="!marker.coords.latitude>0" style=color:red>*</span><small>(Haz click en el mapa para situar el punto sobre el mapa)</small><div class=row><ui-gmap-google-map center=map.center zoom=map.zoom events=map.events><ui-gmap-marker coords=marker.coords options=marker.options events=marker.events idkey=marker.id></ui-gmap-marker></ui-gmap-google-map></div><span style=color:red>*</span> Campos obligatorios</div></div><div class=col-md-5><div class=row><cl-image public-id={{localizacion.cloudinaryId}} class="thumbnail inline" crop=fit width=340 format=jpg></cl-image></div><div class=row><div class=form-group ng-class="{ \'has-success\': form.titulo.$valid && submitted,\r\n					\'has-error\': form.titulo.$invalid && submitted }"><label>Título <span ng-show="!localizacion.titulo.length>0" style=color:red>*</span></label><input name=titulo class=form-control ng-model=localizacion.titulo required mongoose-error><p class=help-block ng-show="form.titulo.$error.required && submitted">Olvidaste poner el título</p><p class=help-block ng-show=form.titulo.$error.mongoose>{{ errors.titulo }}</p></div></div><div class=row><div class=form-group><label>Fecha de la toma</label><span ng-show="!dt.length>0" style=color:red>*</span><div class=row><div class=col-md-6><p class=input-group><input class=form-control datepicker-popup=dd/MM/yyyy ng-model=dt is-open=opened datepicker-options=dateOptions ng-required=true close-text="Close"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click=open($event)><i class="glyphicon glyphicon-calendar"></i></button></span></p></div></div></div></div><div class=row><div class=form-group><label>Categoria</label><span ng-show="!(localizacion.categoria>=0)" style=color:red>*</span><select style="width: 100%" ng-model=localizacion.categoria convert-to-number><optgroup label=Nocturnas><option value=0>Nocturna Paisaje</option><option value=1>Nocturna Urbana</option><option value=2>Lightpainting</option><option value=3>Atardecer-Amanecer</option><option value=4>Monumentos</option><option value=5>Ruinas</option><option value=6>Vehículos-Maquinaria</option><option value=7>Minería</option></optgroup><optgroup ng-show=false label="No sólo Nocturnas"><option value=8>Paisaje</option><option value=9>Larga Exposición Diurna</option><option value=10>Urbana</option><option value=11>Costa</option></optgroup></select></div></div><div class=row><div class=form-group><label>Etiquetas</label><tags-input ng-model=tags placeholder="Ejemplo: luna, urbana"></tags-input></div></div><div class=row><div class=form-group><label>Acceso</label><span ng-show="!localizacion.acceso.length>0" style=color:red>*</span><small>(Se puede llegar con coche? solo a pie? el terreno es peligroso?)</small> <i data-toggle=tooltip data-placement=top title="Explica cómo está el acceso: si se puede llegar con coche, o hay que ir andando tantos minutos, si hay cerca zonas peligrosas, etc, etc..." class="fa fa-info-circle"></i><textarea class=form-control ng-model=localizacion.acceso rows=3 id=acceso ng-model=localizacion.acceso></textarea></div></div><div class=row><div class=form-group><p style=margin:0px><label>Peligrosidad de la zona</label><span ng-show="!rate>0" style=color:red>*</span></p><rating ng-model=rate max=max readonly on-hover=hoveringOver(value) on-leave="overStar = null" style="font-size: 20px"></rating><span class=label ng-class="{\'label-warning\': percent<30, \'label-info\': percent>=30 && percent<70, \'label-success\': percent>=70}" ng-show="overStar && !isReadonly">{{percent}}%</span></div></div><div class=row><div class=form-group><p style=margin:0px><label>Contaminación lumínica</label><span ng-show="!rateCL>0" style=color:red>*</span></p><rating ng-model=rateCL max=max readonly on-hover=hoveringOverCL(value) on-leave="overStarCL = null" style="font-size: 20px"></rating><span class=label ng-class="{\'label-warning\': percent<30, \'label-info\': percent>=30 && percent<70, \'label-success\': percent>=70}" ng-show="overStarCL && !isReadonly">{{percentCL}}%</span></div></div><div class=row><div class=form-group><label>Algo más que destacar</label><textarea class=form-control ng-model=localizacion.notasAdicionales rows=3 id=acceso ng-model=localizacion.notasAdicionales></textarea></div></div><alert type=danger close=closeAlert($index) ng-show="mensajeError.length>0">{{ mensajeError }}</alert><h3 ng-show=localizacionEditada>Fotografía guardada correctamente!</h3><h3 ng-show=localizacionBorrada>Fotografía borrada correctamente!</h3><button class="btn btn-lg btn-success pull-right" style=margin-left:30px type=button ng-click=editarLocalizacion()>Guardar</button><!--<button class="btn btn-lg btn-danger pull-right" type="button" ng-click="editarLocalizacion()" ng-disabled="localizacionBorrada">Borrar</button>--></div></div></div>'),a.put("app/localizaciones/localizacion-creada.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Home</a></li><li class=active>Localización Creada</li></ul></div></div><div class=row><div class=col-md-12><h1>Localización Creada Correctamente!</h1></div></div></div></section><div class=container><div class="row featured-boxes"><div class="col-md-3 col-sm-6"><a href=/localizaciones-fotografia-nocturna><div class="featured-box featured-box-primary"><div class=box-content><i class="icon-featured fa fa-globe"></i><h4>Mapa</h4><p>Explora tu nueva localización junto al resto del mapa.</p></div></div></a></div><div class="col-md-3 col-sm-6"><a href=/crear-localizaciones><div class="featured-box featured-box-secundary"><div class=box-content><i class="icon-featured fa fa-cloud-upload"></i><h4>Crea localización</h4><p>Sube otra localización y comparte tus conocimientos :)</p></div></div></a></div><div class="col-md-3 col-sm-6"><a href=/tus-localizaciones/{{getCurrentUser.username}}><div class="featured-box featured-box-tertiary"><div class=box-content><i class="icon-featured fa fa-trophy"></i><h4>{{listaLocalizaciones.length}} localizaciones</h4><p>Enhorabuena! Ya tienes creadas {{listaLocalizaciones.length}} localizaciones.</p></div></div></a></div><div class="col-md-3 col-sm-6"><a href=/localizaciones/{{parametro}}/{{titulo}}><div class="featured-box featured-box-quartenary"><div class=box-content><i class="icon-featured fa fa-cogs"></i><h4>Editar</h4><p>¿Se te ha olvidado añadir alguna información? Edítala</p></div></div></a></div></div></div>'),a.put("app/localizaciones/localizaciones.html",'<div role=main class=main><style>.angular-google-map-container {  width:100%; height: 400px; }</style><section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Localizaciones fotografía nocturna</li></ul></div></div><div class=row><div class=col-md-12><h1>Localizaciones fotografía nocturna</h1></div></div></div></section><div class=container><div class=row><div class=col-md-8><label>Buscador de localizaciones:</label><div class=input-group style=margin-bottom:20px><input class=form-control ng-model=busqueda> <span class=input-group-btn><button class="btn btn-default" type=button><i class="fa fa-search"></i></button></span></div><div ng-if=showMap><ui-gmap-google-map center=map.center zoom=map.zoom draggable=true options=options bounds=map.bounds><ui-gmap-markers models=misLocalizacionesFiltradas coords="\'self\'" icon="\'icon\'" click="\'misLocalizacionesFiltradas.events\'" docluster=true></ui-gmap-markers></ui-gmap-google-map>Haz click en un punto para ver los detalles de la localización</div></div><div class=col-md-4><div ng-show="fotoActual.idClodinary.length>0"><h3 style="margin-bottom: 8px">{{fotoActual.titulo}}</h3><cl-image public-id={{fotoActual.idClodinary}} class="thumbnail inline" crop=fit width=380 format=jpg title="Fotografia por: {{fotoActual.autor}}"></cl-image><p><strong>Acceso:</strong> {{fotoActual.acceso}}</p><p><strong>Peligrosidad de la zona:</strong> {{fotoActual.peligrosidad}}/10</p><p><strong>Contaminacion Luminica:</strong>{{fotoActual.contaminacionLuminica}}/10</p><p class=text-right><a href="/localizaciones/{{fotoActual._id}}/{{fotoActual.titulo | seo}}">Ver detalle</a></p></div></div></div><div class=row style=margin-top:5px><div class=col-md-12><h5>{{misLocalizacionesFiltradas.length | filter:busqueda}} localizaciones</h5><div ng-repeat="localizacion in misLocalizaciones | filter:{estado:\'!2\'}| filter:busqueda | orderBy: fechaSubida" style="width:80px; float:left"><a href="/localizaciones/{{localizacion._id}}/{{localizacion.titulo | seo}}" alt="{{localizacion.titulo | seo}}"><img src=http://res.cloudinary.com/djhqderty/image/upload/c_thumb,h_80,w_80/v1438939574/{{localizacion.idFoto}} title="{{localizacion.titulo | seo}}"></a></div><!--<table class="table table-bordered table-striped mb-none" id="datatable-default">\n				<thead>\n					<tr>\n						<th>Fecha</th>\n						<th style="width:20%">Imagen</th>\n						<th style="width:20%">Titulo</th>\n						<th>Autor</th>\n						<th class="hidden-phone">Peligrosidad</th>\n						<th class="hidden-phone">Contaminacion</th>\n					</tr>\n				</thead>\n				<tbody>\n					<tr ng-repeat="localizacion in misLocalizaciones | filter:{estado:\'!2\'}| filter:busqueda | orderBy: fechaSubida" class="gradeX">\n						<td>{{localizacion.fechaSubida | date:\'dd/MM/yyyy\'}}</td>\n						<td style="width:20%"><img class="thumbnail inline"  src="http://res.cloudinary.com/djhqderty/image/upload/c_scale,q_29,w_200/v1429114149/{{localizacion.cloudinaryId}}.jpg" width="200px" title="{{localizacion.titulo}}" /></td>\n						<td style="width:20%"><a href="/localizaciones/{{localizacion._id}}/{{localizacion.titulo | seo}}">{{localizacion.titulo}}</a></td>\n						<td><a href="/tus-localizaciones/{{localizacion.autor}}">{{localizacion.autor}}</a></td>\n						<td class="center hidden-phone">{{localizacion.peligrosidad}}/10</td>\n						<td class="center hidden-phone">{{localizacion.contaminacionLuminica}}/10</td>\n					</tr>\n				</tbody>\n			</table>--></div></div></div></div>'),a.put("app/localizaciones/mapaSpain.html",'<style>.angular-google-map-container { height: 600px; width: 100%; position: absolute; top: 500; left: 0;  }</style><section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Home</a></li><li class=active>Localizaciones</li></ul></div></div><div class=row><div class=col-md-12><h1>Localizaciones fotografía nocturna en España</h1></div></div></div></section><div class=container><div class=row><div class=col-md-8><div ng-if=showMap><ui-gmap-google-map center=map.center zoom=map.zoom><!--<ui-gmap-layer type="KmlLayer" options="kmlLayerOptions1" show="true"></ui-gmap-layer>\r\n				--><ui-gmap-layer namespace=visualization type=HeatmapLayer show=map.showHeat oncreated=map.heatLayerCallback></ui-gmap-layer></ui-gmap-google-map></div></div><div class=col-md-4><h3>Listado por provincias</h3><table class="table table-bordered table-striped mb-none" id=datatable-default><thead><tr><th>Provincia</th><th>Localizaciones</th></tr></thead><tbody><tr ng-repeat="provincia in provincias" class=gradeX><td>{{provincia.nombre}}</td><td>{{provincia.localizaciones}}</td></tr></tbody></table></div></div><div class=row><div class=col-md-12><p>La eterna pregunta ¿Y dónde podemos ir a hacer fotografía nocturna?</p><p>Pues aquí os mostrarmos un buen conjunto de localizaciones de fotografía nocturna agrupadas por provincias</p></div></div></div>'),a.put("app/localizaciones/myModalContent.html",""),a.put("app/localizaciones/tus-localizaciones.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Home</a></li><li class=active>Portfolio</li></ul></div></div><div class=row><div class=col-md-8><h1>{{nombreUsuario}}</h1><a ng-show="sitioweb.length>0" href={{sitioweb}} target=_blank style=margin-left:10px>{{sitioweb}}</a></div><div class="col-md-4 text-right"><a ng-show="sitioFB.length>0" href={{sitioFB}} target=_blank class=text-align:right;><i class="fa fa-facebook-square" style="font-size: 40px;   margin-right: 20px"></i></a> <a ng-show="sitioTwitter.length>0" href={{sitioTwitter}} target=_blank><i class="fa fa-twitter-square" style="font-size: 40px;  margin-right: 20px"></i></a></div></div></div></section><!--\r\n				<section class="page-top">\r\n					<div class="container">\r\n						<div class="row">\r\n							<div class="col-md-12">\r\n								<ul class="breadcrumb">\r\n									<li><a href="#">Home</a></li>\r\n									<li class="active">Portfolio</li>\r\n								</ul>\r\n							</div>\r\n						</div>\r\n						<div class="row">\r\n							<div class="col-md-12">\r\n								<h1>Portfolio</h1>							    \r\n							</div>							\r\n						</div>\r\n					</div>\r\n				</section>--><div class=container><div class=row><ul class="portfolio-list sort-destination" data-sort-id=portfolio data-plugin-options="{&quot;delegate&quot;: &quot;a&quot;, &quot;type&quot;: &quot;image&quot;, &quot;gallery&quot;: {&quot;enabled&quot;: true}}"><li ng-repeat="loca in listaLocalizaciones | filter:{estado:\'!2\'}" class="col-md-3 col-sm-6 col-xs-12 isotope-item websites"><div class="portfolio-item img-thumbnail"><a href="/localizaciones/{{loca._id}}/{{loca.titulo | seo}}" class=thumb-info><img alt={{loca.titulo}} class=img-responsive src=http://res.cloudinary.com/djhqderty/image/upload/c_fill,h_447,w_447/{{loca.cloudinaryId}}> <span class=thumb-info-title><span class=thumb-info-inner>{{loca.titulo}}</span> <span class=thumb-info-type>Ver</span></span> <span class=thumb-info-action><span title=Universal class=thumb-info-action-icon><i class="fa fa-link"></i></span></span></a></div></li></ul></div></div>'),a.put("app/localizaciones/vista-localizaciones.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Home</a></li><li class=active>Localizaciones</li></ul></div></div><div class=row><div class=col-md-12><h1>{{localizacion.titulo}}</h1></div></div></div></section><div class=container><div class=row><div class=col-md-5><a href=http://res.cloudinary.com/djhqderty/image/upload/v1429114149/{{localizacion.cloudinaryId}}.jpg data-lightbox=image-2><cl-image public-id={{localizacion.cloudinaryId}} class="thumbnail inline" crop=fit width=340 format=jpg></cl-image></a><div ng-if=showMap><ui-gmap-google-map center=map.center zoom=map.zoom><ui-gmap-marker coords=marker.coords options=marker.options idkey=marker.id icon="{url:\'http://res.cloudinary.com/djhqderty/image/upload/v1430472337/icono-mapa_xnqyqd.png\' }"></ui-gmap-marker></ui-gmap-google-map></div><p><a href=# ng-click="isCollapsed=!isCollapsed">Reportar ubicacion <span style="font-size: 10px" ng-class="isCollapsed ? \'glyphicon glyphicon-menu-right\' : \'glyphicon glyphicon-menu-up\'" aria-hidden=true></span></a></p><div collapse=isCollapsed><div class=form-group style="margin-top:20px; padding: 0px 130px 0px 20px;font-size: 11px"><p>Si crees que hay una errata en la ubicación o conoces bien la zona y la localización no está exactamente en el lugar indicado, indícanos el problema. Gracias!</p><textarea cols=50 ng-model=textoReporte></textarea><div class=text-right style="margin-right: -16px"><p style=color:green ng-show=enviado>Reporte guardado correctamente. Gracias por avisar.</p><p style=color:red ng-show=mostrarError>Hubo un problema inesperado. Por favor, intentelo pasados unos minutos. Gracias</p><strong ng-show=enviando style=font-size:20px><i class="fa fa-spinner fa-pulse"></i></strong> <button class="btn btn-warning" type=button ng-disabled="textoReporte.length===0" ng-click=guardarReporte()>Reportar</button></div></div></div></div><div class=col-md-7><div class=portfolio-info><div class=row><div class="col-md-12 center"><ul><li><i class="fa fa-calendar"></i> {{localizacion.fechaToma | date:\'dd MMMM yyyy\'}}</li><li><i class="fa fa-globe"></i> <strong>Latitud:</strong> {{localizacion.latitud}} <strong>Longuitud:</strong> {{localizacion.longitud}}</li></ul></div></div></div><h4>Acceso</h4><p class=taller>{{localizacion.acceso}}</p><a href=http://res.cloudinary.com/djhqderty/image/upload/v1429114149/{{localizacion.cloudinaryId}}.jpg data-lightbox=image-1 class="btn btn-primary btn-icon"><i class="fa fa-external-link"></i>Ver en grande</a> <a href="/editar-localizaciones/{{localizacion._id}}/" class="btn btn-warning btn-icon" ng-if=mostrarEditar><i class="fa fa-pencil"></i>Editar localizacion</a> <a href=# class="btn btn-danger btn-icon" ng-click=delete(localizacion) ng-if=mostrarEditar><i class="fa fa-trash-o"></i>Eliminar localizacion</a><ul class=portfolio-details><li><p><strong>Tags:</strong></p><ul class="list list-skills icons list-unstyled list-inline"><li ng-repeat="etiqueta in localizacion.tags"><i class="fa fa-check-circle"></i> {{etiqueta}}</li></ul></li><li><p><strong>Coordenadas:</strong></p><p>Latitud: {{localizacion.latitud}}</p><p>Longuitud: {{localizacion.longitud}}</p></li><li ng-if="localizacion.notasAdicionales.length>0"><p><strong>Notas adicionales:</strong></p><p>{{localizacion.notasAdicionales}}</p></li><li><p><strong>Peligrosidad de la zona:</strong></p><p>{{localizacion.peligrosidad}}/10</p></li><li><p><strong>Contaminacion Luminica:</strong></p><p>{{localizacion.contaminacionLuminica}}/10</p></li><li><p><strong>Categoria:</strong></p>{{$scope.arrayCategorias[0]}}<p>{{arrayCategorias[localizacion.categoria]}}</p></li><li><p><strong>Autor:</strong></p><p><a href=/tus-localizaciones/{{localizacion.autor}}>{{localizacion.autor}}</a></p></li></ul></div></div><div class=row><h2 style="margin: 32px 0 0px 18px">Localizaciones más cercanas</h2><ul class="portfolio-list sort-destination" data-sort-id=portfolio data-plugin-options="{&quot;delegate&quot;: &quot;a&quot;, &quot;type&quot;: &quot;image&quot;, &quot;gallery&quot;: {&quot;enabled&quot;: true}}"><li ng-repeat="loca in localizacionesCercanas | filter:{estado:\'!2\'} |  orderBy:\'distanciakm\' | limitTo:4 " class="col-md-3 col-sm-6 col-xs-12 isotope-item websites"><div class="portfolio-item img-thumbnail"><a href="/localizaciones/{{loca._id}}/{{loca.titulo | seo}}" class=thumb-info><img alt={{loca.titulo}} class=img-responsive src=http://res.cloudinary.com/djhqderty/image/upload/c_fill,h_447,w_447/{{loca.cloudinaryId}}> <span class=thumb-info-title><span class=thumb-info-inner>{{loca.titulo}}</span> <span style="margin-left: 12px;font-size: 15px;font-weight: 100">A {{loca.distanciakm}} km</span> <span class=thumb-info-type>Ver</span></span> <span class=thumb-info-action><span title=Universal class=thumb-info-action-icon><i class="fa fa-link"></i></span></span></a></div></li></ul></div></div>'),a.put("app/main/cookies.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Cookies</li></ul></div></div><div class=row><div class=col-md-12><h1>Cookies</h1></div></div></div></section><div class=container><div class=row><div class=col-md-12><accordion><accordion-group><accordion-heading>QUÉ SON LAS COOKIES Y POR QUÉ LAS UTILIZAMOS <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.open, \'glyphicon-chevron-right\': !status.open}"></i></accordion-heading>Una cookie es un fichero que se descarga en el dispositivo del usuario al acceder a determinadas páginas web para almacenar y recuperar información sobre la navegación que se efectúa desde dicho equipo. Las cookies permiten a dicha web, entre otras cosas, almacenar y recuperar información sobre las decisiones y hábitos del usuario. En subexpuesta.com las utilizamos para personalizar la experiencia dentro de nuestras webs, identificar y recordar al usuario registrado y facilitar la navegación. Es importante destacar que el uso de cookies no proporciona datos personales del usuario, que de cara a subexpuesta.com permanece anónimo. El usuario puede configurar su navegador para no aceptar el uso de cookies, en cuyo caso la personalización de la experiencia no se aplicaría aunque sí podrá seguir accediendo a los contenidos de nuestras webs con normalidad.</accordion-group><accordion-group><accordion-heading>QUÉ TIPO DE COOKIES UTILIZAN EN SUBEXPUESTA.COM <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.open, \'glyphicon-chevron-right\': !status.open}"></i></accordion-heading><p>Las Cookies, en función de su permanencia, pueden dividirse en Cookies de sesión o permanentes. Las primeras expiran cuando el usuario cierra el navegador. Las segundas expiran en función cuando se cumpla el objetivo para el que sirven (por ejemplo, para que el usuario se mantenga identificado en las webs y servicios de subexpuesta.com) o bien cuando se borran manualmente.</p><p>Adicionalmente, en función de su objetivo, las Cookies pueden clasificarse de la siguiente forma:</p><p><strong>Cookies de rendimiento:</strong> este tipo de Cookie recuerda sus preferencias para las herramientas que se encuentran en los servicios, por lo que no tiene que volver a configurar el servicio cada vez que usted visita. A modo de ejemplo, en esta tipología se incluyen:</p><ul><li>Ajustes de volumen de reproductores de vídeo o sonido.</li><li>Las velocidades de transmisión de vídeo que sean compatibles con su navegador.</li></ul><p><strong>Cookies de geolocalización:</strong> estas Cookies son utilizadas para averiguar en qué país se encuentra cuando se solicita una web o servicio. Esta Cookie es totalmente anónima, y sólo se utiliza para ayudar a orientar el contenido a su ubicación.</p><p><strong>Cookies de registro:</strong> las Cookies de registro se generan una vez que el Usuario se ha registrado o posteriormente ha abierto su sesión, y se utilizan para identificarle en las web y servicios con los siguientes objetivos:</p><ul><li>Mantener al usuario identificado de forma que, si cierra un servicio o web, el navegador o el ordenador y en otro momento u otro día vuelve a entrar en dicho servicio o web, seguirá identificado, facilitando así su navegación sin tener que volver a identificarse. Esta funcionalidad se puede suprimir si el usuario pulsa la funcionalidad “Salir”, de forma que esta Cookie se elimina y la próxima vez que entre en la web el usuario tendrá que iniciar sesión para estar identificado.</li><li>Comprobar si el usuario está autorizado para acceder a ciertos servicios, por ejemplo, para participar en un concurso.</li><li>Adicionalmente, algunos servicios pueden utilizar conectores de terceros tales como Facebook, Twitter o Google. Cuando el usuario se registra en un servicio con credenciales de una red social o sistema de identificación de terceros, autoriza al mismo a guardar una cookie persistente que recuerda su identidad y le garantiza acceso a la web hasta que expira. El usuario puede borrar esta cookie y revocar el acceso a la web mediante redes sociales o sistema de identificación de terceros actualizando sus preferencias en la red social que específica.</li></ul><p><strong>Cookies de analítica:</strong> cada vez que un Usuario visita una Web o Servicio, una herramienta de un proveedor externo (Google Analytics, comScore y similares) genera una cookie analítica en el dispositivo del usuario. Esta cookie que sólo se genera en la visita, servirá en próximas visitas a los servicios de subexpuesta.com para identificar de forma anónima al visitante. Los objetivos principales que se persiguen son:</p><ul><li>Permitir la identificación anónima de los usuarios navegantes a través de la “Cookie” (identifica navegadores y dispositivos, no personas) y por lo tanto la contabilización aproximada del número de visitantes y su tendencia en el tiempo.</li><li>Identificar de forma anónima los contenidos más visitados y por lo tanto más atractivos para los usuarios</li><li>Saber si el usuario que está accediendo es nuevo o repite visita.</li></ul><p><em>Importante:</em> Salvo que el Usuario decida registrarse en la web subexpuesta.com, la cookie nunca irá asociada a ningún dato de carácter personal que pueda identificarle. Dichas cookies sólo serán utilizadas con propósitos estadísticos que ayuden a la optimización de la experiencia de los usuarios en el sitio.</p><p>Más información sobre la política de privacidad de estas herramientas de analítica en: <a href=http://www.google.es/intl/es/analytics/privacyoverview.html>Google Analytics</a> y <a href=www.comscore.com/esl/About_comScore/Privacy_Policy>Comscore</a>.</p><p><strong>Cookies de publicidad:</strong> este tipo de cookies permiten ampliar la información de los anuncios mostrados a cada usuario anónimo en la subexpuesta.com. Entre otros, se almacena la duración o frecuencia de visualización de posiciones publicitarias, la interacción con las mismas, o los patrones de navegación y/o comportamientos del usuario ya que ayudan a conformar un perfil de interés publicitario. De este modo, permiten ofrecer publicidad afín a los intereses del usuario.</p><p>Para la gestión de la publicidad de subexpuesta.com se utilizan herramientas de servicio de publicidad (<a href=http://es.wikipedia.org/wiki/Adserver>Adservers &#8211; http://es.wikipedia.org/wiki/Adserver&#8221;)</a> de terceros. Estos terceros pueden almacenar cookies enviadas desde la web subexpuesta.com procedentes de los navegadores de los usuarios, así como acceder a los datos que en ellas se guardan.</p><p>Las empresas que generan estas Cookies tienen sus propias políticas de privacidad.</p><!--<p>En la actualidad, Weblogs SL utiliza la plataforma Doubleclick de Google para gestionar estos servicios. Para más información, acuda a <a href="http://www.google.es/policies/privacy/ads/#toc-doubleclick">http://www.google.es/policies/privacy/ads/#toc-doubleclick</a> y a <a href="http://www.google.es/policies/privacy/ads/">http://www.google.es/policies/privacy/ads/</a>.</p>--></accordion-group><accordion-group><accordion-heading>CÓMO DESHABILITAR LAS COOKIES EN EL NAVEGADOR<i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.open, \'glyphicon-chevron-right\': !status.open}"></i></accordion-heading><p>La mayoría de navegadores actualmente permiten al usuario configurar si desean aceptar cookies y cuáles de ellas. Estos ajustes normalmente se encuentra en las ‘opciones’ o ‘Preferencias’ del menú de su navegador.</p><p>Estas son las instrucciones para configurar las cookies en los principales navegadores:</p><ul><li><strong>Chrome:</strong> Configuración -> Mostrar opciones avanzadas -> Privacidad -> Configuración de contenido. Para más información, puede consultar el soporte de Google o la Ayuda del navegador.</li><li><strong>Firefox:</strong> Herramientas -> Opciones -> Privacidad -> Historial -> Configuración Personalizada. Para más información, puede consultar el soporte de Mozilla o la Ayuda del navegador.</li><li><strong>Internet Explorer:</strong> Herramientas -> Opciones de Internet -> Privacidad -> Configuración. Para más información, puede consultar el soporte de Microsoft o la Ayuda del navegador.</li><li><strong>Safari:</strong> Preferencias -> Seguridad. Para más información, puede consultar el soporte de Apple o la Ayuda del navegador.</li></ul></accordion-group><accordion-group><accordion-heading>CONDICIONES DE USO <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.open, \'glyphicon-chevron-right\': !status.open}"></i></accordion-heading>Si usted decide visitar el sitio web subexpuesta.com, su visita y cualquier posible disputa sobre la privacidad está sujeta a esta Política de Privacidad y nuestros Términos de Uso, incluyendo limitaciones en daños, arbitraje de disputas y la aplicación de la ley de España.</accordion-group><accordion-group><accordion-heading>FECHA DE VIGENCIA DE LA PRESENTE POLÍTICA DE PRIVACIDAD <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.open, \'glyphicon-chevron-right\': !status.open}"></i></accordion-heading>Esta política de privacidad es efectiva a partir del 27 de Mayo de 2015.</accordion-group></accordion></div></div></div>'),
a.put("app/main/donaciones.html",'<div role=main class=main><section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href="/">Inicio</a></li><li class=active>Donaciones</li></ul></div></div><div class=row><div class=col-md-12><h1>Donaciones</h1></div></div></div></section><div class=container><div class=row><div class=col-md-6><h2 class=short><strong>Tu ayuda es importante</strong></h2><p>La web www.subexpuesta.com se mantiene <strong>libre de anuncios</strong>, sponsors o banners para hacer una web limpia, fácil de manejar y agradable para el usuario.</p><p>Es por esto que cualquier <strong>ayuda</strong> que se pueda aportar es más que bienvenida.</p><p>Actualmente los gastos principales son el tema de hosting (dominio, hosting, servidor de imágenes, bases de datos). <strong style=color:green>Gracias!</strong></p></div><div class=col-md-6><h4 class=push-top>Muchas <strong>gracias</strong> por tu ayuda</h4><p>Invítame a un cubata, un café o a un almuerzo, dándole al botón de Donar, así de sencillo.</p><form action=https://www.paypal.com/cgi-bin/webscr method=post target=_top><input type=hidden name=cmd value=_s-xclick> <input type=hidden name=hosted_button_id value=J89DNQT6LDM2E> <input type=image src=https://www.paypalobjects.com/es_ES/ES/i/btn/btn_donate_LG.gif border=0 name=submit alt="PayPal. La forma rápida y segura de pagar en Internet."> <img alt="" border=0 src=https://www.paypalobjects.com/en_US/i/scr/pixel.gif width=1 height=1></form></div></div></div></div>'),a.put("app/main/main.html",'<style>.angular-google-map-container { height: 100%; width: 100%; position: absolute; top: 500; left: 0;  }</style><div role=main class=main><div class=home-intro><div class=container><div class=row><div class=col-md-8><p>Localizador de fotografías <em>Nocturnas</em> <span>Explora todas las fotografías que puedes hacer...</span></p></div><div class=col-md-4><div class=get-started ng-show=!isLoggedIn()><a href=/signup class="btn btn-lg btn-primary">Crea tu cuenta ahora!</a><div class=learn-more>o <a href=/login>inicia sesión</a></div></div></div></div></div></div><div class=container><div class=row><div class=col-md-6><h3>Sorteo de Postales con tu fotografía</h3><p><strong>¿Os acordais cuando llegaba Navidad y teníais lleno el buzón de postales?</strong></p><p>Puede que seamos unos nostálgicos, unos retros, o unos pasados de moda, pero el hecho de recibir una postal con un mensaje de un ser querido es algo que tiene una magia especial.</p><p><strong>¿Y por qué no que esa postal tenga una fotografía tuya?</strong></p><p>Pues en <a href="/">Subpexpuesta.com</a> todas las localizaciones creadas durante el mes de Noviembre, entrarán en el sorteo para convertir tu fotografía en postal!</p><p><strong style="color:green; font-size:17px">20 ganadores</strong>, <strong style="color:#D934CB; font-size:16px">4 postales por ganador</strong>, sólo por crear una localización nueva.</p><a href=/sorteo-postales-navidad class="btn btn-lg btn-warning pull-right">Más información</a></div><div class=col-md-4><a href=/sorteo-postales-navidad alt="sorteo postales navidad"><img src=/assets/images/sorteo.jpg width=500px style=margin-top:20px alt="Sorteo subexpuesta.com"></a></div></div></div><hr style="margin-top:40px;margin-bottom:40px"><!--<div class="container">\n    <div class="row center">\n      \n      <div class="col-md-12">\n        <h2 class="short word-rotator-title">\n        <a href="/localizaciones-fotografia-nocturna" > Descubre las mejores fotografías</a> <strong>nocturnas</strong> cerca de ti\n        </h2>\n        <p class="lead">\n          Conoce de cada localización cómo acceder, peligrosidad de la zona y la contaminación lumínica.<br /><a href="/localizaciones-fotografia-nocturna" >Descúbrelas!</a>\n        </p>\n      </div>\n    </div>\n  </div>--><div class=container><div class="row center"><div class=col-md-12 style=height:400px>Haz click en un punto para ver los detalles de la localización<ui-gmap-google-map center=map.center zoom=map.zoom draggable=true options=options bounds=map.bounds><ui-gmap-markers models=misLocalizaciones coords="\'self\'" icon="\'icon\'" click="\'misLocalizaciones.events\'" docluster=true></ui-gmap-markers></ui-gmap-google-map></div></div><div class=row><h2 style="margin: 32px 0 32px 18px">Últimas localizaciones subidas</h2><ul class="portfolio-list sort-destination" data-sort-id=portfolio data-plugin-options="{&quot;delegate&quot;: &quot;a&quot;, &quot;type&quot;: &quot;image&quot;, &quot;gallery&quot;: {&quot;enabled&quot;: true}}"><li ng-repeat="loca in listaLocalizaciones | filter:{estado:\'!2\'} |  orderBy:\'-fechaSubida\' | limitTo:4 " class="col-md-3 col-sm-6 col-xs-12 isotope-item websites"><div class="portfolio-item img-thumbnail"><a href="/localizaciones/{{loca._id}}/{{loca.titulo | seo}}" class=thumb-info><img alt={{loca.titulo}} class=img-responsive src=http://res.cloudinary.com/djhqderty/image/upload/c_fill,h_447,w_447/{{loca.cloudinaryId}}> <span class=thumb-info-title><span class=thumb-info-inner>{{loca.titulo}}</span> <span class=thumb-info-type>Ver</span></span> <span class=thumb-info-action><span title=Universal class=thumb-info-action-icon><i class="fa fa-link"></i></span></span></a></div></li></ul></div><section class="call-to-action featured footer"><div class=container><div class=row><div class=center><h3>Descubre el usuario que más localizaciones: <strong>{{usuarioMaximo.autor}}</strong> <a href=/tus-localizaciones/{{usuarioMaximo.autor}} class="btn btn-lg btn-primary" data-appear-animation=bounceIn>Ver Portfolio</a> <span class="arrow hlb hidden-xs hidden-sm hidden-md" data-appear-animation=rotateInUpLeft style="top: -22px"></span></h3></div></div></div></section></div><div class=container style=margin-top:100px><div class=row><div class=col-md-4 style="padding:0px 50px 0px 30px"><h4>Top Global</h4><table class="table table-striped"><thead><tr><th>#</th><th>Usuario</th><th>Localizaciones</th></tr></thead><tbody><tr ng-repeat="usu in maximo | orderBy: \'-total\' | limitTo:3"><th scope=row>{{$index+1}}</th><td><a href=/tus-localizaciones/{{usu.autor}}>{{usu.autor}}</a></td><td>{{usu.total}}</td></tr></tbody></table></div><div class=col-md-4 style="padding:0px 50px 0px 30px"><h4>Top {{meses[fechaHoy.getMonth()]}}</h4><table class="table table-striped" ng-if="topUsuariosMensual.length>0"><thead><tr><th>#</th><th>Usuario</th><th>Localizaciones</th></tr></thead><tbody><tr ng-repeat="usu in topUsuariosMensual | orderBy: \'-total\' | limitTo:3"><th scope=row>{{$index+1}}</th><td><a href=/tus-localizaciones/{{usu.autor}}>{{usu.autor}}</a></td><td>{{usu.total}}</td></tr></tbody></table><p ng-if="topUsuariosMensual.length===0">Esperando nuevas localizaciones para este mes</p></div><div class=col-md-4><h4 style=color:#F79A09>Cursos destacados de este mes</h4><p ng-repeat="evento in listaEventos | filter:{destacado:true} | limitTo:3"><img src=http://res.cloudinary.com/djhqderty/image/upload/c_scale,q_29,w_350/v1429114149/{{evento.cloudinaryId}}.jpg alt="Smiley face" width=50 height=50 style=float:left;margin-right:20px><a href="/cursos/{{evento._id}}/{{evento.titulo | seo}}">{{evento.titulo}}</a> por <strong>{{evento.organizador}}</strong> ({{evento.fecha | date:\'dd/MM/yyyy\'}})</p></div></div></div></div>'),a.put("app/main/sitemap.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Home</a></li><li class=active>Sitemap</li></ul></div></div><div class=row><div class=col-md-12><h1>Sitemap</h1></div></div></div></section><div class=container><div class=row><div class=col-md-4><ul class="sitemap list icons"><li>Localizador de Fotografías Nocturnas<ul class="list icons"><li><i class="fa fa-caret-right"></i><a href="/">Inicio</a></li><li><i class="fa fa-caret-right"></i><a href=/localizaciones-fotografia-nocturna>Mapa</a></li><li><i class="fa fa-caret-right"></i><a href=/cursos-sobre-fotografia-nocturna-y-paisaje>Cursos sobre fotografía nocturna y paisaje</a></li></ul></li></ul></div><div class=col-md-4><ul class="sitemap list icons"><li>Informacion interesante<ul class="list icons"><li><i class="fa fa-caret-right"></i><a href=/blog>Blog</a></li><li><i class="fa fa-caret-right"></i><a href=/contacto>Contacto</a></li><li><i class="fa fa-caret-right"></i><a href=/sobrenosotros>Sobre Nosotros</a></li><li><i class="fa fa-caret-right"></i><a href=/mejora>Mejora la web</a></li></ul></li></ul></div><div class=col-md-4><ul class="sitemap list icons"><li>Usuario<ul class="list icons"><li><i class="fa fa-caret-right"></i><a href=/login>Login</a></li><li><i class="fa fa-caret-right"></i><a href=/signup>Crear Usuario</a></li><li><i class="fa fa-caret-right"></i><a href=/olvide-password>Olvidé mi contraseña</a></li><li><i class="fa fa-caret-right"></i><a href=/cookies>Información sobre cookies</a></li><li><i class="fa fa-caret-right"></i><a href=/terminos>Términos de Uso</a></li></ul></li></ul></div></div></div>'),a.put("app/main/terminos.html","<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Términos de Uso</li></ul></div></div><div class=row><div class=col-md-12><h1>Términos de Uso</h1></div></div></div></section><div class=container><div class=row><div class=col-md-12><p class=lead>La autoría de cada fotografía alojada en subexpuesta.com será siempre tuya.</p><small>El siguiente documento describe los términos de uso del sitio web subexpuesta.com. También puede revisar nuestra política de privacidad, que describe nuestras prácticas para el manejo de cualquier información personal que usted nos proporciones. Antes de utilizar cualquiera de los servicios de subexpuesta.com, usted está obligado a leer, entender y aceptar estos términos. Sólo puedes crear una cuenta después de leer y aceptar estos términos.</small></div></div><hr><div class=row><div class=col-md-12><accordion><accordion-group><accordion-heading>ACEPTACIÓN DE CONDICIONES <i class=\"pull-right glyphicon\" ng-class=\"{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}\"></i></accordion-heading>Las página web www.subexpuesta.com, las páginas vinculadas “Dentro del Sitio” y la marca y logotipos “subexpuesta.com”, son propiedad y operados por Enrique Aparicio Castellanos, en adelante “subexpuesta.com” y usted accede a ella en virtud de las condiciones de uso descritas a continuación. Por favor, lea estos términos cuidadosamente antes de utilizar los servicios. Al acceder al sitio, se muestran los contenidos o el uso de cualquiera de los servicios disponibles en la web. Usted acepta que quedará vinculado por estos términos, que junto con nuestra política de privacidad, rige nuestra relación con usted en relación con subexpuesta.com. Si no está de acuerdo con alguna parte de los términos, entonces no puede disfrutar del acceso a subexpuesta.com ni disfrutar de sus servicios. subexpuesta.com se reserva el derecho de modificar o cambiar las condiciones en cualquier momento. Si las modificaciones constituyen un cambio sustancial en los términos, subexpuesta.com, notificará a sus usuarios por correo electrónico. Lo que determina cuando un cambio en nuestras políticas es sustancial lo determinará subexpuesta.com. Usted será responsable de revisar y familiarizarse con las modificaciones mencionadas. El uso de cualquier servicio o visualizar cualquier contenido desde la notificación de un cambio sustancial en los términos constituirá la aceptación de las condiciones nuevas.</accordion-group><accordion-group><accordion-heading>DESCRIPCIÓN DEL SERVICIO <i class=\"pull-right glyphicon\" ng-class=\"{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}\"></i></accordion-heading>El sitio es una comunidad online que permite a los fotógrafos, publicar fotografías junto con sus localizaciones , compartir comentarios , opiniones e ideas , promover su trabajo, participar en concursos y promociones , y el acceso y / o Servicios. El contenido del material publicado está limitado a texto, comentarios de usuarios, mensajes, información, datos, gráficos, artículos de noticias, fotografías o imágenes. Su acceso y uso del Sitio puede ser interrumpido en cualquier momento, como resultado de algún problema técnico, mantenimiento o reparación del Sitio o cualquier otro motivo, dentro o fuera del control de subexpuesta.com. subexpuesta.com se reserva el derecho de suspender o interrumpir la disponibilidad del Sitio y / o los Servicios y / o eliminar cualquier contenido en cualquier momento y sin previo aviso. subexpuesta.com también puede imponer límites a ciertas características y servicios o restringir su acceso a partes o a todo el Sitio y los Servicios sin previo aviso ni responsabilidad. El sitio no se debe utilizar o depender de ella para el almacenamiento de las fotografías y las imágenes y que se dirigen a mantener sus propias copias de todo el contenido publicado en el Sitio.</accordion-group><accordion-group><accordion-heading>REGISTRO <i class=\"pull-right glyphicon\" ng-class=\"{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}\"></i></accordion-heading>Como condición para el uso de los Servicios, usted está obligado a abrir una cuenta con subexpuesta.com, y proporcionar información personal para el registro. La información de registro que proporcione debe ser precisa, completa y actualizada en todo momento. El no hacerlo constituye una violación de los Términos de Uso, que puede resultar en la finalización de su cuenta en subexpuesta.com. Usted no puede utilizar como nombre de usuario el nombre de otra persona o entidad, o que no está legalmente disponible para su uso, un nombre o una marca que está sujeto a los derechos de otra persona o entidad que no sea usted, sin la autorización correspondiente, o un nombre que resulte ofensivo , vulgar u obsceno. Usted es responsable de mantener la confidencialidad de su contraseña y será el único responsable de todas las actividades que resulten del uso de su contraseña y llevado a cabo a través de su cuenta en subexpuesta.com. Los servicios están disponibles sólo para las personas que tienen al menos 18 años de edad o al menos 14 años de edad, y que están autorizadas para tener acceso al sitio por un padre o tutor legal. Si usted ha autorizado a un menor a utilizar el Sitio, usted es responsable de la conducta en subexpuesta.com de dicho menor de edad y las consecuencias de cualquier mal uso del Sitio por parte del menor. Se les advierte a los padres y tutores legales, que esta prohibido mostrar fotografías e imágenes que contengan desnudos y violencia que puede ser ofensivo para algunos. subexpuesta.com se reserva el derecho de valorar los grados de desnudo y violencia gráfica. Los servicios están diseñados para su uso por fotógrafos y artistas gráficos o espectadores amantes de la fotografía.</accordion-group><accordion-group><accordion-heading>PUBLICACIÓN DE FOTOS <i class=\"pull-right glyphicon\" ng-class=\"{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}\"></i></accordion-heading><p>Por favor, lea atentamente esta sección antes de publicar, subir, o de otra manera de enviar cualquier contenido al sitio. Al enviar contenido al sitio, el usuario garantiza a subexpuesta.com una licencia mundial, no exclusiva para utilizar el contenido y declara y garantiza a subexpuesta.com, que el contenido es propiedad o está debidamente autorizada por usted, y que subexpuesta.com es libre de publicar, distribuir y utilizar la contenidos previstos a continuación sin obtener permiso o licencia de terceros. En consideración del acuerdo de subexpuesta.com para que pueda publicar Contenido en el Sitio y el acuerdo de subexpuesta.com publicar dicho Contenido y para otra consideración de valor del recibo y suficiencia se reconocen por este medio expresa e irrevocable , usted está de acuerdo con subexpuesta.com en:</p><p><strong>Usted reconoce que:</strong></p><p>El hecho de Subir las obras fotográficas o gráficas para subexpuesta.com, usted sigue manteniendo todos los derechos de esas obras que usted tenía antes de la carga. Al publicar Contenido en el Sitio usted otorga a subexpuesta.com una licencia no exclusiva, transferible, a nivel mundial (con derecho a sublicenciar) para usar, distribuir, reproducir, modificar, adaptar , ejecutar públicamente y mostrar públicamente dicho Contenido en relación con los Servicios. Esta licencia existirá durante el período durante el cual el contenido se publica en el sitio y se terminará automáticamente cuando se elimine el Contenido del Sitio. La licencia concedida a subexpuesta.com incluye el derecho a utilizar su contenido total o parcialmente por razones de promoción y para distribuir y redistribuir su contenido a terceros, sitios web, aplicaciones y otras entidades , siempre que dicho contenido se atribuye a que, de conformidad con el créditos ( es decir, nombre de usuario, foto de perfil , título de la foto , descripción , etiquetas y demás información que acompaña a ) si los hubiera y según proceda, todo lo presentado a subexpuesta.com por usted. subexpuesta.com utilizará software de protección como medidas dirigidas a restringir la capacidad de los usuarios y visitantes del sitio para hacer copias de alta resolución de Contenido publicado en el Sitio. A pesar de esto , subexpuesta.com no hace ninguna representación y garantía que el contenido publicado en el Sitio no será copiada ilegalmente sin su consentimiento. subexpuesta.com no restringe la capacidad de los usuarios y visitantes del sitio para descargarse copias a baja resolución o en miniatura del contenido publicado en el sitio y que la presente autorizo ​​expresamente a subexpuesta.com para permitir a los usuarios y visitantes del sitio para hacer las copias de baja resolución de su contenido y Sujeto a los términos de la licencia anterior, usted conservará la plena propiedad u otros derechos de su contenido y de cualquier derecho de propiedad intelectual u otros derechos de propiedad asociados con su contenido.</p><p><strong>Usted manifiesta y garantiza que:</strong></p><p>Usted es el propietario de todos los derechos, incluyendo todos los derechos de copia y para todo el Contenido que usted envíe al sitio. Usted tiene el derecho pleno y completo para aceptar este acuerdo y conceder a subexpuesta.com los derechos sobre el contenido que aquí se concede. No difamar a cualquier persona y no infringir los derechos de autor, derechos morales, derechos de publicidad, derechos de privacidad o cualquier otro derecho de cualquier persona, o violar cualquier ley o una orden judicial o gubernamental Española. Usted no tiene derecho a suspender los permisos concedidos en el presente documento , ni de buscar, obtener, o hacer cumplir cualquier desagravio por mandato judicial o de otro tipo contra subexpuesta.com, todos los cuales esos derechos por este medio expresa e irrevocablemente renuncia por usted a favor de subexpuesta.com.</p></accordion-group><accordion-group><accordion-heading>RECLAMACIONES DE COPYRIGTH <i class=\"pull-right glyphicon\" ng-class=\"{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}\"></i></accordion-heading>subexpuesta.com respeta los derechos de propiedad intelectual de otros. Es nuestra política para responder con prontitud a cualquier reclamación que Contenido publicado en el Sitio infringe los derechos de autor u otra infracción de propiedad intelectual ( ” Violación “) de cualquier persona. subexpuesta.com usará esfuerzos razonables para investigar los avisos de supuestas infracciones y tomará las medidas apropiadas en virtud de la ley de propiedad intelectual aplicables y estos Términos en los que consideren que la infracción ha tenido lugar, incluyendo la eliminación o desactivación del acceso a los Contenidos demanda para infringir y / o terminar las cuentas y el acceso al Sitio. Para notificar a subexpuesta.com de una posible infracción de copyright, debe enviar una notificación a través del menú “CONTACTO” e incluir en su notificación una descripción detallada de la supuesta infracción, suficiente para permitir a subexpuesta.com tomar una determinación razonable. Por favor, tenga en cuenta que usted puede ser responsable por daños y perjuicios (incluyendo costos y honorarios de abogados) por tergiversar cualquier Contenido que infringe sus derechos de autor. Si eliminamos o deshabilitar el acceso a contenido en respuesta a un aviso de infracción, haremos esfuerzos razonables para contactar al usuario que ha publicado el contenido afectado. Si usted siente que su contenido no infringe copyright, puede proporcionar a subexpuesta.com por escrito a través del menú “CONTACTO”. Usted debe incluir en su aviso la información suficiente para permitir a subexpuesta.com tomar una determinación razonable. Por favor, tenga en cuenta que usted puede ser responsable por daños y perjuicios (incluyendo costos y honorarios de abogados) si afirma que su contenido no infringe los derechos de autor de otros. Si no está seguro si una actividad constituye una infracción, se recomienda buscar asesoría de un abogado.</accordion-group><accordion-group><accordion-heading>ENLACES <i class=\"pull-right glyphicon\" ng-class=\"{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}\"></i></accordion-heading>Los Servicios pueden proporcionar, o terceros pueden proporcionar, enlaces a otros sitios Web o recursos. Debido a que subexpuesta.com, no tiene control sobre tales sitios y recursos, usted reconoce y acepta que subexpuesta.com, no se responsabiliza por la disponibilidad de dichos sitios o recursos externos, y no los respalda ni es responsable o responsable de cualquier contenido, publicidad, productos u otros materiales en o disponibles en dichos sitios o recursos. Además, usted reconoce y acepta que subexpuesta.com no será responsable o estará obligado, directa o indirectamente, por cualquier daño o pérdida causada o supuestamente causada por o en conexión con el uso o la credibilidad en cualquier Contenido, bienes o servicios disponibles en o a través de cualquier sitio o recurso.</accordion-group><accordion-group><accordion-heading>DENUNCIAS E INDENNIZACIONES <i class=\"pull-right glyphicon\" ng-class=\"{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}\"></i></accordion-heading>Usted por este medio expresa e irrevocablemente exonero para siempre a subexpuesta.com a las empresas afiliadas y asociadas , ya sus respectivos directores, empleados, representantes y cesionarios que de cualquiera y todas las acciones, causas de acción, demandas , procedimientos , responsabilidades, deudas , juicios , demandas y exigencias de ningún tipo de derecho o equidad que alguna vez tuvo, ahora tienen, o de aquí en adelante pueden, deben o pueden tener, para o por la razón, o que se deriven directa o indirectamente de su uso del sitio y los Servicios. Usted acepta indemnizar y mantener indemne a subexpuesta.com, sus empresas filiales y asociadas, y sus respectivos directores , empleados , representantes y cesionarios de y contra todas las reclamaciones , pérdidas , gastos, daños y costos (incluyendo , pero no limitado a , daños directos, incidentales, consecuenciales, ejemplares e indirectos ), y los honorarios razonables de abogados , que resulten o surjan de ( i ) un incumplimiento de estas Condiciones , ( ii ) el contenido publicado en la sitio, ( iii ) la utilización de los Servicios, por parte suya o de cualquier persona que utilice su cuenta en subexpuesta.com, nombre de usuario y contraseña, ( iv ) la venta o uso de su tienda de Imágenes, o ( v ) cualquier violación de cualquier derecho de un tercero .</accordion-group><accordion-group><accordion-heading>LIMITACIONES DE RESPONSABILIDAD <i class=\"pull-right glyphicon\" ng-class=\"{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}\"></i></accordion-heading>En ningún caso subexpuesta.com es responsable bajo contrato, agravio, responsabilidad objetiva, negligencia u otra. La teoría jurídica con respecto al sitio, el servicio o cualquier contenido (i) por cualquier pérdida de beneficios o daños especiales, indirectos, incidentales, punitivos, o consecuenciales de cualquier naturaleza, (ii). Para proporcionar los bienes o servicios sustitutivos (aunque se deriven), o (iii) por los daños directos superiores a (en conjunto) de 100€.</accordion-group><accordion-group><accordion-heading>MARCAS COMERCIALES <i class=\"pull-right glyphicon\" ng-class=\"{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}\"></i></accordion-heading>Los gráficos de subexpuesta.com, logotipos, diseños, encabezados de página, iconos de botones, scripts y nombres de servicios son marcas registradas, marcas comerciales o marcas de subexpuesta.com. Las marcas comerciales de subexpuesta.com no podrán ser utilizado en conexión con cualquier producto o servicio sin el consentimiento previo por escrito de subexpuesta.com. Las imágenes y los iconos disponibles en el paquete de iconos subexpuesta.com pueden utilizado por socios y sitios de terceros en relación con la provisión de conexiones apropiadas con el sitio subexpuesta.com.</accordion-group><accordion-group><accordion-heading>FINALIZACIÓN <i class=\"pull-right glyphicon\" ng-class=\"{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}\"></i></accordion-heading>subexpuesta.com puede terminar o suspender cualquier y todos los Servicios y / o su cuenta de subexpuesta.com inmediatamente, sin previo aviso o responsabilidad, por cualquier motivo, incluyendo, sin limitación, si usted viola los Términos. A la terminación de su cuenta, su derecho a utilizar los Servicios cesará inmediatamente. Si desea cancelar su cuenta de subexpuesta.com, usted puede simplemente dejar de utilizar los Servicios. Todas las disposiciones de los Términos que por su naturaleza deberían sobrevivir a la terminación sobrevivirán la terminación, incluyendo, sin limitación, las disposiciones de propiedad, renuncias de garantía, indemnización y limitaciones de responsabilidad. Es su responsabilidad eliminar todo el contenido de su cuenta antes de la cancelación de la misma. A la terminación de su cuenta, subexpuesta.com eliminará automáticamente todo el Contenido enviado a su cuenta.</accordion-group><accordion-group><accordion-heading>VARIOS <i class=\"pull-right glyphicon\" ng-class=\"{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}\"></i></accordion-heading>Usted no tendrá ninguna autoridad de ningún tipo para obligar a subexpuesta.com en ningún aspecto. El fracaso de cualquiera de las partes a ejercer en modo alguno a la facultad prevista en el presente documento no se considerará una renuncia de cualquier continuación de otros derechos. subexpuesta.com no será responsable por cualquier incumplimiento de sus obligaciones bajo el mismo cuando dicho incumplimiento por cualquier causa más allá del control razonable de subexpuesta.com, incluyendo , sin limitación, un fallo mecánico , electrónico o de comunicaciones o degradación ( incluida la interferencia ” line – ruido”) . Si alguna disposición de los Términos resulta ser inválida o inejecutable , dicha disposición se limitará o eliminará en la medida mínima necesaria para que las cláusulas no se permanezca en pleno vigor y efecto y aplicable. subexpuesta.com podrá transferir, ceder o delegar los Términos y sus derechos y obligaciones sin consentimiento. Los Términos se regirán e interpretarán de conformidad con las leyes de España. Las partes se someten a la jurisdicción exclusiva de los tribunales de Alicante, España. Ambas partes acuerdan que los términos es la declaración completa y exclusiva de la comprensión mutua de las partes y sustituye y anula todas las anteriores acuerdos, comunicaciones y demás declaraciones relacionadas con la materia objeto de las Condiciones, y que todas las modificaciones deben estar en un escrito firmado por ambas partes , salvo disposición en contrario en el presente documento .</accordion-group></accordion></div></div></div>"),a.put("app/mejora/admin/gestion-boletin.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Boletin</li></ul></div></div><div class=row><div class=col-md-12><h1>Boletin</h1></div></div></div></section><div class=container><section class=panel><div class=panel-body><table class="table table-no-more table-bordered table-striped mb-none"><thead><tr><th>fechaCreacion</th><th>email</th><th>nombre</th><th>localidad</th><th>origen</th><th>Estado</th></tr></thead><tbody><tr ng-repeat="boletin in listaBoletines"><td data-title=Fecha>{{boletin.fechaCreacion | date:\'dd-MM-yyyy\'}}</td><td>{{boletin.email}}</td><td>{{boletin.nombre}}</td><td>{{boletin.localidad}}</td><td>{{boletin.origen}}</td><td>{{boletin.estado}}</td></tr></tbody></table></div></section></div>'),a.put("app/mejora/admin/modificar-mejora.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Mejora la Web</li></ul></div></div><div class=row><div class=col-md-12><h1>Actualizac Mejora Web</h1></div></div></div></section><div class=container><section class=panel><div class=panel-body><table class="table table-no-more table-bordered table-striped mb-none"><thead><tr><th>Fecha</th><th>Mejora</th><th>Estado</th><th>Votos</th><th></th><th></th></tr></thead><tbody><tr ng-repeat="mejora in listaMejoras"><td data-title=Fecha>{{mejora.fecha | date:\'dd-MM-yyyy\'}}</td><td data-title=Mejroa>{{mejora.descripcion}}</td><td data-title=Mejroa><select ng-model=mejora.estado ng-options="item.id as item.name for item in items"></select></td><td data-title=Votos>{{mejora.votos}}</td><td><a href="" ng-click="actualizarVoto(mejora._id, true)"><i class="fa fa-thumbs-o-up"></i></a> <a href="" ng-click="actualizarVoto(mejora._id, false)"><i class="fa fa-thumbs-o-down"></i></a> <a href="" ng-click=borrarMejora(mejora._id) ng-show=isAdmin()><i class="fa fa-trash-o"></i></a></td><td><button type=text class="btn btn-default" ng-click="actualizarMejora(mejora._id, mejora.estado)">Modificar</button></td></tr></tbody></table></div></section></div>'),a.put("app/mejora/mejora.html",'<section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Mejora la Web</li></ul></div></div><div class=row><div class=col-md-12><h1>Mejora la Web</h1></div></div></div></section><div class=container><div class=row><div class=col-md-12><div class="alert alert-info alert-admin"><div class=row><div class=col-md-8><h4>Tu opinión cuenta</h4><p>Cualquier sugerencia que se te ocurra, un problema que encuentres, alguna funcionalidad nueva que te gustaría que apareciera en la web o cualquier comentario para mejorar la web es bienvenido. Totalmente anónimo y gratuito jeje</p></div><div class="col-md-4 visible-md visible-lg"><img class=pull-right src=assets/images/mejora-la-web.png style="width: 372px; margin:0px"></div></div></div></div></div></div><div class=container><section class=panel><header class=panel-heading><button class="btn btn-success" ng-click="isCollapsed=!isCollapsed">Añade nueva mejora</button><div collapse=isCollapsed><div class=form-group style=margin-top:20px><label class="col-md-2 control-label">Describe la mejora</label><div class=col-md-10><div class="input-group mb-md"><input class=form-control ng-model=descripcionMejora> <span class=input-group-btn><button class="btn btn-success" type=button ng-click=crearMejora()>Guardar</button></span></div></div></div></div><alert type=info close="mejoraCreada=false" ng-show=mejoraCreada style=margin-top:20px>Tu mejora ha sido guardada. En cuanto se pueda nos pondremos en manos a la obra con ella. Gracias!</alert></header><div class=panel-body><table class="table table-no-more table-bordered table-striped mb-none"><thead><tr><th>Fecha</th><th>Mejora</th><th>Estado</th><th>Votos</th><th></th></tr></thead><tbody><tr ng-repeat="mejora in listaMejoras"><td data-title=Fecha>{{mejora.fecha | date:\'dd-MM-yyyy\'}}</td><td data-title=Mejroa>{{mejora.descripcion}}</td><td data-title=Mejroa>{{estadosMejoras[mejora.estado]}}</td><td data-title=Votos>{{mejora.votos}}</td><td><a href="" ng-click="actualizarVoto(mejora._id, true)"><i class="fa fa-thumbs-o-up"></i></a> <a href="" ng-click="actualizarVoto(mejora._id, false)"><i class="fa fa-thumbs-o-down"></i></a> <a href="" ng-click=borrarMejora(mejora._id) ng-show=isAdmin()><i class="fa fa-trash-o"></i></a></td></tr></tbody></table></div></section></div>'),
a.put("app/postales/admin/generar-ganadores.html",'<div class=container><div class=row><div class=col-md-12><a href=# class="btn btn-lg btn-warning pull-right" ng-click=calcular()>Establecer ganadores</a><table class="table table-bordered table-striped mb-none" id=datatable-default><thead><tr><th>Fecha</th><th>Username</th><th>Email</th><th>Postales</th></tr></thead><tbody><tr ng-repeat="usuario in listaUsuarios | filter:{ganadorPostales:true} " class=gradeX><td>{{usuario.fecha | date:\'dd/MM/yyyy\'}}</td><td>{{usuario.username}}</td><td>{{usuario.email}}</td><td>{{usuario.ganadorPostales}}</td></tr></tbody></table></div></div></div>'),a.put("app/postales/ganadores-postales.html",'<div role=main class=main><section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href="/">Inicio</a></li><li class=active>Sorteo de Postales para Navidad</li></ul></div></div><div class=row><div class=col-md-12><h1>Sorteo de Postales para Navidad</h1></div></div></div></section><div class=container><div class=row><h3 style=margin-left:10px>Ganadores del Sorteo de 4 postales con tu fotografía</h3><div class=col-md-9><p><strong style=color:green>Enhorabuena a todos los galardonados!!</strong></p><p>Y <strong>mil gracias</strong> a todos los que participaren en el sorteo.</p><p>Nos estamos poniendo en contacto con todos los ganadores <strong>vía email</strong> para saber que fotografía quieren en su postal y a qué dirección debemos inviarlas. Estar atentos al correo para poder agilizar este proceso y poder enviar las postales cuanto antes, ya que como todos sabemos, en el mes de Diciembre el correo ordinario se satura bastante y mejor hacerlo cuanto antes.</p><p>Con cualquier duda o problema no dudeis en poneros en contacto con nosotros: subexpuestaweb@gmail.com</p><br><p>En caso de no obtener respuesta de los ganadores procederemos a comunicarnos con los reservas.</p></div><div class=col-md-3><table class="table table-striped" ng-if="topUsuariosMensual.length>0"><thead><tr><th>#</th><th>Usuario</th></tr></thead><tbody><tr ng-repeat="usu in topUsuariosMensual | orderBy: \'-total\'"><th scope=row>{{$index+1}}</th><td><a href=/tus-localizaciones/{{usu.autor}}>{{usu.autor}}</a></td></tr></tbody></table></div></div></div></div>'),a.put("app/postales/postales.html",'<div role=main class=main><section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href="/">Inicio</a></li><li class=active>Sorteo de Postales para Navidad</li></ul></div></div><div class=row><div class=col-md-12><h1>Sorteo de Postales para Navidad</h1></div></div></div></section><div class=container><div class=row><div class=col-md-7><h3>Sorteo de Postales con tu fotografía</h3><p><strong>¿Os acordáis cuando llegaba Navidad y teníais lleno el buzón de postales?</strong></p><p>Puede que seamos unos nostálgicos, unos retros, o unos pasados de moda, pero el hecho de recibir una postal con un mensaje de un ser querido es algo que tiene una magia especial.</p><p><strong>¿Y por qué no que esa postal tenga una fotografía tuya?</strong></p><p>Pues en <a href="/">Subpexpuesta.com</a> todas las localizaciones creadas durante el mes de Noviembre, entrarán en el sorteo para convertir tu fotografía en postal!</p><p><strong style="color:green; font-size:17px">20 ganadores</strong>, <strong style="color:#D934CB; font-size:16px">4 postales por ganador</strong>, sólo por crear una localización nueva.</p><p><strong>¿Cómo funciona el sorteo?</strong></p><ul><li>Por cada localización creada durante el mes de Noviembre obtendrás una participación para el sorteo. Así que cuantas más localizaciones subas durante el mes de Noviembre, más posibilidades tienes de ser uno de los 20 ganadores!</li><li>Una vez sepamos los ganadores, nos pondremos en contacto con ellos para pedirles la fotografía que quieren en sus postales (en alta calidad).</li><li>Los ganadores elegiran si recibir las 4 postales en casa, para rellenarlas ellos mismos o directamente enviamos nosotros a las direcciones deseadas.</li></ul><p><a href=http://res.cloudinary.com/djhqderty/image/upload/v1446472043/bases-legales_ykh1id.pdf target=_blank>Ver bases del sorteo</a></p><p><strong style="color:green; font-size:18px">Mucha suerte! y a participar!</strong></p><p>Para crear tu localización sólo tienes que <a href=/login>iniciar sesión con tu usuario</a>, darle en "Crear localización" y rellenar la información necesaria del lugar. Recuerda que cuantas más localizaciones subas a la web durante Noviembre más opciones tienes de poder ser uno de los ganadores.</p><img src="/assets/images/pasos.jpg"></div><div class=col-md-5><img src=/assets/images/sorteo.jpg width=500px style=margin-top:20px alt="Sorteo subexpuesta.com"><h3 style=margin-top:20px ng-if="topUsuariosMensual.length>0">Participantes del sorteo</h3><table class="table table-striped" ng-if="topUsuariosMensual.length>0"><thead><tr><th>#</th><th>Usuario</th><th>Participaciones</th></tr></thead><tbody><tr ng-repeat="usu in topUsuariosMensual | orderBy: \'-total\'"><th scope=row>{{$index+1}}</th><td><a href=/tus-localizaciones/{{usu.autor}}>{{usu.autor}}</a></td><td>{{usu.total}}</td></tr></tbody></table></div></div></div></div>'),a.put("app/recomendaciones/recomendaciones.html",'<div class=container><div class=row><div class="col-md-12 center"><hr></div></div><div class=row><div class="col-md-12 center"><h1 class="short small">MUY PRONTO DISPONIBLE</h1><p class="short lead">Guia y trucos para la fotografia nocturna.</p><p>Equipo, linternas, lasers, y toda la parafernalia que a veces es util en la fotografia nocturna.</p></div></div></div><!--\n<section class="page-top">\n	<div class="container">\n		<div class="row">\n				<div class="col-md-12">\n						<ul class="breadcrumb">\n								<li><a href="#">Home</a></li>\n								<li class="active">Recomendaciones</li>\n						</ul>\n				</div>\n		</div>\n		<div class="row">\n				<div class="col-md-12">\n						<h1>Recomendaciones para Fotografía Nocturna</h1>\n				</div>\n		</div>\n	</div>\n</section>\n<div class="container">\n	<div class="row">\n		<div class="col-md-4">\n				<ul class="sitemap list icons">\n						<li>\n								<i class="fa fa-caret-right"></i><a href="index.html">Material Necesario</a>\n						</li>\n						<li>\n								<i class="fa fa-caret-right"></i>Un poco de teoría\n								<ul class="list icons">\n										<li><i class="fa fa-caret-right"></i><a href="#">Composición</a>\n									</li>\n									<li><i class="fa fa-caret-right"></i><a href="feature-typography.html">Cómo enfocar?</a></li>\n									<li><i class="fa fa-caret-right"></i><a href="feature-grid-system.html">Diafragma</a></li>\n									<li><i class="fa fa-caret-right"></i><a href="feature-pricing-tables.html">Velocidad</a></li>\n									<li><i class="fa fa-caret-right"></i><a href="feature-icons.html">Hiperfocal</a></li>\n									<li><i class="fa fa-caret-right"></i><a href="feature-typography.html">Sensibilidad ISO</a></li>\n									<li><i class="fa fa-caret-right"></i><a href="feature-typography.html">Exposición</a></li>\n									<li><i class="fa fa-caret-right"></i><a href="feature-typography.html">Temperatura de Color</a></li>\n							</ul>\n					</li>\n					<li>\n							<i class="fa fa-caret-right"></i>Lightpainting\n							<ul class="list icons">\n									<li><i class="fa fa-caret-right"></i><a href="portfolio-2-columns.html">Flash/Linternas</a></li>\n									<li><i class="fa fa-caret-right"></i><a href="portfolio-3-columns.html">Efectos</a></li>\n									\n									\n							</ul>\n					</li>\n					<li>\n							<i class="fa fa-caret-right"></i>Libros\n							<ul class="list icons">\n									<li><i class="fa fa-caret-right"></i><a href="page-full-width.html">Mario Rubio</a></li>\n									<li><i class="fa fa-caret-right"></i><a href="page-left-sidebar.html">José Benito</a></li>\n									\n							</ul>\n					</li>\n					\n			</ul>\n	</div>\n	<div class="col-md-8 hidden-xs">\n			<h1 class="short small">MUY PRONTO DISPONIBLE</h1>\n			<p class="short lead">Guia y trucos para la fotografia nocturna.</p>\n			<p>Equipo, linternas, lasers, y toda la parafernalia que a veces es util en la fotografia nocturna.</p>\n	</div>\n	\n</div>\n</div>-->'),a.put("app/sobremi/sobremi.html",'<div role=main class=main><section class=page-top><div class=container><div class=row><div class=col-md-12><ul class=breadcrumb><li><a href=#>Inicio</a></li><li class=active>Sobre Nosotros</li></ul></div></div><div class=row><div class=col-md-12><h1>Quique Aparicio</h1></div></div></div></section><div class=container><div class=row><div class=col-md-4><div class=owl-carousel><div><div class=thumbnail><img alt="" height=300 class=img-responsive src=assets/images/quique-aparicio.jpg></div></div></div></div><div class=col-md-8><h2 class=shorter>Quique <strong>Aparicio</strong></h2><h4>Desarrollador Web / Fotógrafo aficionado</h4><span class=thumb-info-social-icons><a data-tooltip data-placement=bottom target=_blank href=http://www.facebook.com data-original-title=Facebook><i class="fa fa-facebook"></i><span>Facebook</span></a> <a data-tooltip data-placement=bottom href=http://www.twitter.com data-original-title=Twitter><i class="fa fa-twitter"></i><span>Twitter</span></a> <a data-tooltip data-placement=bottom href=http://www.linkedin.com data-original-title=Linkedin><i class="fa fa-linkedin"></i><span>Linkedin</span></a></span><p>Tratando de unir mi profesión con mi afición, me aventuré a desarrollar este portal para compartir y encontrar <strong>localizaciones de fotografías nocturnas</strong>. Al ser un proyecto personal, lo voy haciendo poco a poco, cuando puedo sacar un hueco, por lo que muchas veces el desarrollo de la web se hace de desear. Combino varias tecnologías de las que no soy muy experto, pero esa era la idea, aprender mientras se va completando la web.</p><p>Tecnología que hay por debajo</p><ul class="list icons list-unstyled"><li><i class="fa fa-check"></i> Fullstack-JavaScript: <strong>MongoDB</strong>+<strong>NodeJS</strong>+<strong>ExpressJS</strong>+<strong>AngularJS</strong></li><li><i class="fa fa-check"></i> Responsive Design: <strong>Bootstrap 3</strong></li><li><i class="fa fa-check"></i> Alojamiento Imagenes: <strong>Cloudinary</strong></li></ul><p>Para mantener una web limpia, sencilla de usar y atractiva para los usuarios, está <strong>100% libre de publicidad</strong>. No hay banners, publicidad de Google, ni patrocinadores, por lo que pago de los servidores se va haciendo cada vez más cuesta arriba.</p><p>Por eso cualquier ayuda para poder <strong>mantener el proyecto</strong> es más que bienvenida. Igual que puedes invitar a un amigo a un café, a un cubata o a una merienda, me dejo que me invites por aquí para poder hacer frente al pago de los servidores. Gracias de antemano!</p><form action=https://www.paypal.com/cgi-bin/webscr method=post target=_top><input type=hidden name=cmd value=_s-xclick> <input type=hidden name=hosted_button_id value=J89DNQT6LDM2E> <input type=image src=https://www.paypalobjects.com/es_ES/ES/i/btn/btn_donate_LG.gif border=0 name=submit alt="PayPal. La forma rápida y segura de pagar en Internet."> <img alt="" border=0 src=https://www.paypalobjects.com/en_US/i/scr/pixel.gif width=1 height=1></form></div></div></div></div>'),a.put("components/footer/footer.html",'<footer id=footer ng-controller=FooterCtrl><div class=container><div class=row><div class=footer-ribbon><span>Nos sigues?</span></div><div class=col-md-3><div class=newsletter><h4>Boletín de Noticias</h4><p>Mantente informado con todas las novedades de la web: concursos, sorteos, premios, mejores localizaciones...</p><div class=input-group style=width:90%><input class=form-control placeholder="Tu Email" ng-model=correo type=email> <span class=input-group-btn><button class="btn btn-default" ng-click=guardarEmail() ng-disabled="!correo.length>0">Go!</button></span></div><div class="alert alert-success" style=margin-top:10px ng-show=boletinCreado><strong>Éxito!</strong> Gracias por unirte a nuestra lista.</div><!--<div class="alert alert-danger" id="newsletterError"></div>--></div></div><div class=col-md-3><h4>Últimos artículos</h4><div class=row ng-repeat="arti in listaArticulos | orderBy:\'-fechaCreacion\' | limitTo:2" style=margin-top:20px><p><img src={{arti.imagen}} width=50 height=50 style=float:left;margin-right:20px><a href="/articulo/{{arti._id}}/{{arti.titulo | seo}}">{{arti.titulo}}</a></p></div></div><div class=col-md-4><div class=contact-details><h4>Contáctanos</h4><ul class=contact><li><p><i class="fa fa-map-marker"></i> <strong>Address:</strong> 20 Wellwood Street, Belfast, Northen Ireland</p></li><li><p><i class="fa fa-phone"></i> <strong>Movil:</strong> (+44) 7938653915</p></li><li><p><i class="fa fa-twitter"></i> <strong>Twitter:</strong> @subexpuesta_com</p></li></ul></div></div><div class=col-md-2><h4>Be Social</h4><div class=social-icons><ul class=social-icons><li class=facebook><a href=https://www.facebook.com/subexpuesta target=_blank data-placement=bottom data-tooltip title=Facebook>Facebook</a></li><li class=twitter><a href=https://twitter.com/subexpuesta_com target=_blank data-placement=bottom data-tooltip title=Twitter>Twitter</a></li><li class=instagram><a href="https://instagram.com/subexpuesta_com/" target=_blank data-placement=bottom data-tooltip title=Instagram>Instagram</a></li></ul></div></div></div></div><div class=footer-copyright><div class=container><div class=row><div class=col-md-1><a href="/" class=logo><img alt=www.subexpuesta.com class=img-responsive src=assets/images/subexpuesta-logo.png></a></div><div class=col-md-4><p>© Copyright 2015. Todos los derechos reservados.</p></div><div class=col-md-7><nav id=sub-menu><ul><li><a href=/cookies>Información sobre cookies</a></li><li><a href=/terminos-de-uso>Términos de Uso</a></li><li><a href=/sitemap>Sitemap</a></li><li><a href=/contacto>Contacto</a></li><li><a href=/donaciones><img src=https://www.paypalobjects.com/es_ES/ES/i/btn/btn_donate_LG.gif width="80px"></a></li></ul></nav></div></div></div></div></footer>'),a.put("components/modal/modal.html",'<div class=modal-header><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title style=color:#333></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),a.put("components/navbar/navbar.html",'<header id=header ng-controller=NavbarCtrl><div class=container><div class=logo><!--<a href="index.html">\n              <img alt="Porto" width="111" height="54" data-sticky-width="82" data-sticky-height="40" src="img/logo.png">\n            </a>--><!-- <h1><a href="/">Subexpuesta.com</a></h1>--><h1><a href="/"><img src=/assets/images/subexpuesta-logo.png alt=Subexpuesta.com width="304px"></a></h1></div><!--<div class="search">\n            <form id="searchForm" action="page-search-results.html" method="get">\n              <div class="input-group">\n                <input type="text" class="form-control search" name="q" id="q" placeholder="Search..." required>\n                <span class="input-group-btn">\n                  <button class="btn btn-default" type="submit"><i class="fa fa-search"></i></button>\n                </span>\n              </div>\n            </form>\n          </div>--><ul class=social-icons><li class=facebook><a href=https://www.facebook.com/subexpuesta target=_blank title=Facebook>Facebook</a></li><li class=twitter><a href=https://twitter.com/subexpuesta_com target=_blank title=Twitter>Twitter</a></li></ul><nav><ul class="nav nav-pills nav-top"><li><a href=/sorteo-postales-navidad style="color:black;text-decoration: underline;font-weight: bold">Sorteo de Postales con tu fotografía</a></li><li><a href=/sobrenosotros><i class="fa fa-angle-right"></i>Sobre Nosotros</a></li><li><a href=/mejora><i class="fa fa-angle-right"></i>Mejora la Web</a></li></ul></nav><!--<button class="btn btn-responsive-nav btn-inverse" ng-click="abrirMenu()" data-toggle="collapse" data-target=".nav-main-collapse">\n            <i class="fa fa-bars"></i>\n          </button>--><button class="btn btn-responsive-nav btn-inverse" ng-click=swapMenu()><i class="fa fa-bars"></i></button></div><div ng-class="menuExpandido ? \'navbar-collapse nav-main-collapse collapse in\' : \'navbar-collapse nav-main-collapse collapse\'"><div class=container><nav class="nav-main mega-menu" style=width:540px><ul class="nav nav-pills nav-main"><li><a class=dropdown-toggle ng-click=cerrarMenu() href="/">Inicio</a></li><li><a href=/localizaciones-fotografia-nocturna ng-click=cerrarMenu()>Mapa</a></li><li><a href=/cursos-sobre-fotografia-nocturna-y-paisaje ng-click=cerrarMenu()>Cursos</a></li><li><a href=/blog ng-click=cerrarMenu()>Blog</a></li><li><a href=/contacto ng-click=cerrarMenu()>Contacto</a></li><li><a ng-show=!isLoggedIn() href=/login style=color:#444 ng-click=cerrarMenu()><i class="fa fa-user"></i> Iniciar Sesión</a></li><li ng-show=isLoggedIn() class="dropdown mega-menu-item mega-menu-signin signin logged" id=headerAccount><a class=dropdown-toggle href=page-login.html><i class="fa fa-user"></i> {{getCurrentUser().username}} <i class="fa fa-angle-down"></i></a><ul class=dropdown-menu><li><div class=mega-menu-content><div class=row><div class=col-md-7><div class=user-avatar><div class=img-thumbnail><img ng-src="{{getCurrentUser().avatar}}"></div><p><strong>{{getCurrentUser().username}}</strong><i class="fa fa-camera"></i> <a href=/tus-localizaciones/{{getCurrentUser().username}} ng-click=cerrarMenu()>Tus localizaciones</a></p><p ng-if=isAdmin()><i class="fa fa-cog"></i> <a href=/admin>Admin</a></p></div></div><div class=col-md-5><ul class=list-unstyled><li><i class="fa fa-cloud-upload"></i> <a href=/crear-localizaciones ng-click=cerrarMenu()>Crear Localización</a></li><li><i class="fa fa-cog"></i> <a href=/settings ng-click=cerrarMenu()>Mi Cuenta</a></li><li><i class="fa fa-sign-out"></i> <a href="" ng-click=logout() ng-click=cerrarMenu()>Cerrar Sesión</a></li></ul></div></div></div></li></ul></li></ul></nav></div></div></header>')}]);